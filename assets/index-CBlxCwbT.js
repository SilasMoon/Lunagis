(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))o(m);new MutationObserver(m=>{for(const v of m)if(v.type==="childList")for(const k of v.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&o(k)}).observe(document,{childList:!0,subtree:!0});function f(m){const v={};return m.integrity&&(v.integrity=m.integrity),m.referrerPolicy&&(v.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?v.credentials="include":m.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function o(m){if(m.ep)return;m.ep=!0;const v=f(m);fetch(m.href,v)}})();function L0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var No={exports:{}},oi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0;function ox(){if(d0)return oi;d0=1;var r=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function f(o,m,v){var k=null;if(v!==void 0&&(k=""+v),m.key!==void 0&&(k=""+m.key),"key"in m){v={};for(var T in m)T!=="key"&&(v[T]=m[T])}else v=m;return m=v.ref,{$$typeof:r,type:o,key:k,ref:m!==void 0?m:null,props:v}}return oi.Fragment=u,oi.jsx=f,oi.jsxs=f,oi}var f0;function ux(){return f0||(f0=1,No.exports=ox()),No.exports}var n=ux(),So={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function dx(){if(h0)return Ke;h0=1;var r=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),k=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),M=Symbol.iterator;function z(g){return g===null||typeof g!="object"?null:(g=M&&g[M]||g["@@iterator"],typeof g=="function"?g:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,K={};function he(g,D,ae){this.props=g,this.context=D,this.refs=K,this.updater=ae||Y}he.prototype.isReactComponent={},he.prototype.setState=function(g,D){if(typeof g!="object"&&typeof g!="function"&&g!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,g,D,"setState")},he.prototype.forceUpdate=function(g){this.updater.enqueueForceUpdate(this,g,"forceUpdate")};function Ne(){}Ne.prototype=he.prototype;function ue(g,D,ae){this.props=g,this.context=D,this.refs=K,this.updater=ae||Y}var re=ue.prototype=new Ne;re.constructor=ue,F(re,he.prototype),re.isPureReactComponent=!0;var je=Array.isArray;function L(){}var B={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function ne(g,D,ae){var xe=ae.ref;return{$$typeof:r,type:g,key:D,ref:xe!==void 0?xe:null,props:ae}}function U(g,D){return ne(g.type,D,g.props)}function be(g){return typeof g=="object"&&g!==null&&g.$$typeof===r}function we(g){var D={"=":"=0",":":"=2"};return"$"+g.replace(/[=:]/g,function(ae){return D[ae]})}var Oe=/\/+/g;function qe(g,D){return typeof g=="object"&&g!==null&&g.key!=null?we(""+g.key):D.toString(36)}function Ge(g){switch(g.status){case"fulfilled":return g.value;case"rejected":throw g.reason;default:switch(typeof g.status=="string"?g.then(L,L):(g.status="pending",g.then(function(D){g.status==="pending"&&(g.status="fulfilled",g.value=D)},function(D){g.status==="pending"&&(g.status="rejected",g.reason=D)})),g.status){case"fulfilled":return g.value;case"rejected":throw g.reason}}throw g}function E(g,D,ae,xe,ce){var ze=typeof g;(ze==="undefined"||ze==="boolean")&&(g=null);var Ve=!1;if(g===null)Ve=!0;else switch(ze){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(g.$$typeof){case r:case u:Ve=!0;break;case b:return Ve=g._init,E(Ve(g._payload),D,ae,xe,ce)}}if(Ve)return ce=ce(g),Ve=xe===""?"."+qe(g,0):xe,je(ce)?(ae="",Ve!=null&&(ae=Ve.replace(Oe,"$&/")+"/"),E(ce,D,ae,"",function(_t){return _t})):ce!=null&&(be(ce)&&(ce=U(ce,ae+(ce.key==null||g&&g.key===ce.key?"":(""+ce.key).replace(Oe,"$&/")+"/")+Ve)),D.push(ce)),1;Ve=0;var gt=xe===""?".":xe+":";if(je(g))for(var rt=0;rt<g.length;rt++)xe=g[rt],ze=gt+qe(xe,rt),Ve+=E(xe,D,ae,ze,ce);else if(rt=z(g),typeof rt=="function")for(g=rt.call(g),rt=0;!(xe=g.next()).done;)xe=xe.value,ze=gt+qe(xe,rt++),Ve+=E(xe,D,ae,ze,ce);else if(ze==="object"){if(typeof g.then=="function")return E(Ge(g),D,ae,xe,ce);throw D=String(g),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function le(g,D,ae){if(g==null)return g;var xe=[],ce=0;return E(g,xe,"","",function(ze){return D.call(ae,ze,ce++)}),xe}function se(g){if(g._status===-1){var D=g._result;D=D(),D.then(function(ae){(g._status===0||g._status===-1)&&(g._status=1,g._result=ae)},function(ae){(g._status===0||g._status===-1)&&(g._status=2,g._result=ae)}),g._status===-1&&(g._status=0,g._result=D)}if(g._status===1)return g._result.default;throw g._result}var Ee=typeof reportError=="function"?reportError:function(g){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof g=="object"&&g!==null&&typeof g.message=="string"?String(g.message):String(g),error:g});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",g);return}console.error(g)},ye={map:le,forEach:function(g,D,ae){le(g,function(){D.apply(this,arguments)},ae)},count:function(g){var D=0;return le(g,function(){D++}),D},toArray:function(g){return le(g,function(D){return D})||[]},only:function(g){if(!be(g))throw Error("React.Children.only expected to receive a single React element child.");return g}};return Ke.Activity=j,Ke.Children=ye,Ke.Component=he,Ke.Fragment=f,Ke.Profiler=m,Ke.PureComponent=ue,Ke.StrictMode=o,Ke.Suspense=S,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(g){return B.H.useMemoCache(g)}},Ke.cache=function(g){return function(){return g.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(g,D,ae){if(g==null)throw Error("The argument must be a React element, but you passed "+g+".");var xe=F({},g.props),ce=g.key;if(D!=null)for(ze in D.key!==void 0&&(ce=""+D.key),D)!_.call(D,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&D.ref===void 0||(xe[ze]=D[ze]);var ze=arguments.length-2;if(ze===1)xe.children=ae;else if(1<ze){for(var Ve=Array(ze),gt=0;gt<ze;gt++)Ve[gt]=arguments[gt+2];xe.children=Ve}return ne(g.type,ce,xe)},Ke.createContext=function(g){return g={$$typeof:k,_currentValue:g,_currentValue2:g,_threadCount:0,Provider:null,Consumer:null},g.Provider=g,g.Consumer={$$typeof:v,_context:g},g},Ke.createElement=function(g,D,ae){var xe,ce={},ze=null;if(D!=null)for(xe in D.key!==void 0&&(ze=""+D.key),D)_.call(D,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(ce[xe]=D[xe]);var Ve=arguments.length-2;if(Ve===1)ce.children=ae;else if(1<Ve){for(var gt=Array(Ve),rt=0;rt<Ve;rt++)gt[rt]=arguments[rt+2];ce.children=gt}if(g&&g.defaultProps)for(xe in Ve=g.defaultProps,Ve)ce[xe]===void 0&&(ce[xe]=Ve[xe]);return ne(g,ze,ce)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(g){return{$$typeof:T,render:g}},Ke.isValidElement=be,Ke.lazy=function(g){return{$$typeof:b,_payload:{_status:-1,_result:g},_init:se}},Ke.memo=function(g,D){return{$$typeof:x,type:g,compare:D===void 0?null:D}},Ke.startTransition=function(g){var D=B.T,ae={};B.T=ae;try{var xe=g(),ce=B.S;ce!==null&&ce(ae,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then(L,Ee)}catch(ze){Ee(ze)}finally{D!==null&&ae.types!==null&&(D.types=ae.types),B.T=D}},Ke.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Ke.use=function(g){return B.H.use(g)},Ke.useActionState=function(g,D,ae){return B.H.useActionState(g,D,ae)},Ke.useCallback=function(g,D){return B.H.useCallback(g,D)},Ke.useContext=function(g){return B.H.useContext(g)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(g,D){return B.H.useDeferredValue(g,D)},Ke.useEffect=function(g,D){return B.H.useEffect(g,D)},Ke.useEffectEvent=function(g){return B.H.useEffectEvent(g)},Ke.useId=function(){return B.H.useId()},Ke.useImperativeHandle=function(g,D,ae){return B.H.useImperativeHandle(g,D,ae)},Ke.useInsertionEffect=function(g,D){return B.H.useInsertionEffect(g,D)},Ke.useLayoutEffect=function(g,D){return B.H.useLayoutEffect(g,D)},Ke.useMemo=function(g,D){return B.H.useMemo(g,D)},Ke.useOptimistic=function(g,D){return B.H.useOptimistic(g,D)},Ke.useReducer=function(g,D,ae){return B.H.useReducer(g,D,ae)},Ke.useRef=function(g){return B.H.useRef(g)},Ke.useState=function(g){return B.H.useState(g)},Ke.useSyncExternalStore=function(g,D,ae){return B.H.useSyncExternalStore(g,D,ae)},Ke.useTransition=function(){return B.H.useTransition()},Ke.version="19.2.0",Ke}var m0;function Lo(){return m0||(m0=1,So.exports=dx()),So.exports}var y=Lo();const js=L0(y);var wo={exports:{}},ui={},Co={exports:{}},Mo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0;function fx(){return x0||(x0=1,(function(r){function u(E,le){var se=E.length;E.push(le);e:for(;0<se;){var Ee=se-1>>>1,ye=E[Ee];if(0<m(ye,le))E[Ee]=le,E[se]=ye,se=Ee;else break e}}function f(E){return E.length===0?null:E[0]}function o(E){if(E.length===0)return null;var le=E[0],se=E.pop();if(se!==le){E[0]=se;e:for(var Ee=0,ye=E.length,g=ye>>>1;Ee<g;){var D=2*(Ee+1)-1,ae=E[D],xe=D+1,ce=E[xe];if(0>m(ae,se))xe<ye&&0>m(ce,ae)?(E[Ee]=ce,E[xe]=se,Ee=xe):(E[Ee]=ae,E[D]=se,Ee=D);else if(xe<ye&&0>m(ce,se))E[Ee]=ce,E[xe]=se,Ee=xe;else break e}}return le}function m(E,le){var se=E.sortIndex-le.sortIndex;return se!==0?se:E.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var v=performance;r.unstable_now=function(){return v.now()}}else{var k=Date,T=k.now();r.unstable_now=function(){return k.now()-T}}var S=[],x=[],b=1,j=null,M=3,z=!1,Y=!1,F=!1,K=!1,he=typeof setTimeout=="function"?setTimeout:null,Ne=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function re(E){for(var le=f(x);le!==null;){if(le.callback===null)o(x);else if(le.startTime<=E)o(x),le.sortIndex=le.expirationTime,u(S,le);else break;le=f(x)}}function je(E){if(F=!1,re(E),!Y)if(f(S)!==null)Y=!0,L||(L=!0,we());else{var le=f(x);le!==null&&Ge(je,le.startTime-E)}}var L=!1,B=-1,_=5,ne=-1;function U(){return K?!0:!(r.unstable_now()-ne<_)}function be(){if(K=!1,L){var E=r.unstable_now();ne=E;var le=!0;try{e:{Y=!1,F&&(F=!1,Ne(B),B=-1),z=!0;var se=M;try{t:{for(re(E),j=f(S);j!==null&&!(j.expirationTime>E&&U());){var Ee=j.callback;if(typeof Ee=="function"){j.callback=null,M=j.priorityLevel;var ye=Ee(j.expirationTime<=E);if(E=r.unstable_now(),typeof ye=="function"){j.callback=ye,re(E),le=!0;break t}j===f(S)&&o(S),re(E)}else o(S);j=f(S)}if(j!==null)le=!0;else{var g=f(x);g!==null&&Ge(je,g.startTime-E),le=!1}}break e}finally{j=null,M=se,z=!1}le=void 0}}finally{le?we():L=!1}}}var we;if(typeof ue=="function")we=function(){ue(be)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,qe=Oe.port2;Oe.port1.onmessage=be,we=function(){qe.postMessage(null)}}else we=function(){he(be,0)};function Ge(E,le){B=he(function(){E(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(E){E.callback=null},r.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<E?Math.floor(1e3/E):5},r.unstable_getCurrentPriorityLevel=function(){return M},r.unstable_next=function(E){switch(M){case 1:case 2:case 3:var le=3;break;default:le=M}var se=M;M=le;try{return E()}finally{M=se}},r.unstable_requestPaint=function(){K=!0},r.unstable_runWithPriority=function(E,le){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var se=M;M=E;try{return le()}finally{M=se}},r.unstable_scheduleCallback=function(E,le,se){var Ee=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ee+se:Ee):se=Ee,E){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=se+ye,E={id:b++,callback:le,priorityLevel:E,startTime:se,expirationTime:ye,sortIndex:-1},se>Ee?(E.sortIndex=se,u(x,E),f(S)===null&&E===f(x)&&(F?(Ne(B),B=-1):F=!0,Ge(je,se-Ee))):(E.sortIndex=ye,u(S,E),Y||z||(Y=!0,L||(L=!0,we()))),E},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(E){var le=M;return function(){var se=M;M=le;try{return E.apply(this,arguments)}finally{M=se}}}})(Mo)),Mo}var g0;function hx(){return g0||(g0=1,Co.exports=fx()),Co.exports}var Ao={exports:{}},ja={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function mx(){if(y0)return ja;y0=1;var r=Lo();function u(S){var x="https://react.dev/errors/"+S;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)x+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+S+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(){}var o={d:{f,r:function(){throw Error(u(522))},D:f,C:f,L:f,m:f,X:f,S:f,M:f},p:0,findDOMNode:null},m=Symbol.for("react.portal");function v(S,x,b){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:j==null?null:""+j,children:S,containerInfo:x,implementation:b}}var k=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(S,x){if(S==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return ja.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,ja.createPortal=function(S,x){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(u(299));return v(S,x,null,b)},ja.flushSync=function(S){var x=k.T,b=o.p;try{if(k.T=null,o.p=2,S)return S()}finally{k.T=x,o.p=b,o.d.f()}},ja.preconnect=function(S,x){typeof S=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,o.d.C(S,x))},ja.prefetchDNS=function(S){typeof S=="string"&&o.d.D(S)},ja.preinit=function(S,x){if(typeof S=="string"&&x&&typeof x.as=="string"){var b=x.as,j=T(b,x.crossOrigin),M=typeof x.integrity=="string"?x.integrity:void 0,z=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;b==="style"?o.d.S(S,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:j,integrity:M,fetchPriority:z}):b==="script"&&o.d.X(S,{crossOrigin:j,integrity:M,fetchPriority:z,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},ja.preinitModule=function(S,x){if(typeof S=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var b=T(x.as,x.crossOrigin);o.d.M(S,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&o.d.M(S)},ja.preload=function(S,x){if(typeof S=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var b=x.as,j=T(b,x.crossOrigin);o.d.L(S,b,{crossOrigin:j,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},ja.preloadModule=function(S,x){if(typeof S=="string")if(x){var b=T(x.as,x.crossOrigin);o.d.m(S,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else o.d.m(S)},ja.requestFormReset=function(S){o.d.r(S)},ja.unstable_batchedUpdates=function(S,x){return S(x)},ja.useFormState=function(S,x,b){return k.H.useFormState(S,x,b)},ja.useFormStatus=function(){return k.H.useHostTransitionStatus()},ja.version="19.2.0",ja}var p0;function xx(){if(p0)return Ao.exports;p0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(u){console.error(u)}}return r(),Ao.exports=mx(),Ao.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function gx(){if(v0)return ui;v0=1;var r=hx(),u=Lo(),f=xx();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function v(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function k(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function T(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function S(e){if(v(e)!==e)throw Error(o(188))}function x(e){var t=e.alternate;if(!t){if(t=v(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,l=t;;){var s=a.return;if(s===null)break;var i=s.alternate;if(i===null){if(l=s.return,l!==null){a=l;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===a)return S(s),e;if(i===l)return S(s),t;i=i.sibling}throw Error(o(188))}if(a.return!==l.return)a=s,l=i;else{for(var c=!1,d=s.child;d;){if(d===a){c=!0,a=s,l=i;break}if(d===l){c=!0,l=s,a=i;break}d=d.sibling}if(!c){for(d=i.child;d;){if(d===a){c=!0,a=i,l=s;break}if(d===l){c=!0,l=i,a=s;break}d=d.sibling}if(!c)throw Error(o(189))}}if(a.alternate!==l)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var j=Object.assign,M=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),Ne=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function we(e){return e===null||typeof e!="object"?null:(e=be&&e[be]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Symbol.for("react.client.reference");function qe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Oe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case he:return"Profiler";case K:return"StrictMode";case je:return"Suspense";case L:return"SuspenseList";case ne:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Y:return"Portal";case ue:return e.displayName||"Context";case Ne:return(e._context.displayName||"Context")+".Consumer";case re:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return t=e.displayName||null,t!==null?t:qe(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return qe(e(t))}catch{}}return null}var Ge=Array.isArray,E=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=f.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Ee=[],ye=-1;function g(e){return{current:e}}function D(e){0>ye||(e.current=Ee[ye],Ee[ye]=null,ye--)}function ae(e,t){ye++,Ee[ye]=e.current,e.current=t}var xe=g(null),ce=g(null),ze=g(null),Ve=g(null);function gt(e,t){switch(ae(ze,t),ae(ce,e),ae(xe,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Of(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Of(t),e=_f(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}D(xe),ae(xe,e)}function rt(){D(xe),D(ce),D(ze)}function _t(e){e.memoizedState!==null&&ae(Ve,e);var t=xe.current,a=_f(t,e.type);t!==a&&(ae(ce,e),ae(xe,a))}function ca(e){ce.current===e&&(D(xe),D(ce)),Ve.current===e&&(D(Ve),si._currentValue=se)}var Qt,Kt;function Pt(e){if(Qt===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Qt=t&&t[1]||"",Kt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qt+e+Kt}var Oa=!1;function ll(e,t){if(!e||Oa)return"";Oa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var P=function(){throw Error()};if(Object.defineProperty(P.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(P,[])}catch(q){var H=q}Reflect.construct(e,[],P)}else{try{P.call()}catch(q){H=q}e.call(P.prototype)}}else{try{throw Error()}catch(q){H=q}(P=e())&&typeof P.catch=="function"&&P.catch(function(){})}}catch(q){if(q&&H&&typeof q.stack=="string")return[q.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=l.DetermineComponentFrameRoot(),c=i[0],d=i[1];if(c&&d){var p=c.split(`
`),O=d.split(`
`);for(s=l=0;l<p.length&&!p[l].includes("DetermineComponentFrameRoot");)l++;for(;s<O.length&&!O[s].includes("DetermineComponentFrameRoot");)s++;if(l===p.length||s===O.length)for(l=p.length-1,s=O.length-1;1<=l&&0<=s&&p[l]!==O[s];)s--;for(;1<=l&&0<=s;l--,s--)if(p[l]!==O[s]){if(l!==1||s!==1)do if(l--,s--,0>s||p[l]!==O[s]){var Z=`
`+p[l].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=l&&0<=s);break}}}finally{Oa=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Pt(a):""}function vn(e,t){switch(e.tag){case 26:case 27:case 5:return Pt(e.type);case 16:return Pt("Lazy");case 13:return e.child!==t&&t!==null?Pt("Suspense Fallback"):Pt("Suspense");case 19:return Pt("SuspenseList");case 0:case 15:return ll(e.type,!1);case 11:return ll(e.type.render,!1);case 1:return ll(e.type,!0);case 31:return Pt("Activity");default:return""}}function ya(e){try{var t="",a=null;do t+=vn(e,a),a=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Qa=Object.prototype.hasOwnProperty,nl=r.unstable_scheduleCallback,hl=r.unstable_cancelCallback,_a=r.unstable_shouldYield,Ma=r.unstable_requestPaint,jt=r.unstable_now,wl=r.unstable_getCurrentPriorityLevel,ml=r.unstable_ImmediatePriority,ua=r.unstable_UserBlockingPriority,Ka=r.unstable_NormalPriority,Xl=r.unstable_LowPriority,da=r.unstable_IdlePriority,sl=r.log,Gl=r.unstable_setDisableYieldValue,Ja=null,Tt=null;function pa(e){if(typeof sl=="function"&&Gl(e),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(Ja,e)}catch{}}var ht=Math.clz32?Math.clz32:xl,il=Math.log,ka=Math.LN2;function xl(e){return e>>>=0,e===0?32:31-(il(e)/ka|0)|0}var ra=256,Cl=262144,ea=4194304;function Yt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function va(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var s=0,i=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var d=l&134217727;return d!==0?(l=d&~i,l!==0?s=Yt(l):(c&=d,c!==0?s=Yt(c):a||(a=d&~e,a!==0&&(s=Yt(a))))):(d=l&~i,d!==0?s=Yt(d):c!==0?s=Yt(c):a||(a=l&~e,a!==0&&(s=Yt(a)))),s===0?0:t!==0&&t!==s&&(t&i)===0&&(i=s&-s,a=t&-t,i>=a||i===32&&(a&4194048)!==0)?t:s}function qt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Zl(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ua(){var e=ea;return ea<<=1,(ea&62914560)===0&&(ea=4194304),e}function gl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Aa(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ql(e,t,a,l,s,i){var c=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var d=e.entanglements,p=e.expirationTimes,O=e.hiddenUpdates;for(a=c&~a;0<a;){var Z=31-ht(a),P=1<<Z;d[Z]=0,p[Z]=-1;var H=O[Z];if(H!==null)for(O[Z]=null,Z=0;Z<H.length;Z++){var q=H[Z];q!==null&&(q.lane&=-536870913)}a&=~P}l!==0&&ba(e,l,0),i!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=i&~(c&~t))}function ba(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-ht(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function cl(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-ht(a),s=1<<l;s&t|e[l]&t&&(e[l]|=t),a&=~s}}function ta(e,t){var a=t&-t;return a=(a&42)!==0?1:Kl(a),(a&(e.suspendedLanes|t))!==0?0:a}function Kl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function aa(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function bn(){var e=le.p;return e!==0?e:(e=window.event,e===void 0?32:n0(e.type))}function Ta(e,t){var a=le.p;try{return le.p=e,t()}finally{le.p=a}}var Ha=Math.random().toString(36).slice(2),kt="__reactFiber$"+Ha,Jt="__reactProps$"+Ha,Sa="__reactContainer$"+Ha,Jl="__reactEvents$"+Ha,jn="__reactListeners$"+Ha,Nn="__reactHandles$"+Ha,V="__reactResources$"+Ha,G="__reactMarker$"+Ha;function C(e){delete e[kt],delete e[Jt],delete e[Jl],delete e[jn],delete e[Nn]}function Q(e){var t=e[kt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Sa]||a[kt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Vf(e);e!==null;){if(a=e[kt])return a;e=Vf(e)}return t}e=a,a=e.parentNode}return null}function h(e){if(e=e[kt]||e[Sa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ee(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function me(e){var t=e[V];return t||(t=e[V]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function $(e){e[G]=!0}var pe=new Set,ie={};function ge(e,t){oe(e,t),oe(e+"Capture",t)}function oe(e,t){for(ie[e]=t,e=0;e<t.length;e++)pe.add(t[e])}var te=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),de={},Me={};function De(e){return Qa.call(Me,e)?!0:Qa.call(de,e)?!1:te.test(e)?Me[e]=!0:(de[e]=!0,!1)}function J(e,t,a){if(De(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function ve(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Xe(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}function Ye(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yt(e,t,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var s=l.get,i=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(c){a=""+c,i.call(this,c)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(c){a=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ie(e){if(!e._valueTracker){var t=$e(e)?"checked":"value";e._valueTracker=yt(e,t,""+e[t])}}function Nt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=$e(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function et(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ot=/[\n"\\]/g;function ct(e){return e.replace(ot,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function pt(e,t,a,l,s,i,c,d){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ye(t)):e.value!==""+Ye(t)&&(e.value=""+Ye(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?N(e,c,Ye(t)):a!=null?N(e,c,Ye(a)):l!=null&&e.removeAttribute("value"),s==null&&i!=null&&(e.defaultChecked=!!i),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.name=""+Ye(d):e.removeAttribute("name")}function zt(e,t,a,l,s,i,c,d){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||a!=null){if(!(i!=="submit"&&i!=="reset"||t!=null)){Ie(e);return}a=a!=null?""+Ye(a):"",t=t!=null?""+Ye(t):a,d||t===e.value||(e.value=t),e.defaultValue=t}l=l??s,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=d?e.checked:!!l,e.defaultChecked=!!l,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c),Ie(e)}function N(e,t,a){t==="number"&&et(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function X(e,t,a,l){if(e=e.options,t){t={};for(var s=0;s<a.length;s++)t["$"+a[s]]=!0;for(a=0;a<e.length;a++)s=t.hasOwnProperty("$"+e[a].value),e[a].selected!==s&&(e[a].selected=s),s&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Ye(a),t=null,s=0;s<e.length;s++){if(e[s].value===a){e[s].selected=!0,l&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function I(e,t,a){if(t!=null&&(t=""+Ye(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ye(a):""}function fe(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(o(92));if(Ge(l)){if(1<l.length)throw Error(o(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=Ye(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Ie(e)}function Ae(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var ke=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Se(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||ke.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Be(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var s in t)l=t[s],t.hasOwnProperty(s)&&a[s]!==l&&Se(e,s,l)}else for(var i in t)t.hasOwnProperty(i)&&Se(e,i,t[i])}function tt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ce=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ze=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qe(e){return Ze.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function _e(){}var Je=null;function Pe(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Le=null,mt=null;function ut(e){var t=h(e);if(t&&(e=t.stateNode)){var a=e[Jt]||null;e:switch(e=t.stateNode,t.type){case"input":if(pt(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ct(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var s=l[Jt]||null;if(!s)throw Error(o(90));pt(l,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&Nt(l)}break e;case"textarea":I(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&X(e,!!a.multiple,t,!1)}}}var At=!1;function la(e,t,a){if(At)return e(t,a);At=!0;try{var l=e(t);return l}finally{if(At=!1,(Le!==null||mt!==null)&&($i(),Le&&(t=Le,e=mt,mt=Le=null,ut(t),e)))for(t=0;t<e.length;t++)ut(e[t])}}function Lt(e,t){var a=e.stateNode;if(a===null)return null;var l=a[Jt]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xt=!1;if(Vt)try{var na={};Object.defineProperty(na,"passive",{get:function(){Xt=!0}}),window.addEventListener("test",na,na),window.removeEventListener("test",na,na)}catch{Xt=!1}var Rt=null,yl=null,rl=null;function Sn(){if(rl)return rl;var e,t=yl,a=t.length,l,s="value"in Rt?Rt.value:Rt.textContent,i=s.length;for(e=0;e<a&&t[e]===s[e];e++);var c=a-e;for(l=1;l<=c&&t[a-l]===s[i-l];l++);return rl=s.slice(e,1<l?1-l:void 0)}function wn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cn(){return!0}function Ns(){return!1}function fa(e){function t(a,l,s,i,c){this._reactName=a,this._targetInst=s,this.type=l,this.nativeEvent=i,this.target=c,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(a=e[d],this[d]=a?a(i):i[d]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cn:Ns,this.isPropagationStopped=Ns,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Cn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Cn)},persist:function(){},isPersistent:Cn}),t}var Ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Al=fa(Ml),pl=j({},Ml,{view:0,detail:0}),wc=fa(pl),Ss,ws,Cs,hi=j({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cs&&(Cs&&e.type==="mousemove"?(Ss=e.screenX-Cs.screenX,ws=e.screenY-Cs.screenY):ws=Ss=0,Cs=e),Ss)},movementY:function(e){return"movementY"in e?e.movementY:ws}}),ko=fa(hi),rh=j({},hi,{dataTransfer:0}),oh=fa(rh),uh=j({},pl,{relatedTarget:0}),Cc=fa(uh),dh=j({},Ml,{animationName:0,elapsedTime:0,pseudoElement:0}),fh=fa(dh),hh=j({},Ml,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mh=fa(hh),xh=j({},Ml,{data:0}),Uo=fa(xh),gh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ph={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ph[e])?!!t[e]:!1}function Mc(){return vh}var bh=j({},pl,{key:function(e){if(e.key){var t=gh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mc,charCode:function(e){return e.type==="keypress"?wn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jh=fa(bh),Nh=j({},hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ho=fa(Nh),Sh=j({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mc}),wh=fa(Sh),Ch=j({},Ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mh=fa(Ch),Ah=j({},hi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Th=fa(Ah),Eh=j({},Ml,{newState:0,oldState:0}),Dh=fa(Eh),zh=[9,13,27,32],Ac=Vt&&"CompositionEvent"in window,Ms=null;Vt&&"documentMode"in document&&(Ms=document.documentMode);var Lh=Vt&&"TextEvent"in window&&!Ms,Bo=Vt&&(!Ac||Ms&&8<Ms&&11>=Ms),Yo=" ",qo=!1;function Vo(e,t){switch(e){case"keyup":return zh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gn=!1;function Rh(e,t){switch(e){case"compositionend":return Xo(t);case"keypress":return t.which!==32?null:(qo=!0,Yo);case"textInput":return e=t.data,e===Yo&&qo?null:e;default:return null}}function Oh(e,t){if(Gn)return e==="compositionend"||!Ac&&Vo(e,t)?(e=Sn(),rl=yl=Rt=null,Gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bo&&t.locale!=="ko"?null:t.data;default:return null}}var _h={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Go(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_h[e.type]:t==="textarea"}function Zo(e,t,a,l){Le?mt?mt.push(l):mt=[l]:Le=l,t=ac(t,"onChange"),0<t.length&&(a=new Al("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var As=null,Ts=null;function kh(e){Tf(e,0)}function mi(e){var t=ee(e);if(Nt(t))return e}function Qo(e,t){if(e==="change")return t}var Ko=!1;if(Vt){var Tc;if(Vt){var Ec="oninput"in document;if(!Ec){var Jo=document.createElement("div");Jo.setAttribute("oninput","return;"),Ec=typeof Jo.oninput=="function"}Tc=Ec}else Tc=!1;Ko=Tc&&(!document.documentMode||9<document.documentMode)}function $o(){As&&(As.detachEvent("onpropertychange",Wo),Ts=As=null)}function Wo(e){if(e.propertyName==="value"&&mi(Ts)){var t=[];Zo(t,Ts,e,Pe(e)),la(kh,t)}}function Uh(e,t,a){e==="focusin"?($o(),As=t,Ts=a,As.attachEvent("onpropertychange",Wo)):e==="focusout"&&$o()}function Hh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mi(Ts)}function Bh(e,t){if(e==="click")return mi(t)}function Yh(e,t){if(e==="input"||e==="change")return mi(t)}function qh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ba=typeof Object.is=="function"?Object.is:qh;function Es(e,t){if(Ba(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var s=a[l];if(!Qa.call(t,s)||!Ba(e[s],t[s]))return!1}return!0}function Fo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Io(e,t){var a=Fo(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fo(a)}}function Po(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Po(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=et(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=et(e.document)}return t}function Dc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Vh=Vt&&"documentMode"in document&&11>=document.documentMode,Zn=null,zc=null,Ds=null,Lc=!1;function tu(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Lc||Zn==null||Zn!==et(l)||(l=Zn,"selectionStart"in l&&Dc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ds&&Es(Ds,l)||(Ds=l,l=ac(zc,"onSelect"),0<l.length&&(t=new Al("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=Zn)))}function Mn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Qn={animationend:Mn("Animation","AnimationEnd"),animationiteration:Mn("Animation","AnimationIteration"),animationstart:Mn("Animation","AnimationStart"),transitionrun:Mn("Transition","TransitionRun"),transitionstart:Mn("Transition","TransitionStart"),transitioncancel:Mn("Transition","TransitionCancel"),transitionend:Mn("Transition","TransitionEnd")},Rc={},au={};Vt&&(au=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function An(e){if(Rc[e])return Rc[e];if(!Qn[e])return e;var t=Qn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in au)return Rc[e]=t[a];return e}var lu=An("animationend"),nu=An("animationiteration"),su=An("animationstart"),Xh=An("transitionrun"),Gh=An("transitionstart"),Zh=An("transitioncancel"),iu=An("transitionend"),cu=new Map,Oc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oc.push("scrollEnd");function ol(e,t){cu.set(e,t),ge(t,[e])}var xi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},$a=[],Kn=0,_c=0;function gi(){for(var e=Kn,t=_c=Kn=0;t<e;){var a=$a[t];$a[t++]=null;var l=$a[t];$a[t++]=null;var s=$a[t];$a[t++]=null;var i=$a[t];if($a[t++]=null,l!==null&&s!==null){var c=l.pending;c===null?s.next=s:(s.next=c.next,c.next=s),l.pending=s}i!==0&&ru(a,s,i)}}function yi(e,t,a,l){$a[Kn++]=e,$a[Kn++]=t,$a[Kn++]=a,$a[Kn++]=l,_c|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function kc(e,t,a,l){return yi(e,t,a,l),pi(e)}function Tn(e,t){return yi(e,null,null,t),pi(e)}function ru(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var s=!1,i=e.return;i!==null;)i.childLanes|=a,l=i.alternate,l!==null&&(l.childLanes|=a),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(s=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,s&&t!==null&&(s=31-ht(a),e=i.hiddenUpdates,l=e[s],l===null?e[s]=[t]:l.push(t),t.lane=a|536870912),i):null}function pi(e){if(50<Is)throw Is=0,Zr=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Jn={};function Qh(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ya(e,t,a,l){return new Qh(e,t,a,l)}function Uc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tl(e,t){var a=e.alternate;return a===null?(a=Ya(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ou(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function vi(e,t,a,l,s,i){var c=0;if(l=e,typeof e=="function")Uc(e)&&(c=1);else if(typeof e=="string")c=Fm(e,a,xe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ne:return e=Ya(31,a,t,s),e.elementType=ne,e.lanes=i,e;case F:return En(a.children,s,i,t);case K:c=8,s|=24;break;case he:return e=Ya(12,a,t,s|2),e.elementType=he,e.lanes=i,e;case je:return e=Ya(13,a,t,s),e.elementType=je,e.lanes=i,e;case L:return e=Ya(19,a,t,s),e.elementType=L,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ue:c=10;break e;case Ne:c=9;break e;case re:c=11;break e;case B:c=14;break e;case _:c=16,l=null;break e}c=29,a=Error(o(130,e===null?"null":typeof e,"")),l=null}return t=Ya(c,a,t,s),t.elementType=e,t.type=l,t.lanes=i,t}function En(e,t,a,l){return e=Ya(7,e,l,t),e.lanes=a,e}function Hc(e,t,a){return e=Ya(6,e,null,t),e.lanes=a,e}function uu(e){var t=Ya(18,null,null,0);return t.stateNode=e,t}function Bc(e,t,a){return t=Ya(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var du=new WeakMap;function Wa(e,t){if(typeof e=="object"&&e!==null){var a=du.get(e);return a!==void 0?a:(t={value:e,source:t,stack:ya(t)},du.set(e,t),t)}return{value:e,source:t,stack:ya(t)}}var $n=[],Wn=0,bi=null,zs=0,Fa=[],Ia=0,$l=null,vl=1,bl="";function El(e,t){$n[Wn++]=zs,$n[Wn++]=bi,bi=e,zs=t}function fu(e,t,a){Fa[Ia++]=vl,Fa[Ia++]=bl,Fa[Ia++]=$l,$l=e;var l=vl;e=bl;var s=32-ht(l)-1;l&=~(1<<s),a+=1;var i=32-ht(t)+s;if(30<i){var c=s-s%5;i=(l&(1<<c)-1).toString(32),l>>=c,s-=c,vl=1<<32-ht(t)+s|a<<s|l,bl=i+e}else vl=1<<i|a<<s|l,bl=e}function Yc(e){e.return!==null&&(El(e,1),fu(e,1,0))}function qc(e){for(;e===bi;)bi=$n[--Wn],$n[Wn]=null,zs=$n[--Wn],$n[Wn]=null;for(;e===$l;)$l=Fa[--Ia],Fa[Ia]=null,bl=Fa[--Ia],Fa[Ia]=null,vl=Fa[--Ia],Fa[Ia]=null}function hu(e,t){Fa[Ia++]=vl,Fa[Ia++]=bl,Fa[Ia++]=$l,vl=t.id,bl=t.overflow,$l=e}var ha=null,Et=null,it=!1,Wl=null,Pa=!1,Vc=Error(o(519));function Fl(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ls(Wa(t,e)),Vc}function mu(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[kt]=e,t[Jt]=l,a){case"dialog":lt("cancel",t),lt("close",t);break;case"iframe":case"object":case"embed":lt("load",t);break;case"video":case"audio":for(a=0;a<ei.length;a++)lt(ei[a],t);break;case"source":lt("error",t);break;case"img":case"image":case"link":lt("error",t),lt("load",t);break;case"details":lt("toggle",t);break;case"input":lt("invalid",t),zt(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":lt("invalid",t);break;case"textarea":lt("invalid",t),fe(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||Lf(t.textContent,a)?(l.popover!=null&&(lt("beforetoggle",t),lt("toggle",t)),l.onScroll!=null&&lt("scroll",t),l.onScrollEnd!=null&&lt("scrollend",t),l.onClick!=null&&(t.onclick=_e),t=!0):t=!1,t||Fl(e,!0)}function xu(e){for(ha=e.return;ha;)switch(ha.tag){case 5:case 31:case 13:Pa=!1;return;case 27:case 3:Pa=!0;return;default:ha=ha.return}}function Fn(e){if(e!==ha)return!1;if(!it)return xu(e),it=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||io(e.type,e.memoizedProps)),a=!a),a&&Et&&Fl(e),xu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Et=qf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Et=qf(e)}else t===27?(t=Et,fn(e.type)?(e=fo,fo=null,Et=e):Et=t):Et=ha?tl(e.stateNode.nextSibling):null;return!0}function Dn(){Et=ha=null,it=!1}function Xc(){var e=Wl;return e!==null&&(La===null?La=e:La.push.apply(La,e),Wl=null),e}function Ls(e){Wl===null?Wl=[e]:Wl.push(e)}var Gc=g(null),zn=null,Dl=null;function Il(e,t,a){ae(Gc,t._currentValue),t._currentValue=a}function zl(e){e._currentValue=Gc.current,D(Gc)}function Zc(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function Qc(e,t,a,l){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var i=s.dependencies;if(i!==null){var c=s.child;i=i.firstContext;e:for(;i!==null;){var d=i;i=s;for(var p=0;p<t.length;p++)if(d.context===t[p]){i.lanes|=a,d=i.alternate,d!==null&&(d.lanes|=a),Zc(i.return,a,e),l||(c=null);break e}i=d.next}}else if(s.tag===18){if(c=s.return,c===null)throw Error(o(341));c.lanes|=a,i=c.alternate,i!==null&&(i.lanes|=a),Zc(c,a,e),c=null}else c=s.child;if(c!==null)c.return=s;else for(c=s;c!==null;){if(c===e){c=null;break}if(s=c.sibling,s!==null){s.return=c.return,c=s;break}c=c.return}s=c}}function In(e,t,a,l){e=null;for(var s=t,i=!1;s!==null;){if(!i){if((s.flags&524288)!==0)i=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var c=s.alternate;if(c===null)throw Error(o(387));if(c=c.memoizedProps,c!==null){var d=s.type;Ba(s.pendingProps.value,c.value)||(e!==null?e.push(d):e=[d])}}else if(s===Ve.current){if(c=s.alternate,c===null)throw Error(o(387));c.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(si):e=[si])}s=s.return}e!==null&&Qc(t,e,a,l),t.flags|=262144}function ji(e){for(e=e.firstContext;e!==null;){if(!Ba(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ln(e){zn=e,Dl=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ma(e){return gu(zn,e)}function Ni(e,t){return zn===null&&Ln(e),gu(e,t)}function gu(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Dl===null){if(e===null)throw Error(o(308));Dl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Dl=Dl.next=t;return a}var Kh=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Jh=r.unstable_scheduleCallback,$h=r.unstable_NormalPriority,$t={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kc(){return{controller:new Kh,data:new Map,refCount:0}}function Rs(e){e.refCount--,e.refCount===0&&Jh($h,function(){e.controller.abort()})}var Os=null,Jc=0,Pn=0,es=null;function Wh(e,t){if(Os===null){var a=Os=[];Jc=0,Pn=Fr(),es={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Jc++,t.then(yu,yu),t}function yu(){if(--Jc===0&&Os!==null){es!==null&&(es.status="fulfilled");var e=Os;Os=null,Pn=0,es=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Fh(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(s){a.push(s)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var s=0;s<a.length;s++)(0,a[s])(t)},function(s){for(l.status="rejected",l.reason=s,s=0;s<a.length;s++)(0,a[s])(void 0)}),l}var pu=E.S;E.S=function(e,t){tf=jt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Wh(e,t),pu!==null&&pu(e,t)};var Rn=g(null);function $c(){var e=Rn.current;return e!==null?e:Mt.pooledCache}function Si(e,t){t===null?ae(Rn,Rn.current):ae(Rn,t.pool)}function vu(){var e=$c();return e===null?null:{parent:$t._currentValue,pool:e}}var ts=Error(o(460)),Wc=Error(o(474)),wi=Error(o(542)),Ci={then:function(){}};function bu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ju(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(_e,_e),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Su(e),e;default:if(typeof t.status=="string")t.then(_e,_e);else{if(e=Mt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=l}},function(l){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Su(e),e}throw _n=t,ts}}function On(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(_n=a,ts):a}}var _n=null;function Nu(){if(_n===null)throw Error(o(459));var e=_n;return _n=null,e}function Su(e){if(e===ts||e===wi)throw Error(o(483))}var as=null,_s=0;function Mi(e){var t=_s;return _s+=1,as===null&&(as=[]),ju(as,e,t)}function ks(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ai(e,t){throw t.$$typeof===M?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function wu(e){function t(A,w){if(e){var R=A.deletions;R===null?(A.deletions=[w],A.flags|=16):R.push(w)}}function a(A,w){if(!e)return null;for(;w!==null;)t(A,w),w=w.sibling;return null}function l(A){for(var w=new Map;A!==null;)A.key!==null?w.set(A.key,A):w.set(A.index,A),A=A.sibling;return w}function s(A,w){return A=Tl(A,w),A.index=0,A.sibling=null,A}function i(A,w,R){return A.index=R,e?(R=A.alternate,R!==null?(R=R.index,R<w?(A.flags|=67108866,w):R):(A.flags|=67108866,w)):(A.flags|=1048576,w)}function c(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function d(A,w,R,W){return w===null||w.tag!==6?(w=Hc(R,A.mode,W),w.return=A,w):(w=s(w,R),w.return=A,w)}function p(A,w,R,W){var Ue=R.type;return Ue===F?Z(A,w,R.props.children,W,R.key):w!==null&&(w.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===_&&On(Ue)===w.type)?(w=s(w,R.props),ks(w,R),w.return=A,w):(w=vi(R.type,R.key,R.props,null,A.mode,W),ks(w,R),w.return=A,w)}function O(A,w,R,W){return w===null||w.tag!==4||w.stateNode.containerInfo!==R.containerInfo||w.stateNode.implementation!==R.implementation?(w=Bc(R,A.mode,W),w.return=A,w):(w=s(w,R.children||[]),w.return=A,w)}function Z(A,w,R,W,Ue){return w===null||w.tag!==7?(w=En(R,A.mode,W,Ue),w.return=A,w):(w=s(w,R),w.return=A,w)}function P(A,w,R){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=Hc(""+w,A.mode,R),w.return=A,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case z:return R=vi(w.type,w.key,w.props,null,A.mode,R),ks(R,w),R.return=A,R;case Y:return w=Bc(w,A.mode,R),w.return=A,w;case _:return w=On(w),P(A,w,R)}if(Ge(w)||we(w))return w=En(w,A.mode,R,null),w.return=A,w;if(typeof w.then=="function")return P(A,Mi(w),R);if(w.$$typeof===ue)return P(A,Ni(A,w),R);Ai(A,w)}return null}function H(A,w,R,W){var Ue=w!==null?w.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return Ue!==null?null:d(A,w,""+R,W);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case z:return R.key===Ue?p(A,w,R,W):null;case Y:return R.key===Ue?O(A,w,R,W):null;case _:return R=On(R),H(A,w,R,W)}if(Ge(R)||we(R))return Ue!==null?null:Z(A,w,R,W,null);if(typeof R.then=="function")return H(A,w,Mi(R),W);if(R.$$typeof===ue)return H(A,w,Ni(A,R),W);Ai(A,R)}return null}function q(A,w,R,W,Ue){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return A=A.get(R)||null,d(w,A,""+W,Ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case z:return A=A.get(W.key===null?R:W.key)||null,p(w,A,W,Ue);case Y:return A=A.get(W.key===null?R:W.key)||null,O(w,A,W,Ue);case _:return W=On(W),q(A,w,R,W,Ue)}if(Ge(W)||we(W))return A=A.get(R)||null,Z(w,A,W,Ue,null);if(typeof W.then=="function")return q(A,w,R,Mi(W),Ue);if(W.$$typeof===ue)return q(A,w,R,Ni(w,W),Ue);Ai(w,W)}return null}function Te(A,w,R,W){for(var Ue=null,dt=null,Re=w,Fe=w=0,st=null;Re!==null&&Fe<R.length;Fe++){Re.index>Fe?(st=Re,Re=null):st=Re.sibling;var ft=H(A,Re,R[Fe],W);if(ft===null){Re===null&&(Re=st);break}e&&Re&&ft.alternate===null&&t(A,Re),w=i(ft,w,Fe),dt===null?Ue=ft:dt.sibling=ft,dt=ft,Re=st}if(Fe===R.length)return a(A,Re),it&&El(A,Fe),Ue;if(Re===null){for(;Fe<R.length;Fe++)Re=P(A,R[Fe],W),Re!==null&&(w=i(Re,w,Fe),dt===null?Ue=Re:dt.sibling=Re,dt=Re);return it&&El(A,Fe),Ue}for(Re=l(Re);Fe<R.length;Fe++)st=q(Re,A,Fe,R[Fe],W),st!==null&&(e&&st.alternate!==null&&Re.delete(st.key===null?Fe:st.key),w=i(st,w,Fe),dt===null?Ue=st:dt.sibling=st,dt=st);return e&&Re.forEach(function(yn){return t(A,yn)}),it&&El(A,Fe),Ue}function He(A,w,R,W){if(R==null)throw Error(o(151));for(var Ue=null,dt=null,Re=w,Fe=w=0,st=null,ft=R.next();Re!==null&&!ft.done;Fe++,ft=R.next()){Re.index>Fe?(st=Re,Re=null):st=Re.sibling;var yn=H(A,Re,ft.value,W);if(yn===null){Re===null&&(Re=st);break}e&&Re&&yn.alternate===null&&t(A,Re),w=i(yn,w,Fe),dt===null?Ue=yn:dt.sibling=yn,dt=yn,Re=st}if(ft.done)return a(A,Re),it&&El(A,Fe),Ue;if(Re===null){for(;!ft.done;Fe++,ft=R.next())ft=P(A,ft.value,W),ft!==null&&(w=i(ft,w,Fe),dt===null?Ue=ft:dt.sibling=ft,dt=ft);return it&&El(A,Fe),Ue}for(Re=l(Re);!ft.done;Fe++,ft=R.next())ft=q(Re,A,Fe,ft.value,W),ft!==null&&(e&&ft.alternate!==null&&Re.delete(ft.key===null?Fe:ft.key),w=i(ft,w,Fe),dt===null?Ue=ft:dt.sibling=ft,dt=ft);return e&&Re.forEach(function(rx){return t(A,rx)}),it&&El(A,Fe),Ue}function Ct(A,w,R,W){if(typeof R=="object"&&R!==null&&R.type===F&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case z:e:{for(var Ue=R.key;w!==null;){if(w.key===Ue){if(Ue=R.type,Ue===F){if(w.tag===7){a(A,w.sibling),W=s(w,R.props.children),W.return=A,A=W;break e}}else if(w.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===_&&On(Ue)===w.type){a(A,w.sibling),W=s(w,R.props),ks(W,R),W.return=A,A=W;break e}a(A,w);break}else t(A,w);w=w.sibling}R.type===F?(W=En(R.props.children,A.mode,W,R.key),W.return=A,A=W):(W=vi(R.type,R.key,R.props,null,A.mode,W),ks(W,R),W.return=A,A=W)}return c(A);case Y:e:{for(Ue=R.key;w!==null;){if(w.key===Ue)if(w.tag===4&&w.stateNode.containerInfo===R.containerInfo&&w.stateNode.implementation===R.implementation){a(A,w.sibling),W=s(w,R.children||[]),W.return=A,A=W;break e}else{a(A,w);break}else t(A,w);w=w.sibling}W=Bc(R,A.mode,W),W.return=A,A=W}return c(A);case _:return R=On(R),Ct(A,w,R,W)}if(Ge(R))return Te(A,w,R,W);if(we(R)){if(Ue=we(R),typeof Ue!="function")throw Error(o(150));return R=Ue.call(R),He(A,w,R,W)}if(typeof R.then=="function")return Ct(A,w,Mi(R),W);if(R.$$typeof===ue)return Ct(A,w,Ni(A,R),W);Ai(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,w!==null&&w.tag===6?(a(A,w.sibling),W=s(w,R),W.return=A,A=W):(a(A,w),W=Hc(R,A.mode,W),W.return=A,A=W),c(A)):a(A,w)}return function(A,w,R,W){try{_s=0;var Ue=Ct(A,w,R,W);return as=null,Ue}catch(Re){if(Re===ts||Re===wi)throw Re;var dt=Ya(29,Re,null,A.mode);return dt.lanes=W,dt.return=A,dt}finally{}}}var kn=wu(!0),Cu=wu(!1),Pl=!1;function Fc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ic(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function en(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function tn(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(xt&2)!==0){var s=l.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),l.pending=t,t=pi(e),ru(e,null,a),t}return yi(e,l,t,a),pi(e)}function Us(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,cl(e,a)}}function Pc(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var s=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var c={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};i===null?s=i=c:i=i.next=c,a=a.next}while(a!==null);i===null?s=i=t:i=i.next=t}else s=i=t;a={baseState:l.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var er=!1;function Hs(){if(er){var e=es;if(e!==null)throw e}}function Bs(e,t,a,l){er=!1;var s=e.updateQueue;Pl=!1;var i=s.firstBaseUpdate,c=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var p=d,O=p.next;p.next=null,c===null?i=O:c.next=O,c=p;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,d=Z.lastBaseUpdate,d!==c&&(d===null?Z.firstBaseUpdate=O:d.next=O,Z.lastBaseUpdate=p))}if(i!==null){var P=s.baseState;c=0,Z=O=p=null,d=i;do{var H=d.lane&-536870913,q=H!==d.lane;if(q?(nt&H)===H:(l&H)===H){H!==0&&H===Pn&&(er=!0),Z!==null&&(Z=Z.next={lane:0,tag:d.tag,payload:d.payload,callback:null,next:null});e:{var Te=e,He=d;H=t;var Ct=a;switch(He.tag){case 1:if(Te=He.payload,typeof Te=="function"){P=Te.call(Ct,P,H);break e}P=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=He.payload,H=typeof Te=="function"?Te.call(Ct,P,H):Te,H==null)break e;P=j({},P,H);break e;case 2:Pl=!0}}H=d.callback,H!==null&&(e.flags|=64,q&&(e.flags|=8192),q=s.callbacks,q===null?s.callbacks=[H]:q.push(H))}else q={lane:H,tag:d.tag,payload:d.payload,callback:d.callback,next:null},Z===null?(O=Z=q,p=P):Z=Z.next=q,c|=H;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;q=d,d=q.next,q.next=null,s.lastBaseUpdate=q,s.shared.pending=null}}while(!0);Z===null&&(p=P),s.baseState=p,s.firstBaseUpdate=O,s.lastBaseUpdate=Z,i===null&&(s.shared.lanes=0),cn|=c,e.lanes=c,e.memoizedState=P}}function Mu(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Au(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Mu(a[e],t)}var ls=g(null),Ti=g(0);function Tu(e,t){e=Yl,ae(Ti,e),ae(ls,t),Yl=e|t.baseLanes}function tr(){ae(Ti,Yl),ae(ls,ls.current)}function ar(){Yl=Ti.current,D(ls),D(Ti)}var qa=g(null),el=null;function an(e){var t=e.alternate;ae(Gt,Gt.current&1),ae(qa,e),el===null&&(t===null||ls.current!==null||t.memoizedState!==null)&&(el=e)}function lr(e){ae(Gt,Gt.current),ae(qa,e),el===null&&(el=e)}function Eu(e){e.tag===22?(ae(Gt,Gt.current),ae(qa,e),el===null&&(el=e)):ln()}function ln(){ae(Gt,Gt.current),ae(qa,qa.current)}function Va(e){D(qa),el===e&&(el=null),D(Gt)}var Gt=g(0);function Ei(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||oo(a)||uo(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ll=0,We=null,St=null,Wt=null,Di=!1,ns=!1,Un=!1,zi=0,Ys=0,ss=null,Ih=0;function Ut(){throw Error(o(321))}function nr(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Ba(e[a],t[a]))return!1;return!0}function sr(e,t,a,l,s,i){return Ll=i,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,E.H=e===null||e.memoizedState===null?fd:br,Un=!1,i=a(l,s),Un=!1,ns&&(i=zu(t,a,l,s)),Du(e),i}function Du(e){E.H=Xs;var t=St!==null&&St.next!==null;if(Ll=0,Wt=St=We=null,Di=!1,Ys=0,ss=null,t)throw Error(o(300));e===null||Ft||(e=e.dependencies,e!==null&&ji(e)&&(Ft=!0))}function zu(e,t,a,l){We=e;var s=0;do{if(ns&&(ss=null),Ys=0,ns=!1,25<=s)throw Error(o(301));if(s+=1,Wt=St=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}E.H=hd,i=t(a,l)}while(ns);return i}function Ph(){var e=E.H,t=e.useState()[0];return t=typeof t.then=="function"?qs(t):t,e=e.useState()[0],(St!==null?St.memoizedState:null)!==e&&(We.flags|=1024),t}function ir(){var e=zi!==0;return zi=0,e}function cr(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function rr(e){if(Di){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Di=!1}Ll=0,Wt=St=We=null,ns=!1,Ys=zi=0,ss=null}function wa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?We.memoizedState=Wt=e:Wt=Wt.next=e,Wt}function Zt(){if(St===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=St.next;var t=Wt===null?We.memoizedState:Wt.next;if(t!==null)Wt=t,St=e;else{if(e===null)throw We.alternate===null?Error(o(467)):Error(o(310));St=e,e={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Wt===null?We.memoizedState=Wt=e:Wt=Wt.next=e}return Wt}function Li(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qs(e){var t=Ys;return Ys+=1,ss===null&&(ss=[]),e=ju(ss,e,t),t=We,(Wt===null?t.memoizedState:Wt.next)===null&&(t=t.alternate,E.H=t===null||t.memoizedState===null?fd:br),e}function Ri(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qs(e);if(e.$$typeof===ue)return ma(e)}throw Error(o(438,String(e)))}function or(e){var t=null,a=We.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=We.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Li(),We.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=U;return t.index++,a}function Rl(e,t){return typeof t=="function"?t(e):t}function Oi(e){var t=Zt();return ur(t,St,e)}function ur(e,t,a){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=a;var s=e.baseQueue,i=l.pending;if(i!==null){if(s!==null){var c=s.next;s.next=i.next,i.next=c}t.baseQueue=s=i,l.pending=null}if(i=e.baseState,s===null)e.memoizedState=i;else{t=s.next;var d=c=null,p=null,O=t,Z=!1;do{var P=O.lane&-536870913;if(P!==O.lane?(nt&P)===P:(Ll&P)===P){var H=O.revertLane;if(H===0)p!==null&&(p=p.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),P===Pn&&(Z=!0);else if((Ll&H)===H){O=O.next,H===Pn&&(Z=!0);continue}else P={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},p===null?(d=p=P,c=i):p=p.next=P,We.lanes|=H,cn|=H;P=O.action,Un&&a(i,P),i=O.hasEagerState?O.eagerState:a(i,P)}else H={lane:P,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},p===null?(d=p=H,c=i):p=p.next=H,We.lanes|=P,cn|=P;O=O.next}while(O!==null&&O!==t);if(p===null?c=i:p.next=d,!Ba(i,e.memoizedState)&&(Ft=!0,Z&&(a=es,a!==null)))throw a;e.memoizedState=i,e.baseState=c,e.baseQueue=p,l.lastRenderedState=i}return s===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function dr(e){var t=Zt(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var l=a.dispatch,s=a.pending,i=t.memoizedState;if(s!==null){a.pending=null;var c=s=s.next;do i=e(i,c.action),c=c.next;while(c!==s);Ba(i,t.memoizedState)||(Ft=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),a.lastRenderedState=i}return[i,l]}function Lu(e,t,a){var l=We,s=Zt(),i=it;if(i){if(a===void 0)throw Error(o(407));a=a()}else a=t();var c=!Ba((St||s).memoizedState,a);if(c&&(s.memoizedState=a,Ft=!0),s=s.queue,mr(_u.bind(null,l,s,e),[e]),s.getSnapshot!==t||c||Wt!==null&&Wt.memoizedState.tag&1){if(l.flags|=2048,is(9,{destroy:void 0},Ou.bind(null,l,s,a,t),null),Mt===null)throw Error(o(349));i||(Ll&127)!==0||Ru(l,t,a)}return a}function Ru(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=We.updateQueue,t===null?(t=Li(),We.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Ou(e,t,a,l){t.value=a,t.getSnapshot=l,ku(t)&&Uu(e)}function _u(e,t,a){return a(function(){ku(t)&&Uu(e)})}function ku(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Ba(e,a)}catch{return!0}}function Uu(e){var t=Tn(e,2);t!==null&&Ra(t,e,2)}function fr(e){var t=wa();if(typeof e=="function"){var a=e;if(e=a(),Un){pa(!0);try{a()}finally{pa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:e},t}function Hu(e,t,a,l){return e.baseState=a,ur(e,St,typeof l=="function"?l:Rl)}function em(e,t,a,l,s){if(Ui(e))throw Error(o(485));if(e=t.action,e!==null){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){i.listeners.push(c)}};E.T!==null?a(!0):i.isTransition=!1,l(i),a=t.pending,a===null?(i.next=t.pending=i,Bu(t,i)):(i.next=a.next,t.pending=a.next=i)}}function Bu(e,t){var a=t.action,l=t.payload,s=e.state;if(t.isTransition){var i=E.T,c={};E.T=c;try{var d=a(s,l),p=E.S;p!==null&&p(c,d),Yu(e,t,d)}catch(O){hr(e,t,O)}finally{i!==null&&c.types!==null&&(i.types=c.types),E.T=i}}else try{i=a(s,l),Yu(e,t,i)}catch(O){hr(e,t,O)}}function Yu(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){qu(e,t,l)},function(l){return hr(e,t,l)}):qu(e,t,a)}function qu(e,t,a){t.status="fulfilled",t.value=a,Vu(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Bu(e,a)))}function hr(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,Vu(t),t=t.next;while(t!==l)}e.action=null}function Vu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Xu(e,t){return t}function Gu(e,t){if(it){var a=Mt.formState;if(a!==null){e:{var l=We;if(it){if(Et){t:{for(var s=Et,i=Pa;s.nodeType!==8;){if(!i){s=null;break t}if(s=tl(s.nextSibling),s===null){s=null;break t}}i=s.data,s=i==="F!"||i==="F"?s:null}if(s){Et=tl(s.nextSibling),l=s.data==="F!";break e}}Fl(l)}l=!1}l&&(t=a[0])}}return a=wa(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xu,lastRenderedState:t},a.queue=l,a=od.bind(null,We,l),l.dispatch=a,l=fr(!1),i=vr.bind(null,We,!1,l.queue),l=wa(),s={state:t,dispatch:null,action:e,pending:null},l.queue=s,a=em.bind(null,We,s,i,a),s.dispatch=a,l.memoizedState=e,[t,a,!1]}function Zu(e){var t=Zt();return Qu(t,St,e)}function Qu(e,t,a){if(t=ur(e,t,Xu)[0],e=Oi(Rl)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=qs(t)}catch(c){throw c===ts?wi:c}else l=t;t=Zt();var s=t.queue,i=s.dispatch;return a!==t.memoizedState&&(We.flags|=2048,is(9,{destroy:void 0},tm.bind(null,s,a),null)),[l,i,e]}function tm(e,t){e.action=t}function Ku(e){var t=Zt(),a=St;if(a!==null)return Qu(t,a,e);Zt(),t=t.memoizedState,a=Zt();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function is(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=We.updateQueue,t===null&&(t=Li(),We.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function Ju(){return Zt().memoizedState}function _i(e,t,a,l){var s=wa();We.flags|=e,s.memoizedState=is(1|t,{destroy:void 0},a,l===void 0?null:l)}function ki(e,t,a,l){var s=Zt();l=l===void 0?null:l;var i=s.memoizedState.inst;St!==null&&l!==null&&nr(l,St.memoizedState.deps)?s.memoizedState=is(t,i,a,l):(We.flags|=e,s.memoizedState=is(1|t,i,a,l))}function $u(e,t){_i(8390656,8,e,t)}function mr(e,t){ki(2048,8,e,t)}function am(e){We.flags|=4;var t=We.updateQueue;if(t===null)t=Li(),We.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Wu(e){var t=Zt().memoizedState;return am({ref:t,nextImpl:e}),function(){if((xt&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Fu(e,t){return ki(4,2,e,t)}function Iu(e,t){return ki(4,4,e,t)}function Pu(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ed(e,t,a){a=a!=null?a.concat([e]):null,ki(4,4,Pu.bind(null,t,e),a)}function xr(){}function td(e,t){var a=Zt();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&nr(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function ad(e,t){var a=Zt();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&nr(t,l[1]))return l[0];if(l=e(),Un){pa(!0);try{e()}finally{pa(!1)}}return a.memoizedState=[l,t],l}function gr(e,t,a){return a===void 0||(Ll&1073741824)!==0&&(nt&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=lf(),We.lanes|=e,cn|=e,a)}function ld(e,t,a,l){return Ba(a,t)?a:ls.current!==null?(e=gr(e,a,l),Ba(e,t)||(Ft=!0),e):(Ll&42)===0||(Ll&1073741824)!==0&&(nt&261930)===0?(Ft=!0,e.memoizedState=a):(e=lf(),We.lanes|=e,cn|=e,t)}function nd(e,t,a,l,s){var i=le.p;le.p=i!==0&&8>i?i:8;var c=E.T,d={};E.T=d,vr(e,!1,t,a);try{var p=s(),O=E.S;if(O!==null&&O(d,p),p!==null&&typeof p=="object"&&typeof p.then=="function"){var Z=Fh(p,l);Vs(e,t,Z,Za(e))}else Vs(e,t,l,Za(e))}catch(P){Vs(e,t,{then:function(){},status:"rejected",reason:P},Za())}finally{le.p=i,c!==null&&d.types!==null&&(c.types=d.types),E.T=c}}function lm(){}function yr(e,t,a,l){if(e.tag!==5)throw Error(o(476));var s=sd(e).queue;nd(e,s,t,se,a===null?lm:function(){return id(e),a(l)})}function sd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:se},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function id(e){var t=sd(e);t.next===null&&(t=e.alternate.memoizedState),Vs(e,t.next.queue,{},Za())}function pr(){return ma(si)}function cd(){return Zt().memoizedState}function rd(){return Zt().memoizedState}function nm(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Za();e=en(a);var l=tn(t,e,a);l!==null&&(Ra(l,t,a),Us(l,t,a)),t={cache:Kc()},e.payload=t;return}t=t.return}}function sm(e,t,a){var l=Za();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ui(e)?ud(t,a):(a=kc(e,t,a,l),a!==null&&(Ra(a,e,l),dd(a,t,l)))}function od(e,t,a){var l=Za();Vs(e,t,a,l)}function Vs(e,t,a,l){var s={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ui(e))ud(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var c=t.lastRenderedState,d=i(c,a);if(s.hasEagerState=!0,s.eagerState=d,Ba(d,c))return yi(e,t,s,0),Mt===null&&gi(),!1}catch{}finally{}if(a=kc(e,t,s,l),a!==null)return Ra(a,e,l),dd(a,t,l),!0}return!1}function vr(e,t,a,l){if(l={lane:2,revertLane:Fr(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ui(e)){if(t)throw Error(o(479))}else t=kc(e,a,l,2),t!==null&&Ra(t,e,2)}function Ui(e){var t=e.alternate;return e===We||t!==null&&t===We}function ud(e,t){ns=Di=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function dd(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,cl(e,a)}}var Xs={readContext:ma,use:Ri,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};Xs.useEffectEvent=Ut;var fd={readContext:ma,use:Ri,useCallback:function(e,t){return wa().memoizedState=[e,t===void 0?null:t],e},useContext:ma,useEffect:$u,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,_i(4194308,4,Pu.bind(null,t,e),a)},useLayoutEffect:function(e,t){return _i(4194308,4,e,t)},useInsertionEffect:function(e,t){_i(4,2,e,t)},useMemo:function(e,t){var a=wa();t=t===void 0?null:t;var l=e();if(Un){pa(!0);try{e()}finally{pa(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=wa();if(a!==void 0){var s=a(t);if(Un){pa(!0);try{a(t)}finally{pa(!1)}}}else s=t;return l.memoizedState=l.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},l.queue=e,e=e.dispatch=sm.bind(null,We,e),[l.memoizedState,e]},useRef:function(e){var t=wa();return e={current:e},t.memoizedState=e},useState:function(e){e=fr(e);var t=e.queue,a=od.bind(null,We,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:xr,useDeferredValue:function(e,t){var a=wa();return gr(a,e,t)},useTransition:function(){var e=fr(!1);return e=nd.bind(null,We,e.queue,!0,!1),wa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=We,s=wa();if(it){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),Mt===null)throw Error(o(349));(nt&127)!==0||Ru(l,t,a)}s.memoizedState=a;var i={value:a,getSnapshot:t};return s.queue=i,$u(_u.bind(null,l,i,e),[e]),l.flags|=2048,is(9,{destroy:void 0},Ou.bind(null,l,i,a,t),null),a},useId:function(){var e=wa(),t=Mt.identifierPrefix;if(it){var a=bl,l=vl;a=(l&~(1<<32-ht(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=zi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Ih++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:pr,useFormState:Gu,useActionState:Gu,useOptimistic:function(e){var t=wa();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=vr.bind(null,We,!0,a),a.dispatch=t,[e,t]},useMemoCache:or,useCacheRefresh:function(){return wa().memoizedState=nm.bind(null,We)},useEffectEvent:function(e){var t=wa(),a={impl:e};return t.memoizedState=a,function(){if((xt&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},br={readContext:ma,use:Ri,useCallback:td,useContext:ma,useEffect:mr,useImperativeHandle:ed,useInsertionEffect:Fu,useLayoutEffect:Iu,useMemo:ad,useReducer:Oi,useRef:Ju,useState:function(){return Oi(Rl)},useDebugValue:xr,useDeferredValue:function(e,t){var a=Zt();return ld(a,St.memoizedState,e,t)},useTransition:function(){var e=Oi(Rl)[0],t=Zt().memoizedState;return[typeof e=="boolean"?e:qs(e),t]},useSyncExternalStore:Lu,useId:cd,useHostTransitionStatus:pr,useFormState:Zu,useActionState:Zu,useOptimistic:function(e,t){var a=Zt();return Hu(a,St,e,t)},useMemoCache:or,useCacheRefresh:rd};br.useEffectEvent=Wu;var hd={readContext:ma,use:Ri,useCallback:td,useContext:ma,useEffect:mr,useImperativeHandle:ed,useInsertionEffect:Fu,useLayoutEffect:Iu,useMemo:ad,useReducer:dr,useRef:Ju,useState:function(){return dr(Rl)},useDebugValue:xr,useDeferredValue:function(e,t){var a=Zt();return St===null?gr(a,e,t):ld(a,St.memoizedState,e,t)},useTransition:function(){var e=dr(Rl)[0],t=Zt().memoizedState;return[typeof e=="boolean"?e:qs(e),t]},useSyncExternalStore:Lu,useId:cd,useHostTransitionStatus:pr,useFormState:Ku,useActionState:Ku,useOptimistic:function(e,t){var a=Zt();return St!==null?Hu(a,St,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:or,useCacheRefresh:rd};hd.useEffectEvent=Wu;function jr(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:j({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Nr={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=Za(),s=en(l);s.payload=t,a!=null&&(s.callback=a),t=tn(e,s,l),t!==null&&(Ra(t,e,l),Us(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=Za(),s=en(l);s.tag=1,s.payload=t,a!=null&&(s.callback=a),t=tn(e,s,l),t!==null&&(Ra(t,e,l),Us(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Za(),l=en(a);l.tag=2,t!=null&&(l.callback=t),t=tn(e,l,a),t!==null&&(Ra(t,e,a),Us(t,e,a))}};function md(e,t,a,l,s,i,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,i,c):t.prototype&&t.prototype.isPureReactComponent?!Es(a,l)||!Es(s,i):!0}function xd(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&Nr.enqueueReplaceState(t,t.state,null)}function Hn(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=j({},a));for(var s in e)a[s]===void 0&&(a[s]=e[s])}return a}function gd(e){xi(e)}function yd(e){console.error(e)}function pd(e){xi(e)}function Hi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function vd(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Sr(e,t,a){return a=en(a),a.tag=3,a.payload={element:null},a.callback=function(){Hi(e,t)},a}function bd(e){return e=en(e),e.tag=3,e}function jd(e,t,a,l){var s=a.type.getDerivedStateFromError;if(typeof s=="function"){var i=l.value;e.payload=function(){return s(i)},e.callback=function(){vd(t,a,l)}}var c=a.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){vd(t,a,l),typeof s!="function"&&(rn===null?rn=new Set([this]):rn.add(this));var d=l.stack;this.componentDidCatch(l.value,{componentStack:d!==null?d:""})})}function im(e,t,a,l,s){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&In(t,a,s,!0),a=qa.current,a!==null){switch(a.tag){case 31:case 13:return el===null?Wi():a.alternate===null&&Ht===0&&(Ht=3),a.flags&=-257,a.flags|=65536,a.lanes=s,l===Ci?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Jr(e,l,s)),!1;case 22:return a.flags|=65536,l===Ci?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Jr(e,l,s)),!1}throw Error(o(435,a.tag))}return Jr(e,l,s),Wi(),!1}if(it)return t=qa.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,l!==Vc&&(e=Error(o(422),{cause:l}),Ls(Wa(e,a)))):(l!==Vc&&(t=Error(o(423),{cause:l}),Ls(Wa(t,a))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,l=Wa(l,a),s=Sr(e.stateNode,l,s),Pc(e,s),Ht!==4&&(Ht=2)),!1;var i=Error(o(520),{cause:l});if(i=Wa(i,a),Fs===null?Fs=[i]:Fs.push(i),Ht!==4&&(Ht=2),t===null)return!0;l=Wa(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=s&-s,a.lanes|=e,e=Sr(a.stateNode,l,e),Pc(a,e),!1;case 1:if(t=a.type,i=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(rn===null||!rn.has(i))))return a.flags|=65536,s&=-s,a.lanes|=s,s=bd(s),jd(s,e,a,l),Pc(a,s),!1}a=a.return}while(a!==null);return!1}var wr=Error(o(461)),Ft=!1;function xa(e,t,a,l){t.child=e===null?Cu(t,null,a,l):kn(t,e.child,a,l)}function Nd(e,t,a,l,s){a=a.render;var i=t.ref;if("ref"in l){var c={};for(var d in l)d!=="ref"&&(c[d]=l[d])}else c=l;return Ln(t),l=sr(e,t,a,c,i,s),d=ir(),e!==null&&!Ft?(cr(e,t,s),Ol(e,t,s)):(it&&d&&Yc(t),t.flags|=1,xa(e,t,l,s),t.child)}function Sd(e,t,a,l,s){if(e===null){var i=a.type;return typeof i=="function"&&!Uc(i)&&i.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=i,wd(e,t,i,l,s)):(e=vi(a.type,null,l,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!Lr(e,s)){var c=i.memoizedProps;if(a=a.compare,a=a!==null?a:Es,a(c,l)&&e.ref===t.ref)return Ol(e,t,s)}return t.flags|=1,e=Tl(i,l),e.ref=t.ref,e.return=t,t.child=e}function wd(e,t,a,l,s){if(e!==null){var i=e.memoizedProps;if(Es(i,l)&&e.ref===t.ref)if(Ft=!1,t.pendingProps=l=i,Lr(e,s))(e.flags&131072)!==0&&(Ft=!0);else return t.lanes=e.lanes,Ol(e,t,s)}return Cr(e,t,a,l,s)}function Cd(e,t,a,l){var s=l.children,i=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(i=i!==null?i.baseLanes|a:a,e!==null){for(l=t.child=e.child,s=0;l!==null;)s=s|l.lanes|l.childLanes,l=l.sibling;l=s&~i}else l=0,t.child=null;return Md(e,t,i,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Si(t,i!==null?i.cachePool:null),i!==null?Tu(t,i):tr(),Eu(t);else return l=t.lanes=536870912,Md(e,t,i!==null?i.baseLanes|a:a,a,l)}else i!==null?(Si(t,i.cachePool),Tu(t,i),ln(),t.memoizedState=null):(e!==null&&Si(t,null),tr(),ln());return xa(e,t,s,a),t.child}function Gs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Md(e,t,a,l,s){var i=$c();return i=i===null?null:{parent:$t._currentValue,pool:i},t.memoizedState={baseLanes:a,cachePool:i},e!==null&&Si(t,null),tr(),Eu(t),e!==null&&In(e,t,l,!0),t.childLanes=s,null}function Bi(e,t){return t=qi({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ad(e,t,a){return kn(t,e.child,null,a),e=Bi(t,t.pendingProps),e.flags|=2,Va(t),t.memoizedState=null,e}function cm(e,t,a){var l=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(it){if(l.mode==="hidden")return e=Bi(t,l),t.lanes=536870912,Gs(null,e);if(lr(t),(e=Et)?(e=Yf(e,Pa),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:$l!==null?{id:vl,overflow:bl}:null,retryLane:536870912,hydrationErrors:null},a=uu(e),a.return=t,t.child=a,ha=t,Et=null)):e=null,e===null)throw Fl(t);return t.lanes=536870912,null}return Bi(t,l)}var i=e.memoizedState;if(i!==null){var c=i.dehydrated;if(lr(t),s)if(t.flags&256)t.flags&=-257,t=Ad(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(Ft||In(e,t,a,!1),s=(a&e.childLanes)!==0,Ft||s){if(l=Mt,l!==null&&(c=ta(l,a),c!==0&&c!==i.retryLane))throw i.retryLane=c,Tn(e,c),Ra(l,e,c),wr;Wi(),t=Ad(e,t,a)}else e=i.treeContext,Et=tl(c.nextSibling),ha=t,it=!0,Wl=null,Pa=!1,e!==null&&hu(t,e),t=Bi(t,l),t.flags|=4096;return t}return e=Tl(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Yi(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Cr(e,t,a,l,s){return Ln(t),a=sr(e,t,a,l,void 0,s),l=ir(),e!==null&&!Ft?(cr(e,t,s),Ol(e,t,s)):(it&&l&&Yc(t),t.flags|=1,xa(e,t,a,s),t.child)}function Td(e,t,a,l,s,i){return Ln(t),t.updateQueue=null,a=zu(t,l,a,s),Du(e),l=ir(),e!==null&&!Ft?(cr(e,t,i),Ol(e,t,i)):(it&&l&&Yc(t),t.flags|=1,xa(e,t,a,i),t.child)}function Ed(e,t,a,l,s){if(Ln(t),t.stateNode===null){var i=Jn,c=a.contextType;typeof c=="object"&&c!==null&&(i=ma(c)),i=new a(l,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Nr,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=l,i.state=t.memoizedState,i.refs={},Fc(t),c=a.contextType,i.context=typeof c=="object"&&c!==null?ma(c):Jn,i.state=t.memoizedState,c=a.getDerivedStateFromProps,typeof c=="function"&&(jr(t,a,c,l),i.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(c=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),c!==i.state&&Nr.enqueueReplaceState(i,i.state,null),Bs(t,l,i,s),Hs(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){i=t.stateNode;var d=t.memoizedProps,p=Hn(a,d);i.props=p;var O=i.context,Z=a.contextType;c=Jn,typeof Z=="object"&&Z!==null&&(c=ma(Z));var P=a.getDerivedStateFromProps;Z=typeof P=="function"||typeof i.getSnapshotBeforeUpdate=="function",d=t.pendingProps!==d,Z||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(d||O!==c)&&xd(t,i,l,c),Pl=!1;var H=t.memoizedState;i.state=H,Bs(t,l,i,s),Hs(),O=t.memoizedState,d||H!==O||Pl?(typeof P=="function"&&(jr(t,a,P,l),O=t.memoizedState),(p=Pl||md(t,a,p,l,H,O,c))?(Z||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=O),i.props=l,i.state=O,i.context=c,l=p):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{i=t.stateNode,Ic(e,t),c=t.memoizedProps,Z=Hn(a,c),i.props=Z,P=t.pendingProps,H=i.context,O=a.contextType,p=Jn,typeof O=="object"&&O!==null&&(p=ma(O)),d=a.getDerivedStateFromProps,(O=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==P||H!==p)&&xd(t,i,l,p),Pl=!1,H=t.memoizedState,i.state=H,Bs(t,l,i,s),Hs();var q=t.memoizedState;c!==P||H!==q||Pl||e!==null&&e.dependencies!==null&&ji(e.dependencies)?(typeof d=="function"&&(jr(t,a,d,l),q=t.memoizedState),(Z=Pl||md(t,a,Z,l,H,q,p)||e!==null&&e.dependencies!==null&&ji(e.dependencies))?(O||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(l,q,p),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(l,q,p)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=q),i.props=l,i.state=q,i.context=p,l=Z):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),l=!1)}return i=l,Yi(e,t),l=(t.flags&128)!==0,i||l?(i=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&l?(t.child=kn(t,e.child,null,s),t.child=kn(t,null,a,s)):xa(e,t,a,s),t.memoizedState=i.state,e=t.child):e=Ol(e,t,s),e}function Dd(e,t,a,l){return Dn(),t.flags|=256,xa(e,t,a,l),t.child}var Mr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ar(e){return{baseLanes:e,cachePool:vu()}}function Tr(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ga),e}function zd(e,t,a){var l=t.pendingProps,s=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(Gt.current&2)!==0),c&&(s=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if(it){if(s?an(t):ln(),(e=Et)?(e=Yf(e,Pa),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:$l!==null?{id:vl,overflow:bl}:null,retryLane:536870912,hydrationErrors:null},a=uu(e),a.return=t,t.child=a,ha=t,Et=null)):e=null,e===null)throw Fl(t);return uo(e)?t.lanes=32:t.lanes=536870912,null}var d=l.children;return l=l.fallback,s?(ln(),s=t.mode,d=qi({mode:"hidden",children:d},s),l=En(l,s,a,null),d.return=t,l.return=t,d.sibling=l,t.child=d,l=t.child,l.memoizedState=Ar(a),l.childLanes=Tr(e,c,a),t.memoizedState=Mr,Gs(null,l)):(an(t),Er(t,d))}var p=e.memoizedState;if(p!==null&&(d=p.dehydrated,d!==null)){if(i)t.flags&256?(an(t),t.flags&=-257,t=Dr(e,t,a)):t.memoizedState!==null?(ln(),t.child=e.child,t.flags|=128,t=null):(ln(),d=l.fallback,s=t.mode,l=qi({mode:"visible",children:l.children},s),d=En(d,s,a,null),d.flags|=2,l.return=t,d.return=t,l.sibling=d,t.child=l,kn(t,e.child,null,a),l=t.child,l.memoizedState=Ar(a),l.childLanes=Tr(e,c,a),t.memoizedState=Mr,t=Gs(null,l));else if(an(t),uo(d)){if(c=d.nextSibling&&d.nextSibling.dataset,c)var O=c.dgst;c=O,l=Error(o(419)),l.stack="",l.digest=c,Ls({value:l,source:null,stack:null}),t=Dr(e,t,a)}else if(Ft||In(e,t,a,!1),c=(a&e.childLanes)!==0,Ft||c){if(c=Mt,c!==null&&(l=ta(c,a),l!==0&&l!==p.retryLane))throw p.retryLane=l,Tn(e,l),Ra(c,e,l),wr;oo(d)||Wi(),t=Dr(e,t,a)}else oo(d)?(t.flags|=192,t.child=e.child,t=null):(e=p.treeContext,Et=tl(d.nextSibling),ha=t,it=!0,Wl=null,Pa=!1,e!==null&&hu(t,e),t=Er(t,l.children),t.flags|=4096);return t}return s?(ln(),d=l.fallback,s=t.mode,p=e.child,O=p.sibling,l=Tl(p,{mode:"hidden",children:l.children}),l.subtreeFlags=p.subtreeFlags&65011712,O!==null?d=Tl(O,d):(d=En(d,s,a,null),d.flags|=2),d.return=t,l.return=t,l.sibling=d,t.child=l,Gs(null,l),l=t.child,d=e.child.memoizedState,d===null?d=Ar(a):(s=d.cachePool,s!==null?(p=$t._currentValue,s=s.parent!==p?{parent:p,pool:p}:s):s=vu(),d={baseLanes:d.baseLanes|a,cachePool:s}),l.memoizedState=d,l.childLanes=Tr(e,c,a),t.memoizedState=Mr,Gs(e.child,l)):(an(t),a=e.child,e=a.sibling,a=Tl(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=a,t.memoizedState=null,a)}function Er(e,t){return t=qi({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function qi(e,t){return e=Ya(22,e,null,t),e.lanes=0,e}function Dr(e,t,a){return kn(t,e.child,null,a),e=Er(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ld(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Zc(e.return,t,a)}function zr(e,t,a,l,s,i){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:s,treeForkCount:i}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=l,c.tail=a,c.tailMode=s,c.treeForkCount=i)}function Rd(e,t,a){var l=t.pendingProps,s=l.revealOrder,i=l.tail;l=l.children;var c=Gt.current,d=(c&2)!==0;if(d?(c=c&1|2,t.flags|=128):c&=1,ae(Gt,c),xa(e,t,l,a),l=it?zs:0,!d&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ld(e,a,t);else if(e.tag===19)Ld(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(a=t.child,s=null;a!==null;)e=a.alternate,e!==null&&Ei(e)===null&&(s=a),a=a.sibling;a=s,a===null?(s=t.child,t.child=null):(s=a.sibling,a.sibling=null),zr(t,!1,s,a,i,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ei(e)===null){t.child=s;break}e=s.sibling,s.sibling=a,a=s,s=e}zr(t,!0,a,null,i,l);break;case"together":zr(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Ol(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),cn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(In(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=Tl(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Tl(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Lr(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ji(e)))}function rm(e,t,a){switch(t.tag){case 3:gt(t,t.stateNode.containerInfo),Il(t,$t,e.memoizedState.cache),Dn();break;case 27:case 5:_t(t);break;case 4:gt(t,t.stateNode.containerInfo);break;case 10:Il(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,lr(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(an(t),t.flags|=128,null):(a&t.child.childLanes)!==0?zd(e,t,a):(an(t),e=Ol(e,t,a),e!==null?e.sibling:null);an(t);break;case 19:var s=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(In(e,t,a,!1),l=(a&t.childLanes)!==0),s){if(l)return Rd(e,t,a);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ae(Gt,Gt.current),l)break;return null;case 22:return t.lanes=0,Cd(e,t,a,t.pendingProps);case 24:Il(t,$t,e.memoizedState.cache)}return Ol(e,t,a)}function Od(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ft=!0;else{if(!Lr(e,a)&&(t.flags&128)===0)return Ft=!1,rm(e,t,a);Ft=(e.flags&131072)!==0}else Ft=!1,it&&(t.flags&1048576)!==0&&fu(t,zs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=On(t.elementType),t.type=e,typeof e=="function")Uc(e)?(l=Hn(e,l),t.tag=1,t=Ed(null,t,e,l,a)):(t.tag=0,t=Cr(null,t,e,l,a));else{if(e!=null){var s=e.$$typeof;if(s===re){t.tag=11,t=Nd(null,t,e,l,a);break e}else if(s===B){t.tag=14,t=Sd(null,t,e,l,a);break e}}throw t=qe(e)||e,Error(o(306,t,""))}}return t;case 0:return Cr(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,s=Hn(l,t.pendingProps),Ed(e,t,l,s,a);case 3:e:{if(gt(t,t.stateNode.containerInfo),e===null)throw Error(o(387));l=t.pendingProps;var i=t.memoizedState;s=i.element,Ic(e,t),Bs(t,l,null,a);var c=t.memoizedState;if(l=c.cache,Il(t,$t,l),l!==i.cache&&Qc(t,[$t],a,!0),Hs(),l=c.element,i.isDehydrated)if(i={element:l,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=Dd(e,t,l,a);break e}else if(l!==s){s=Wa(Error(o(424)),t),Ls(s),t=Dd(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Et=tl(e.firstChild),ha=t,it=!0,Wl=null,Pa=!0,a=Cu(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Dn(),l===s){t=Ol(e,t,a);break e}xa(e,t,l,a)}t=t.child}return t;case 26:return Yi(e,t),e===null?(a=Qf(t.type,null,t.pendingProps,null))?t.memoizedState=a:it||(a=t.type,e=t.pendingProps,l=lc(ze.current).createElement(a),l[kt]=t,l[Jt]=e,ga(l,a,e),$(l),t.stateNode=l):t.memoizedState=Qf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return _t(t),e===null&&it&&(l=t.stateNode=Xf(t.type,t.pendingProps,ze.current),ha=t,Pa=!0,s=Et,fn(t.type)?(fo=s,Et=tl(l.firstChild)):Et=s),xa(e,t,t.pendingProps.children,a),Yi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&it&&((s=l=Et)&&(l=Hm(l,t.type,t.pendingProps,Pa),l!==null?(t.stateNode=l,ha=t,Et=tl(l.firstChild),Pa=!1,s=!0):s=!1),s||Fl(t)),_t(t),s=t.type,i=t.pendingProps,c=e!==null?e.memoizedProps:null,l=i.children,io(s,i)?l=null:c!==null&&io(s,c)&&(t.flags|=32),t.memoizedState!==null&&(s=sr(e,t,Ph,null,null,a),si._currentValue=s),Yi(e,t),xa(e,t,l,a),t.child;case 6:return e===null&&it&&((e=a=Et)&&(a=Bm(a,t.pendingProps,Pa),a!==null?(t.stateNode=a,ha=t,Et=null,e=!0):e=!1),e||Fl(t)),null;case 13:return zd(e,t,a);case 4:return gt(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=kn(t,null,l,a):xa(e,t,l,a),t.child;case 11:return Nd(e,t,t.type,t.pendingProps,a);case 7:return xa(e,t,t.pendingProps,a),t.child;case 8:return xa(e,t,t.pendingProps.children,a),t.child;case 12:return xa(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,Il(t,t.type,l.value),xa(e,t,l.children,a),t.child;case 9:return s=t.type._context,l=t.pendingProps.children,Ln(t),s=ma(s),l=l(s),t.flags|=1,xa(e,t,l,a),t.child;case 14:return Sd(e,t,t.type,t.pendingProps,a);case 15:return wd(e,t,t.type,t.pendingProps,a);case 19:return Rd(e,t,a);case 31:return cm(e,t,a);case 22:return Cd(e,t,a,t.pendingProps);case 24:return Ln(t),l=ma($t),e===null?(s=$c(),s===null&&(s=Mt,i=Kc(),s.pooledCache=i,i.refCount++,i!==null&&(s.pooledCacheLanes|=a),s=i),t.memoizedState={parent:l,cache:s},Fc(t),Il(t,$t,s)):((e.lanes&a)!==0&&(Ic(e,t),Bs(t,null,null,a),Hs()),s=e.memoizedState,i=t.memoizedState,s.parent!==l?(s={parent:l,cache:l},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Il(t,$t,l)):(l=i.cache,Il(t,$t,l),l!==s.cache&&Qc(t,[$t],a,!0))),xa(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function _l(e){e.flags|=4}function Rr(e,t,a,l,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(rf())e.flags|=8192;else throw _n=Ci,Wc}else e.flags&=-16777217}function _d(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ff(t))if(rf())e.flags|=8192;else throw _n=Ci,Wc}function Vi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ua():536870912,e.lanes|=t,us|=t)}function Zs(e,t){if(!it)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var s=e.child;s!==null;)a|=s.lanes|s.childLanes,l|=s.subtreeFlags&65011712,l|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)a|=s.lanes|s.childLanes,l|=s.subtreeFlags,l|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function om(e,t,a){var l=t.pendingProps;switch(qc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(t),null;case 1:return Dt(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),zl($t),rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Fn(t)?_l(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Xc())),Dt(t),null;case 26:var s=t.type,i=t.memoizedState;return e===null?(_l(t),i!==null?(Dt(t),_d(t,i)):(Dt(t),Rr(t,s,null,l,a))):i?i!==e.memoizedState?(_l(t),Dt(t),_d(t,i)):(Dt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&_l(t),Dt(t),Rr(t,s,e,l,a)),null;case 27:if(ca(t),a=ze.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&_l(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return Dt(t),null}e=xe.current,Fn(t)?mu(t):(e=Xf(s,l,a),t.stateNode=e,_l(t))}return Dt(t),null;case 5:if(ca(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&_l(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return Dt(t),null}if(i=xe.current,Fn(t))mu(t);else{var c=lc(ze.current);switch(i){case 1:i=c.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:i=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":i=c.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":i=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":i=c.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?i.multiple=!0:l.size&&(i.size=l.size);break;default:i=typeof l.is=="string"?c.createElement(s,{is:l.is}):c.createElement(s)}}i[kt]=t,i[Jt]=l;e:for(c=t.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}t.stateNode=i;e:switch(ga(i,s,l),s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&_l(t)}}return Dt(t),Rr(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&_l(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(o(166));if(e=ze.current,Fn(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,s=ha,s!==null)switch(s.tag){case 27:case 5:l=s.memoizedProps}e[kt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Lf(e.nodeValue,a)),e||Fl(t,!0)}else e=lc(e).createTextNode(l),e[kt]=t,t.stateNode=e}return Dt(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(l=Fn(t),a!==null){if(e===null){if(!l)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[kt]=t}else Dn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Dt(t),e=!1}else a=Xc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Va(t),t):(Va(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Dt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Fn(t),l!==null&&l.dehydrated!==null){if(e===null){if(!s)throw Error(o(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(o(317));s[kt]=t}else Dn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Dt(t),s=!1}else s=Xc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Va(t),t):(Va(t),null)}return Va(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=t.child,s=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(s=l.alternate.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==s&&(l.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Vi(t,t.updateQueue),Dt(t),null);case 4:return rt(),e===null&&to(t.stateNode.containerInfo),Dt(t),null;case 10:return zl(t.type),Dt(t),null;case 19:if(D(Gt),l=t.memoizedState,l===null)return Dt(t),null;if(s=(t.flags&128)!==0,i=l.rendering,i===null)if(s)Zs(l,!1);else{if(Ht!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Ei(e),i!==null){for(t.flags|=128,Zs(l,!1),e=i.updateQueue,t.updateQueue=e,Vi(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)ou(a,e),a=a.sibling;return ae(Gt,Gt.current&1|2),it&&El(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&jt()>Ki&&(t.flags|=128,s=!0,Zs(l,!1),t.lanes=4194304)}else{if(!s)if(e=Ei(i),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Vi(t,e),Zs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!it)return Dt(t),null}else 2*jt()-l.renderingStartTime>Ki&&a!==536870912&&(t.flags|=128,s=!0,Zs(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(e=l.last,e!==null?e.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=jt(),e.sibling=null,a=Gt.current,ae(Gt,s?a&1|2:a&1),it&&El(t,l.treeForkCount),e):(Dt(t),null);case 22:case 23:return Va(t),ar(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Dt(t),t.subtreeFlags&6&&(t.flags|=8192)):Dt(t),a=t.updateQueue,a!==null&&Vi(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&D(Rn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),zl($t),Dt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function um(e,t){switch(qc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zl($t),rt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ca(t),null;case 31:if(t.memoizedState!==null){if(Va(t),t.alternate===null)throw Error(o(340));Dn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Va(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Dn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return D(Gt),null;case 4:return rt(),null;case 10:return zl(t.type),null;case 22:case 23:return Va(t),ar(),e!==null&&D(Rn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return zl($t),null;case 25:return null;default:return null}}function kd(e,t){switch(qc(t),t.tag){case 3:zl($t),rt();break;case 26:case 27:case 5:ca(t);break;case 4:rt();break;case 31:t.memoizedState!==null&&Va(t);break;case 13:Va(t);break;case 19:D(Gt);break;case 10:zl(t.type);break;case 22:case 23:Va(t),ar(),e!==null&&D(Rn);break;case 24:zl($t)}}function Qs(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var s=l.next;a=s;do{if((a.tag&e)===e){l=void 0;var i=a.create,c=a.inst;l=i(),c.destroy=l}a=a.next}while(a!==s)}}catch(d){bt(t,t.return,d)}}function nn(e,t,a){try{var l=t.updateQueue,s=l!==null?l.lastEffect:null;if(s!==null){var i=s.next;l=i;do{if((l.tag&e)===e){var c=l.inst,d=c.destroy;if(d!==void 0){c.destroy=void 0,s=t;var p=a,O=d;try{O()}catch(Z){bt(s,p,Z)}}}l=l.next}while(l!==i)}}catch(Z){bt(t,t.return,Z)}}function Ud(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Au(t,a)}catch(l){bt(e,e.return,l)}}}function Hd(e,t,a){a.props=Hn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){bt(e,t,l)}}function Ks(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(s){bt(e,t,s)}}function jl(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(s){bt(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(s){bt(e,t,s)}else a.current=null}function Bd(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(s){bt(e,e.return,s)}}function Or(e,t,a){try{var l=e.stateNode;Lm(l,e.type,a,t),l[Jt]=t}catch(s){bt(e,e.return,s)}}function Yd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fn(e.type)||e.tag===4}function _r(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kr(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=_e));else if(l!==4&&(l===27&&fn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(kr(e,t,a),e=e.sibling;e!==null;)kr(e,t,a),e=e.sibling}function Xi(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&fn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Xi(e,t,a),e=e.sibling;e!==null;)Xi(e,t,a),e=e.sibling}function qd(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ga(t,l,a),t[kt]=e,t[Jt]=a}catch(i){bt(e,e.return,i)}}var kl=!1,It=!1,Ur=!1,Vd=typeof WeakSet=="function"?WeakSet:Set,oa=null;function dm(e,t){if(e=e.containerInfo,no=uc,e=eu(e),Dc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var s=l.anchorOffset,i=l.focusNode;l=l.focusOffset;try{a.nodeType,i.nodeType}catch{a=null;break e}var c=0,d=-1,p=-1,O=0,Z=0,P=e,H=null;t:for(;;){for(var q;P!==a||s!==0&&P.nodeType!==3||(d=c+s),P!==i||l!==0&&P.nodeType!==3||(p=c+l),P.nodeType===3&&(c+=P.nodeValue.length),(q=P.firstChild)!==null;)H=P,P=q;for(;;){if(P===e)break t;if(H===a&&++O===s&&(d=c),H===i&&++Z===l&&(p=c),(q=P.nextSibling)!==null)break;P=H,H=P.parentNode}P=q}a=d===-1||p===-1?null:{start:d,end:p}}else a=null}a=a||{start:0,end:0}}else a=null;for(so={focusedElem:e,selectionRange:a},uc=!1,oa=t;oa!==null;)if(t=oa,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oa=e;else for(;oa!==null;){switch(t=oa,i=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)s=e[a],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,a=t,s=i.memoizedProps,i=i.memoizedState,l=a.stateNode;try{var Te=Hn(a.type,s);e=l.getSnapshotBeforeUpdate(Te,i),l.__reactInternalSnapshotBeforeUpdate=e}catch(He){bt(a,a.return,He)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)ro(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ro(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,oa=e;break}oa=t.return}}function Xd(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Hl(e,a),l&4&&Qs(5,a);break;case 1:if(Hl(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(c){bt(a,a.return,c)}else{var s=Hn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){bt(a,a.return,c)}}l&64&&Ud(a),l&512&&Ks(a,a.return);break;case 3:if(Hl(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Au(e,t)}catch(c){bt(a,a.return,c)}}break;case 27:t===null&&l&4&&qd(a);case 26:case 5:Hl(e,a),t===null&&l&4&&Bd(a),l&512&&Ks(a,a.return);break;case 12:Hl(e,a);break;case 31:Hl(e,a),l&4&&Qd(e,a);break;case 13:Hl(e,a),l&4&&Kd(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=bm.bind(null,a),Ym(e,a))));break;case 22:if(l=a.memoizedState!==null||kl,!l){t=t!==null&&t.memoizedState!==null||It,s=kl;var i=It;kl=l,(It=t)&&!i?Bl(e,a,(a.subtreeFlags&8772)!==0):Hl(e,a),kl=s,It=i}break;case 30:break;default:Hl(e,a)}}function Gd(e){var t=e.alternate;t!==null&&(e.alternate=null,Gd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&C(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ot=null,Ea=!1;function Ul(e,t,a){for(a=a.child;a!==null;)Zd(e,t,a),a=a.sibling}function Zd(e,t,a){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Ja,a)}catch{}switch(a.tag){case 26:It||jl(a,t),Ul(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||jl(a,t);var l=Ot,s=Ea;fn(a.type)&&(Ot=a.stateNode,Ea=!1),Ul(e,t,a),ai(a.stateNode),Ot=l,Ea=s;break;case 5:It||jl(a,t);case 6:if(l=Ot,s=Ea,Ot=null,Ul(e,t,a),Ot=l,Ea=s,Ot!==null)if(Ea)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(a.stateNode)}catch(i){bt(a,t,i)}else try{Ot.removeChild(a.stateNode)}catch(i){bt(a,t,i)}break;case 18:Ot!==null&&(Ea?(e=Ot,Hf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ps(e)):Hf(Ot,a.stateNode));break;case 4:l=Ot,s=Ea,Ot=a.stateNode.containerInfo,Ea=!0,Ul(e,t,a),Ot=l,Ea=s;break;case 0:case 11:case 14:case 15:nn(2,a,t),It||nn(4,a,t),Ul(e,t,a);break;case 1:It||(jl(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Hd(a,t,l)),Ul(e,t,a);break;case 21:Ul(e,t,a);break;case 22:It=(l=It)||a.memoizedState!==null,Ul(e,t,a),It=l;break;default:Ul(e,t,a)}}function Qd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ps(e)}catch(a){bt(t,t.return,a)}}}function Kd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ps(e)}catch(a){bt(t,t.return,a)}}function fm(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Vd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Vd),t;default:throw Error(o(435,e.tag))}}function Gi(e,t){var a=fm(e);t.forEach(function(l){if(!a.has(l)){a.add(l);var s=jm.bind(null,e,l);l.then(s,s)}})}function Da(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var s=a[l],i=e,c=t,d=c;e:for(;d!==null;){switch(d.tag){case 27:if(fn(d.type)){Ot=d.stateNode,Ea=!1;break e}break;case 5:Ot=d.stateNode,Ea=!1;break e;case 3:case 4:Ot=d.stateNode.containerInfo,Ea=!0;break e}d=d.return}if(Ot===null)throw Error(o(160));Zd(i,c,s),Ot=null,Ea=!1,i=s.alternate,i!==null&&(i.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Jd(t,e),t=t.sibling}var ul=null;function Jd(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Da(t,e),za(e),l&4&&(nn(3,e,e.return),Qs(3,e),nn(5,e,e.return));break;case 1:Da(t,e),za(e),l&512&&(It||a===null||jl(a,a.return)),l&64&&kl&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var s=ul;if(Da(t,e),za(e),l&512&&(It||a===null||jl(a,a.return)),l&4){var i=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,s=s.ownerDocument||s;t:switch(l){case"title":i=s.getElementsByTagName("title")[0],(!i||i[G]||i[kt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=s.createElement(l),s.head.insertBefore(i,s.querySelector("head > title"))),ga(i,l,a),i[kt]=e,$(i),l=i;break e;case"link":var c=$f("link","href",s).get(l+(a.href||""));if(c){for(var d=0;d<c.length;d++)if(i=c[d],i.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&i.getAttribute("rel")===(a.rel==null?null:a.rel)&&i.getAttribute("title")===(a.title==null?null:a.title)&&i.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){c.splice(d,1);break t}}i=s.createElement(l),ga(i,l,a),s.head.appendChild(i);break;case"meta":if(c=$f("meta","content",s).get(l+(a.content||""))){for(d=0;d<c.length;d++)if(i=c[d],i.getAttribute("content")===(a.content==null?null:""+a.content)&&i.getAttribute("name")===(a.name==null?null:a.name)&&i.getAttribute("property")===(a.property==null?null:a.property)&&i.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&i.getAttribute("charset")===(a.charSet==null?null:a.charSet)){c.splice(d,1);break t}}i=s.createElement(l),ga(i,l,a),s.head.appendChild(i);break;default:throw Error(o(468,l))}i[kt]=e,$(i),l=i}e.stateNode=l}else Wf(s,e.type,e.stateNode);else e.stateNode=Jf(s,l,e.memoizedProps);else i!==l?(i===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):i.count--,l===null?Wf(s,e.type,e.stateNode):Jf(s,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Or(e,e.memoizedProps,a.memoizedProps)}break;case 27:Da(t,e),za(e),l&512&&(It||a===null||jl(a,a.return)),a!==null&&l&4&&Or(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Da(t,e),za(e),l&512&&(It||a===null||jl(a,a.return)),e.flags&32){s=e.stateNode;try{Ae(s,"")}catch(Te){bt(e,e.return,Te)}}l&4&&e.stateNode!=null&&(s=e.memoizedProps,Or(e,s,a!==null?a.memoizedProps:s)),l&1024&&(Ur=!0);break;case 6:if(Da(t,e),za(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(Te){bt(e,e.return,Te)}}break;case 3:if(ic=null,s=ul,ul=nc(t.containerInfo),Da(t,e),ul=s,za(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ps(t.containerInfo)}catch(Te){bt(e,e.return,Te)}Ur&&(Ur=!1,$d(e));break;case 4:l=ul,ul=nc(e.stateNode.containerInfo),Da(t,e),za(e),ul=l;break;case 12:Da(t,e),za(e);break;case 31:Da(t,e),za(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Gi(e,l)));break;case 13:Da(t,e),za(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qi=jt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Gi(e,l)));break;case 22:s=e.memoizedState!==null;var p=a!==null&&a.memoizedState!==null,O=kl,Z=It;if(kl=O||s,It=Z||p,Da(t,e),It=Z,kl=O,za(e),l&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(a===null||p||kl||It||Bn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){p=a=t;try{if(i=p.stateNode,s)c=i.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{d=p.stateNode;var P=p.memoizedProps.style,H=P!=null&&P.hasOwnProperty("display")?P.display:null;d.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(Te){bt(p,p.return,Te)}}}else if(t.tag===6){if(a===null){p=t;try{p.stateNode.nodeValue=s?"":p.memoizedProps}catch(Te){bt(p,p.return,Te)}}}else if(t.tag===18){if(a===null){p=t;try{var q=p.stateNode;s?Bf(q,!0):Bf(p.stateNode,!1)}catch(Te){bt(p,p.return,Te)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Gi(e,a))));break;case 19:Da(t,e),za(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Gi(e,l)));break;case 30:break;case 21:break;default:Da(t,e),za(e)}}function za(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(Yd(l)){a=l;break}l=l.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var s=a.stateNode,i=_r(e);Xi(e,i,s);break;case 5:var c=a.stateNode;a.flags&32&&(Ae(c,""),a.flags&=-33);var d=_r(e);Xi(e,d,c);break;case 3:case 4:var p=a.stateNode.containerInfo,O=_r(e);kr(e,O,p);break;default:throw Error(o(161))}}catch(Z){bt(e,e.return,Z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $d(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;$d(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Hl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Xd(e,t.alternate,t),t=t.sibling}function Bn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:nn(4,t,t.return),Bn(t);break;case 1:jl(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Hd(t,t.return,a),Bn(t);break;case 27:ai(t.stateNode);case 26:case 5:jl(t,t.return),Bn(t);break;case 22:t.memoizedState===null&&Bn(t);break;case 30:Bn(t);break;default:Bn(t)}e=e.sibling}}function Bl(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,s=e,i=t,c=i.flags;switch(i.tag){case 0:case 11:case 15:Bl(s,i,a),Qs(4,i);break;case 1:if(Bl(s,i,a),l=i,s=l.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(O){bt(l,l.return,O)}if(l=i,s=l.updateQueue,s!==null){var d=l.stateNode;try{var p=s.shared.hiddenCallbacks;if(p!==null)for(s.shared.hiddenCallbacks=null,s=0;s<p.length;s++)Mu(p[s],d)}catch(O){bt(l,l.return,O)}}a&&c&64&&Ud(i),Ks(i,i.return);break;case 27:qd(i);case 26:case 5:Bl(s,i,a),a&&l===null&&c&4&&Bd(i),Ks(i,i.return);break;case 12:Bl(s,i,a);break;case 31:Bl(s,i,a),a&&c&4&&Qd(s,i);break;case 13:Bl(s,i,a),a&&c&4&&Kd(s,i);break;case 22:i.memoizedState===null&&Bl(s,i,a),Ks(i,i.return);break;case 30:break;default:Bl(s,i,a)}t=t.sibling}}function Hr(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Rs(a))}function Br(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Rs(e))}function dl(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Wd(e,t,a,l),t=t.sibling}function Wd(e,t,a,l){var s=t.flags;switch(t.tag){case 0:case 11:case 15:dl(e,t,a,l),s&2048&&Qs(9,t);break;case 1:dl(e,t,a,l);break;case 3:dl(e,t,a,l),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Rs(e)));break;case 12:if(s&2048){dl(e,t,a,l),e=t.stateNode;try{var i=t.memoizedProps,c=i.id,d=i.onPostCommit;typeof d=="function"&&d(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(p){bt(t,t.return,p)}}else dl(e,t,a,l);break;case 31:dl(e,t,a,l);break;case 13:dl(e,t,a,l);break;case 23:break;case 22:i=t.stateNode,c=t.alternate,t.memoizedState!==null?i._visibility&2?dl(e,t,a,l):Js(e,t):i._visibility&2?dl(e,t,a,l):(i._visibility|=2,cs(e,t,a,l,(t.subtreeFlags&10256)!==0||!1)),s&2048&&Hr(c,t);break;case 24:dl(e,t,a,l),s&2048&&Br(t.alternate,t);break;default:dl(e,t,a,l)}}function cs(e,t,a,l,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var i=e,c=t,d=a,p=l,O=c.flags;switch(c.tag){case 0:case 11:case 15:cs(i,c,d,p,s),Qs(8,c);break;case 23:break;case 22:var Z=c.stateNode;c.memoizedState!==null?Z._visibility&2?cs(i,c,d,p,s):Js(i,c):(Z._visibility|=2,cs(i,c,d,p,s)),s&&O&2048&&Hr(c.alternate,c);break;case 24:cs(i,c,d,p,s),s&&O&2048&&Br(c.alternate,c);break;default:cs(i,c,d,p,s)}t=t.sibling}}function Js(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,s=l.flags;switch(l.tag){case 22:Js(a,l),s&2048&&Hr(l.alternate,l);break;case 24:Js(a,l),s&2048&&Br(l.alternate,l);break;default:Js(a,l)}t=t.sibling}}var $s=8192;function rs(e,t,a){if(e.subtreeFlags&$s)for(e=e.child;e!==null;)Fd(e,t,a),e=e.sibling}function Fd(e,t,a){switch(e.tag){case 26:rs(e,t,a),e.flags&$s&&e.memoizedState!==null&&Im(a,ul,e.memoizedState,e.memoizedProps);break;case 5:rs(e,t,a);break;case 3:case 4:var l=ul;ul=nc(e.stateNode.containerInfo),rs(e,t,a),ul=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=$s,$s=16777216,rs(e,t,a),$s=l):rs(e,t,a));break;default:rs(e,t,a)}}function Id(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ws(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];oa=l,ef(l,e)}Id(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Pd(e),e=e.sibling}function Pd(e){switch(e.tag){case 0:case 11:case 15:Ws(e),e.flags&2048&&nn(9,e,e.return);break;case 3:Ws(e);break;case 12:Ws(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Zi(e)):Ws(e);break;default:Ws(e)}}function Zi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];oa=l,ef(l,e)}Id(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:nn(8,t,t.return),Zi(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Zi(t));break;default:Zi(t)}e=e.sibling}}function ef(e,t){for(;oa!==null;){var a=oa;switch(a.tag){case 0:case 11:case 15:nn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Rs(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,oa=l;else e:for(a=e;oa!==null;){l=oa;var s=l.sibling,i=l.return;if(Gd(l),l===a){oa=null;break e}if(s!==null){s.return=i,oa=s;break e}oa=i}}}var hm={getCacheForType:function(e){var t=ma($t),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return ma($t).controller.signal}},mm=typeof WeakMap=="function"?WeakMap:Map,xt=0,Mt=null,at=null,nt=0,vt=0,Xa=null,sn=!1,os=!1,Yr=!1,Yl=0,Ht=0,cn=0,Yn=0,qr=0,Ga=0,us=0,Fs=null,La=null,Vr=!1,Qi=0,tf=0,Ki=1/0,Ji=null,rn=null,sa=0,on=null,ds=null,ql=0,Xr=0,Gr=null,af=null,Is=0,Zr=null;function Za(){return(xt&2)!==0&&nt!==0?nt&-nt:E.T!==null?Fr():bn()}function lf(){if(Ga===0)if((nt&536870912)===0||it){var e=Cl;Cl<<=1,(Cl&3932160)===0&&(Cl=262144),Ga=e}else Ga=536870912;return e=qa.current,e!==null&&(e.flags|=32),Ga}function Ra(e,t,a){(e===Mt&&(vt===2||vt===9)||e.cancelPendingCommit!==null)&&(fs(e,0),un(e,nt,Ga,!1)),Aa(e,a),((xt&2)===0||e!==Mt)&&(e===Mt&&((xt&2)===0&&(Yn|=a),Ht===4&&un(e,nt,Ga,!1)),Nl(e))}function nf(e,t,a){if((xt&6)!==0)throw Error(o(327));var l=!a&&(t&127)===0&&(t&e.expiredLanes)===0||qt(e,t),s=l?ym(e,t):Kr(e,t,!0),i=l;do{if(s===0){os&&!l&&un(e,t,0,!1);break}else{if(a=e.current.alternate,i&&!xm(a)){s=Kr(e,t,!1),i=!1;continue}if(s===2){if(i=t,e.errorRecoveryDisabledLanes&i)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var d=e;s=Fs;var p=d.current.memoizedState.isDehydrated;if(p&&(fs(d,c).flags|=256),c=Kr(d,c,!1),c!==2){if(Yr&&!p){d.errorRecoveryDisabledLanes|=i,Yn|=i,s=4;break e}i=La,La=s,i!==null&&(La===null?La=i:La.push.apply(La,i))}s=c}if(i=!1,s!==2)continue}}if(s===1){fs(e,0),un(e,t,0,!0);break}e:{switch(l=e,i=s,i){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:un(l,t,Ga,!sn);break e;case 2:La=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(s=Qi+300-jt(),10<s)){if(un(l,t,Ga,!sn),va(l,0,!0)!==0)break e;ql=t,l.timeoutHandle=kf(sf.bind(null,l,a,La,Ji,Vr,t,Ga,Yn,us,sn,i,"Throttled",-0,0),s);break e}sf(l,a,La,Ji,Vr,t,Ga,Yn,us,sn,i,null,-0,0)}}break}while(!0);Nl(e)}function sf(e,t,a,l,s,i,c,d,p,O,Z,P,H,q){if(e.timeoutHandle=-1,P=t.subtreeFlags,P&8192||(P&16785408)===16785408){P={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_e},Fd(t,i,P);var Te=(i&62914560)===i?Qi-jt():(i&4194048)===i?tf-jt():0;if(Te=Pm(P,Te),Te!==null){ql=i,e.cancelPendingCommit=Te(mf.bind(null,e,t,i,a,l,s,c,d,p,Z,P,null,H,q)),un(e,i,c,!O);return}}mf(e,t,i,a,l,s,c,d,p)}function xm(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var s=a[l],i=s.getSnapshot;s=s.value;try{if(!Ba(i(),s))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function un(e,t,a,l){t&=~qr,t&=~Yn,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var s=t;0<s;){var i=31-ht(s),c=1<<i;l[i]=-1,s&=~c}a!==0&&ba(e,a,t)}function $i(){return(xt&6)===0?(Ps(0),!1):!0}function Qr(){if(at!==null){if(vt===0)var e=at.return;else e=at,Dl=zn=null,rr(e),as=null,_s=0,e=at;for(;e!==null;)kd(e.alternate,e),e=e.return;at=null}}function fs(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,_m(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ql=0,Qr(),Mt=e,at=a=Tl(e.current,null),nt=t,vt=0,Xa=null,sn=!1,os=qt(e,t),Yr=!1,us=Ga=qr=Yn=cn=Ht=0,La=Fs=null,Vr=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var s=31-ht(l),i=1<<s;t|=e[s],l&=~i}return Yl=t,gi(),a}function cf(e,t){We=null,E.H=Xs,t===ts||t===wi?(t=Nu(),vt=3):t===Wc?(t=Nu(),vt=4):vt=t===wr?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Xa=t,at===null&&(Ht=1,Hi(e,Wa(t,e.current)))}function rf(){var e=qa.current;return e===null?!0:(nt&4194048)===nt?el===null:(nt&62914560)===nt||(nt&536870912)!==0?e===el:!1}function of(){var e=E.H;return E.H=Xs,e===null?Xs:e}function uf(){var e=E.A;return E.A=hm,e}function Wi(){Ht=4,sn||(nt&4194048)!==nt&&qa.current!==null||(os=!0),(cn&134217727)===0&&(Yn&134217727)===0||Mt===null||un(Mt,nt,Ga,!1)}function Kr(e,t,a){var l=xt;xt|=2;var s=of(),i=uf();(Mt!==e||nt!==t)&&(Ji=null,fs(e,t)),t=!1;var c=Ht;e:do try{if(vt!==0&&at!==null){var d=at,p=Xa;switch(vt){case 8:Qr(),c=6;break e;case 3:case 2:case 9:case 6:qa.current===null&&(t=!0);var O=vt;if(vt=0,Xa=null,hs(e,d,p,O),a&&os){c=0;break e}break;default:O=vt,vt=0,Xa=null,hs(e,d,p,O)}}gm(),c=Ht;break}catch(Z){cf(e,Z)}while(!0);return t&&e.shellSuspendCounter++,Dl=zn=null,xt=l,E.H=s,E.A=i,at===null&&(Mt=null,nt=0,gi()),c}function gm(){for(;at!==null;)df(at)}function ym(e,t){var a=xt;xt|=2;var l=of(),s=uf();Mt!==e||nt!==t?(Ji=null,Ki=jt()+500,fs(e,t)):os=qt(e,t);e:do try{if(vt!==0&&at!==null){t=at;var i=Xa;t:switch(vt){case 1:vt=0,Xa=null,hs(e,t,i,1);break;case 2:case 9:if(bu(i)){vt=0,Xa=null,ff(t);break}t=function(){vt!==2&&vt!==9||Mt!==e||(vt=7),Nl(e)},i.then(t,t);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:bu(i)?(vt=0,Xa=null,ff(t)):(vt=0,Xa=null,hs(e,t,i,7));break;case 5:var c=null;switch(at.tag){case 26:c=at.memoizedState;case 5:case 27:var d=at;if(c?Ff(c):d.stateNode.complete){vt=0,Xa=null;var p=d.sibling;if(p!==null)at=p;else{var O=d.return;O!==null?(at=O,Fi(O)):at=null}break t}}vt=0,Xa=null,hs(e,t,i,5);break;case 6:vt=0,Xa=null,hs(e,t,i,6);break;case 8:Qr(),Ht=6;break e;default:throw Error(o(462))}}pm();break}catch(Z){cf(e,Z)}while(!0);return Dl=zn=null,E.H=l,E.A=s,xt=a,at!==null?0:(Mt=null,nt=0,gi(),Ht)}function pm(){for(;at!==null&&!_a();)df(at)}function df(e){var t=Od(e.alternate,e,Yl);e.memoizedProps=e.pendingProps,t===null?Fi(e):at=t}function ff(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Td(a,t,t.pendingProps,t.type,void 0,nt);break;case 11:t=Td(a,t,t.pendingProps,t.type.render,t.ref,nt);break;case 5:rr(t);default:kd(a,t),t=at=ou(t,Yl),t=Od(a,t,Yl)}e.memoizedProps=e.pendingProps,t===null?Fi(e):at=t}function hs(e,t,a,l){Dl=zn=null,rr(t),as=null,_s=0;var s=t.return;try{if(im(e,s,t,a,nt)){Ht=1,Hi(e,Wa(a,e.current)),at=null;return}}catch(i){if(s!==null)throw at=s,i;Ht=1,Hi(e,Wa(a,e.current)),at=null;return}t.flags&32768?(it||l===1?e=!0:os||(nt&536870912)!==0?e=!1:(sn=e=!0,(l===2||l===9||l===3||l===6)&&(l=qa.current,l!==null&&l.tag===13&&(l.flags|=16384))),hf(t,e)):Fi(t)}function Fi(e){var t=e;do{if((t.flags&32768)!==0){hf(t,sn);return}e=t.return;var a=om(t.alternate,t,Yl);if(a!==null){at=a;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);Ht===0&&(Ht=5)}function hf(e,t){do{var a=um(e.alternate,e);if(a!==null){a.flags&=32767,at=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){at=e;return}at=e=a}while(e!==null);Ht=6,at=null}function mf(e,t,a,l,s,i,c,d,p){e.cancelPendingCommit=null;do Ii();while(sa!==0);if((xt&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,i|=_c,Ql(e,a,i,c,d,p),e===Mt&&(at=Mt=null,nt=0),ds=t,on=e,ql=a,Xr=i,Gr=s,af=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Nm(Ka,function(){return vf(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=E.T,E.T=null,s=le.p,le.p=2,c=xt,xt|=4;try{dm(e,t,a)}finally{xt=c,le.p=s,E.T=l}}sa=1,xf(),gf(),yf()}}function xf(){if(sa===1){sa=0;var e=on,t=ds,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=E.T,E.T=null;var l=le.p;le.p=2;var s=xt;xt|=4;try{Jd(t,e);var i=so,c=eu(e.containerInfo),d=i.focusedElem,p=i.selectionRange;if(c!==d&&d&&d.ownerDocument&&Po(d.ownerDocument.documentElement,d)){if(p!==null&&Dc(d)){var O=p.start,Z=p.end;if(Z===void 0&&(Z=O),"selectionStart"in d)d.selectionStart=O,d.selectionEnd=Math.min(Z,d.value.length);else{var P=d.ownerDocument||document,H=P&&P.defaultView||window;if(H.getSelection){var q=H.getSelection(),Te=d.textContent.length,He=Math.min(p.start,Te),Ct=p.end===void 0?He:Math.min(p.end,Te);!q.extend&&He>Ct&&(c=Ct,Ct=He,He=c);var A=Io(d,He),w=Io(d,Ct);if(A&&w&&(q.rangeCount!==1||q.anchorNode!==A.node||q.anchorOffset!==A.offset||q.focusNode!==w.node||q.focusOffset!==w.offset)){var R=P.createRange();R.setStart(A.node,A.offset),q.removeAllRanges(),He>Ct?(q.addRange(R),q.extend(w.node,w.offset)):(R.setEnd(w.node,w.offset),q.addRange(R))}}}}for(P=[],q=d;q=q.parentNode;)q.nodeType===1&&P.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<P.length;d++){var W=P[d];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}uc=!!no,so=no=null}finally{xt=s,le.p=l,E.T=a}}e.current=t,sa=2}}function gf(){if(sa===2){sa=0;var e=on,t=ds,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=E.T,E.T=null;var l=le.p;le.p=2;var s=xt;xt|=4;try{Xd(e,t.alternate,t)}finally{xt=s,le.p=l,E.T=a}}sa=3}}function yf(){if(sa===4||sa===3){sa=0,Ma();var e=on,t=ds,a=ql,l=af;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?sa=5:(sa=0,ds=on=null,pf(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(rn=null),aa(a),t=t.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Ja,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=E.T,s=le.p,le.p=2,E.T=null;try{for(var i=e.onRecoverableError,c=0;c<l.length;c++){var d=l[c];i(d.value,{componentStack:d.stack})}}finally{E.T=t,le.p=s}}(ql&3)!==0&&Ii(),Nl(e),s=e.pendingLanes,(a&261930)!==0&&(s&42)!==0?e===Zr?Is++:(Is=0,Zr=e):Is=0,Ps(0)}}function pf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Rs(t)))}function Ii(){return xf(),gf(),yf(),vf()}function vf(){if(sa!==5)return!1;var e=on,t=Xr;Xr=0;var a=aa(ql),l=E.T,s=le.p;try{le.p=32>a?32:a,E.T=null,a=Gr,Gr=null;var i=on,c=ql;if(sa=0,ds=on=null,ql=0,(xt&6)!==0)throw Error(o(331));var d=xt;if(xt|=4,Pd(i.current),Wd(i,i.current,c,a),xt=d,Ps(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Ja,i)}catch{}return!0}finally{le.p=s,E.T=l,pf(e,t)}}function bf(e,t,a){t=Wa(a,t),t=Sr(e.stateNode,t,2),e=tn(e,t,2),e!==null&&(Aa(e,2),Nl(e))}function bt(e,t,a){if(e.tag===3)bf(e,e,a);else for(;t!==null;){if(t.tag===3){bf(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(rn===null||!rn.has(l))){e=Wa(a,e),a=bd(2),l=tn(t,a,2),l!==null&&(jd(a,l,t,e),Aa(l,2),Nl(l));break}}t=t.return}}function Jr(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new mm;var s=new Set;l.set(t,s)}else s=l.get(t),s===void 0&&(s=new Set,l.set(t,s));s.has(a)||(Yr=!0,s.add(a),e=vm.bind(null,e,t,a),t.then(e,e))}function vm(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Mt===e&&(nt&a)===a&&(Ht===4||Ht===3&&(nt&62914560)===nt&&300>jt()-Qi?(xt&2)===0&&fs(e,0):qr|=a,us===nt&&(us=0)),Nl(e)}function jf(e,t){t===0&&(t=Ua()),e=Tn(e,t),e!==null&&(Aa(e,t),Nl(e))}function bm(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),jf(e,a)}function jm(e,t){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,s=e.memoizedState;s!==null&&(a=s.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(t),jf(e,a)}function Nm(e,t){return nl(e,t)}var Pi=null,ms=null,$r=!1,ec=!1,Wr=!1,dn=0;function Nl(e){e!==ms&&e.next===null&&(ms===null?Pi=ms=e:ms=ms.next=e),ec=!0,$r||($r=!0,wm())}function Ps(e,t){if(!Wr&&ec){Wr=!0;do for(var a=!1,l=Pi;l!==null;){if(e!==0){var s=l.pendingLanes;if(s===0)var i=0;else{var c=l.suspendedLanes,d=l.pingedLanes;i=(1<<31-ht(42|e)+1)-1,i&=s&~(c&~d),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(a=!0,Cf(l,i))}else i=nt,i=va(l,l===Mt?i:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(i&3)===0||qt(l,i)||(a=!0,Cf(l,i));l=l.next}while(a);Wr=!1}}function Sm(){Nf()}function Nf(){ec=$r=!1;var e=0;dn!==0&&Om()&&(e=dn);for(var t=jt(),a=null,l=Pi;l!==null;){var s=l.next,i=Sf(l,t);i===0?(l.next=null,a===null?Pi=s:a.next=s,s===null&&(ms=a)):(a=l,(e!==0||(i&3)!==0)&&(ec=!0)),l=s}sa!==0&&sa!==5||Ps(e),dn!==0&&(dn=0)}function Sf(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var c=31-ht(i),d=1<<c,p=s[c];p===-1?((d&a)===0||(d&l)!==0)&&(s[c]=Zl(d,t)):p<=t&&(e.expiredLanes|=d),i&=~d}if(t=Mt,a=nt,a=va(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(vt===2||vt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&hl(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||qt(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&hl(l),aa(a)){case 2:case 8:a=ua;break;case 32:a=Ka;break;case 268435456:a=da;break;default:a=Ka}return l=wf.bind(null,e),a=nl(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&hl(l),e.callbackPriority=2,e.callbackNode=null,2}function wf(e,t){if(sa!==0&&sa!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ii()&&e.callbackNode!==a)return null;var l=nt;return l=va(e,e===Mt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(nf(e,l,t),Sf(e,jt()),e.callbackNode!=null&&e.callbackNode===a?wf.bind(null,e):null)}function Cf(e,t){if(Ii())return null;nf(e,t,!0)}function wm(){km(function(){(xt&6)!==0?nl(ml,Sm):Nf()})}function Fr(){if(dn===0){var e=Pn;e===0&&(e=ra,ra<<=1,(ra&261888)===0&&(ra=256)),dn=e}return dn}function Mf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Qe(""+e)}function Af(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Cm(e,t,a,l,s){if(t==="submit"&&a&&a.stateNode===s){var i=Mf((s[Jt]||null).action),c=l.submitter;c&&(t=(t=c[Jt]||null)?Mf(t.formAction):c.getAttribute("formAction"),t!==null&&(i=t,c=null));var d=new Al("action","action",null,l,s);e.push({event:d,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(dn!==0){var p=c?Af(s,c):new FormData(s);yr(a,{pending:!0,data:p,method:s.method,action:i},null,p)}}else typeof i=="function"&&(d.preventDefault(),p=c?Af(s,c):new FormData(s),yr(a,{pending:!0,data:p,method:s.method,action:i},i,p))},currentTarget:s}]})}}for(var Ir=0;Ir<Oc.length;Ir++){var Pr=Oc[Ir],Mm=Pr.toLowerCase(),Am=Pr[0].toUpperCase()+Pr.slice(1);ol(Mm,"on"+Am)}ol(lu,"onAnimationEnd"),ol(nu,"onAnimationIteration"),ol(su,"onAnimationStart"),ol("dblclick","onDoubleClick"),ol("focusin","onFocus"),ol("focusout","onBlur"),ol(Xh,"onTransitionRun"),ol(Gh,"onTransitionStart"),ol(Zh,"onTransitionCancel"),ol(iu,"onTransitionEnd"),oe("onMouseEnter",["mouseout","mouseover"]),oe("onMouseLeave",["mouseout","mouseover"]),oe("onPointerEnter",["pointerout","pointerover"]),oe("onPointerLeave",["pointerout","pointerover"]),ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ei));function Tf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],s=l.event;l=l.listeners;e:{var i=void 0;if(t)for(var c=l.length-1;0<=c;c--){var d=l[c],p=d.instance,O=d.currentTarget;if(d=d.listener,p!==i&&s.isPropagationStopped())break e;i=d,s.currentTarget=O;try{i(s)}catch(Z){xi(Z)}s.currentTarget=null,i=p}else for(c=0;c<l.length;c++){if(d=l[c],p=d.instance,O=d.currentTarget,d=d.listener,p!==i&&s.isPropagationStopped())break e;i=d,s.currentTarget=O;try{i(s)}catch(Z){xi(Z)}s.currentTarget=null,i=p}}}}function lt(e,t){var a=t[Jl];a===void 0&&(a=t[Jl]=new Set);var l=e+"__bubble";a.has(l)||(Ef(t,e,2,!1),a.add(l))}function eo(e,t,a){var l=0;t&&(l|=4),Ef(a,e,l,t)}var tc="_reactListening"+Math.random().toString(36).slice(2);function to(e){if(!e[tc]){e[tc]=!0,pe.forEach(function(a){a!=="selectionchange"&&(Tm.has(a)||eo(a,!1,e),eo(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tc]||(t[tc]=!0,eo("selectionchange",!1,t))}}function Ef(e,t,a,l){switch(n0(t)){case 2:var s=ax;break;case 8:s=lx;break;default:s=yo}a=s.bind(null,t,a,e),s=void 0,!Xt||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),l?s!==void 0?e.addEventListener(t,a,{capture:!0,passive:s}):e.addEventListener(t,a,!0):s!==void 0?e.addEventListener(t,a,{passive:s}):e.addEventListener(t,a,!1)}function ao(e,t,a,l,s){var i=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var c=l.tag;if(c===3||c===4){var d=l.stateNode.containerInfo;if(d===s)break;if(c===4)for(c=l.return;c!==null;){var p=c.tag;if((p===3||p===4)&&c.stateNode.containerInfo===s)return;c=c.return}for(;d!==null;){if(c=Q(d),c===null)return;if(p=c.tag,p===5||p===6||p===26||p===27){l=i=c;continue e}d=d.parentNode}}l=l.return}la(function(){var O=i,Z=Pe(a),P=[];e:{var H=cu.get(e);if(H!==void 0){var q=Al,Te=e;switch(e){case"keypress":if(wn(a)===0)break e;case"keydown":case"keyup":q=jh;break;case"focusin":Te="focus",q=Cc;break;case"focusout":Te="blur",q=Cc;break;case"beforeblur":case"afterblur":q=Cc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=ko;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=wh;break;case lu:case nu:case su:q=fh;break;case iu:q=Mh;break;case"scroll":case"scrollend":q=wc;break;case"wheel":q=Th;break;case"copy":case"cut":case"paste":q=mh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Ho;break;case"toggle":case"beforetoggle":q=Dh}var He=(t&4)!==0,Ct=!He&&(e==="scroll"||e==="scrollend"),A=He?H!==null?H+"Capture":null:H;He=[];for(var w=O,R;w!==null;){var W=w;if(R=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||R===null||A===null||(W=Lt(w,A),W!=null&&He.push(ti(w,W,R))),Ct)break;w=w.return}0<He.length&&(H=new q(H,Te,null,a,Z),P.push({event:H,listeners:He}))}}if((t&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",H&&a!==Je&&(Te=a.relatedTarget||a.fromElement)&&(Q(Te)||Te[Sa]))break e;if((q||H)&&(H=Z.window===Z?Z:(H=Z.ownerDocument)?H.defaultView||H.parentWindow:window,q?(Te=a.relatedTarget||a.toElement,q=O,Te=Te?Q(Te):null,Te!==null&&(Ct=v(Te),He=Te.tag,Te!==Ct||He!==5&&He!==27&&He!==6)&&(Te=null)):(q=null,Te=O),q!==Te)){if(He=ko,W="onMouseLeave",A="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(He=Ho,W="onPointerLeave",A="onPointerEnter",w="pointer"),Ct=q==null?H:ee(q),R=Te==null?H:ee(Te),H=new He(W,w+"leave",q,a,Z),H.target=Ct,H.relatedTarget=R,W=null,Q(Z)===O&&(He=new He(A,w+"enter",Te,a,Z),He.target=R,He.relatedTarget=Ct,W=He),Ct=W,q&&Te)t:{for(He=Em,A=q,w=Te,R=0,W=A;W;W=He(W))R++;W=0;for(var Ue=w;Ue;Ue=He(Ue))W++;for(;0<R-W;)A=He(A),R--;for(;0<W-R;)w=He(w),W--;for(;R--;){if(A===w||w!==null&&A===w.alternate){He=A;break t}A=He(A),w=He(w)}He=null}else He=null;q!==null&&Df(P,H,q,He,!1),Te!==null&&Ct!==null&&Df(P,Ct,Te,He,!0)}}e:{if(H=O?ee(O):window,q=H.nodeName&&H.nodeName.toLowerCase(),q==="select"||q==="input"&&H.type==="file")var dt=Qo;else if(Go(H))if(Ko)dt=Yh;else{dt=Hh;var Re=Uh}else q=H.nodeName,!q||q.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?O&&tt(O.elementType)&&(dt=Qo):dt=Bh;if(dt&&(dt=dt(e,O))){Zo(P,dt,a,Z);break e}Re&&Re(e,H,O),e==="focusout"&&O&&H.type==="number"&&O.memoizedProps.value!=null&&N(H,"number",H.value)}switch(Re=O?ee(O):window,e){case"focusin":(Go(Re)||Re.contentEditable==="true")&&(Zn=Re,zc=O,Ds=null);break;case"focusout":Ds=zc=Zn=null;break;case"mousedown":Lc=!0;break;case"contextmenu":case"mouseup":case"dragend":Lc=!1,tu(P,a,Z);break;case"selectionchange":if(Vh)break;case"keydown":case"keyup":tu(P,a,Z)}var Fe;if(Ac)e:{switch(e){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Gn?Vo(e,a)&&(st="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(st="onCompositionStart");st&&(Bo&&a.locale!=="ko"&&(Gn||st!=="onCompositionStart"?st==="onCompositionEnd"&&Gn&&(Fe=Sn()):(Rt=Z,yl="value"in Rt?Rt.value:Rt.textContent,Gn=!0)),Re=ac(O,st),0<Re.length&&(st=new Uo(st,e,null,a,Z),P.push({event:st,listeners:Re}),Fe?st.data=Fe:(Fe=Xo(a),Fe!==null&&(st.data=Fe)))),(Fe=Lh?Rh(e,a):Oh(e,a))&&(st=ac(O,"onBeforeInput"),0<st.length&&(Re=new Uo("onBeforeInput","beforeinput",null,a,Z),P.push({event:Re,listeners:st}),Re.data=Fe)),Cm(P,e,O,a,Z)}Tf(P,t)})}function ti(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ac(e,t){for(var a=t+"Capture",l=[];e!==null;){var s=e,i=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||i===null||(s=Lt(e,a),s!=null&&l.unshift(ti(e,s,i)),s=Lt(e,t),s!=null&&l.push(ti(e,s,i))),e.tag===3)return l;e=e.return}return[]}function Em(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Df(e,t,a,l,s){for(var i=t._reactName,c=[];a!==null&&a!==l;){var d=a,p=d.alternate,O=d.stateNode;if(d=d.tag,p!==null&&p===l)break;d!==5&&d!==26&&d!==27||O===null||(p=O,s?(O=Lt(a,i),O!=null&&c.unshift(ti(a,O,p))):s||(O=Lt(a,i),O!=null&&c.push(ti(a,O,p)))),a=a.return}c.length!==0&&e.push({event:t,listeners:c})}var Dm=/\r\n?/g,zm=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(Dm,`
`).replace(zm,"")}function Lf(e,t){return t=zf(t),zf(e)===t}function wt(e,t,a,l,s,i){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Ae(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Ae(e,""+l);break;case"className":ve(e,"class",l);break;case"tabIndex":ve(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ve(e,a,l);break;case"style":Be(e,l,i);break;case"data":if(t!=="object"){ve(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Qe(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(a==="formAction"?(t!=="input"&&wt(e,t,"name",s.name,s,null),wt(e,t,"formEncType",s.formEncType,s,null),wt(e,t,"formMethod",s.formMethod,s,null),wt(e,t,"formTarget",s.formTarget,s,null)):(wt(e,t,"encType",s.encType,s,null),wt(e,t,"method",s.method,s,null),wt(e,t,"target",s.target,s,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Qe(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=_e);break;case"onScroll":l!=null&&lt("scroll",e);break;case"onScrollEnd":l!=null&&lt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(a=l.__html,a!=null){if(s.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Qe(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":lt("beforetoggle",e),lt("toggle",e),J(e,"popover",l);break;case"xlinkActuate":Xe(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Xe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Xe(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Xe(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Xe(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Xe(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Xe(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Xe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Xe(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":J(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ce.get(a)||a,J(e,a,l))}}function lo(e,t,a,l,s,i){switch(a){case"style":Be(e,l,i);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(a=l.__html,a!=null){if(s.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Ae(e,l):(typeof l=="number"||typeof l=="bigint")&&Ae(e,""+l);break;case"onScroll":l!=null&&lt("scroll",e);break;case"onScrollEnd":l!=null&&lt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=_e);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ie.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(s=a.endsWith("Capture"),t=a.slice(2,s?a.length-7:void 0),i=e[Jt]||null,i=i!=null?i[a]:null,typeof i=="function"&&e.removeEventListener(t,i,s),typeof l=="function")){typeof i!="function"&&i!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,s);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):J(e,a,l)}}}function ga(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",e),lt("load",e);var l=!1,s=!1,i;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];if(c!=null)switch(i){case"src":l=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:wt(e,t,i,c,a,null)}}s&&wt(e,t,"srcSet",a.srcSet,a,null),l&&wt(e,t,"src",a.src,a,null);return;case"input":lt("invalid",e);var d=i=c=s=null,p=null,O=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":s=Z;break;case"type":c=Z;break;case"checked":p=Z;break;case"defaultChecked":O=Z;break;case"value":i=Z;break;case"defaultValue":d=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(o(137,t));break;default:wt(e,t,l,Z,a,null)}}zt(e,i,d,p,O,c,s,!1);return;case"select":lt("invalid",e),l=c=i=null;for(s in a)if(a.hasOwnProperty(s)&&(d=a[s],d!=null))switch(s){case"value":i=d;break;case"defaultValue":c=d;break;case"multiple":l=d;default:wt(e,t,s,d,a,null)}t=i,a=c,e.multiple=!!l,t!=null?X(e,!!l,t,!1):a!=null&&X(e,!!l,a,!0);return;case"textarea":lt("invalid",e),i=s=l=null;for(c in a)if(a.hasOwnProperty(c)&&(d=a[c],d!=null))switch(c){case"value":l=d;break;case"defaultValue":s=d;break;case"children":i=d;break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:wt(e,t,c,d,a,null)}fe(e,l,s,i);return;case"option":for(p in a)if(a.hasOwnProperty(p)&&(l=a[p],l!=null))switch(p){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:wt(e,t,p,l,a,null)}return;case"dialog":lt("beforetoggle",e),lt("toggle",e),lt("cancel",e),lt("close",e);break;case"iframe":case"object":lt("load",e);break;case"video":case"audio":for(l=0;l<ei.length;l++)lt(ei[l],e);break;case"image":lt("error",e),lt("load",e);break;case"details":lt("toggle",e);break;case"embed":case"source":case"link":lt("error",e),lt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:wt(e,t,O,l,a,null)}return;default:if(tt(t)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&lo(e,t,Z,l,a,void 0));return}}for(d in a)a.hasOwnProperty(d)&&(l=a[d],l!=null&&wt(e,t,d,l,a,null))}function Lm(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,c=null,d=null,p=null,O=null,Z=null;for(q in a){var P=a[q];if(a.hasOwnProperty(q)&&P!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":p=P;default:l.hasOwnProperty(q)||wt(e,t,q,null,l,P)}}for(var H in l){var q=l[H];if(P=a[H],l.hasOwnProperty(H)&&(q!=null||P!=null))switch(H){case"type":i=q;break;case"name":s=q;break;case"checked":O=q;break;case"defaultChecked":Z=q;break;case"value":c=q;break;case"defaultValue":d=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(o(137,t));break;default:q!==P&&wt(e,t,H,q,l,P)}}pt(e,c,d,p,O,Z,i,s);return;case"select":q=c=d=H=null;for(i in a)if(p=a[i],a.hasOwnProperty(i)&&p!=null)switch(i){case"value":break;case"multiple":q=p;default:l.hasOwnProperty(i)||wt(e,t,i,null,l,p)}for(s in l)if(i=l[s],p=a[s],l.hasOwnProperty(s)&&(i!=null||p!=null))switch(s){case"value":H=i;break;case"defaultValue":d=i;break;case"multiple":c=i;default:i!==p&&wt(e,t,s,i,l,p)}t=d,a=c,l=q,H!=null?X(e,!!a,H,!1):!!l!=!!a&&(t!=null?X(e,!!a,t,!0):X(e,!!a,a?[]:"",!1));return;case"textarea":q=H=null;for(d in a)if(s=a[d],a.hasOwnProperty(d)&&s!=null&&!l.hasOwnProperty(d))switch(d){case"value":break;case"children":break;default:wt(e,t,d,null,l,s)}for(c in l)if(s=l[c],i=a[c],l.hasOwnProperty(c)&&(s!=null||i!=null))switch(c){case"value":H=s;break;case"defaultValue":q=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(o(91));break;default:s!==i&&wt(e,t,c,s,l,i)}I(e,H,q);return;case"option":for(var Te in a)if(H=a[Te],a.hasOwnProperty(Te)&&H!=null&&!l.hasOwnProperty(Te))switch(Te){case"selected":e.selected=!1;break;default:wt(e,t,Te,null,l,H)}for(p in l)if(H=l[p],q=a[p],l.hasOwnProperty(p)&&H!==q&&(H!=null||q!=null))switch(p){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:wt(e,t,p,H,l,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in a)H=a[He],a.hasOwnProperty(He)&&H!=null&&!l.hasOwnProperty(He)&&wt(e,t,He,null,l,H);for(O in l)if(H=l[O],q=a[O],l.hasOwnProperty(O)&&H!==q&&(H!=null||q!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,t));break;default:wt(e,t,O,H,l,q)}return;default:if(tt(t)){for(var Ct in a)H=a[Ct],a.hasOwnProperty(Ct)&&H!==void 0&&!l.hasOwnProperty(Ct)&&lo(e,t,Ct,void 0,l,H);for(Z in l)H=l[Z],q=a[Z],!l.hasOwnProperty(Z)||H===q||H===void 0&&q===void 0||lo(e,t,Z,H,l,q);return}}for(var A in a)H=a[A],a.hasOwnProperty(A)&&H!=null&&!l.hasOwnProperty(A)&&wt(e,t,A,null,l,H);for(P in l)H=l[P],q=a[P],!l.hasOwnProperty(P)||H===q||H==null&&q==null||wt(e,t,P,H,l,q)}function Rf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rm(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var s=a[l],i=s.transferSize,c=s.initiatorType,d=s.duration;if(i&&d&&Rf(c)){for(c=0,d=s.responseEnd,l+=1;l<a.length;l++){var p=a[l],O=p.startTime;if(O>d)break;var Z=p.transferSize,P=p.initiatorType;Z&&Rf(P)&&(p=p.responseEnd,c+=Z*(p<d?1:(d-O)/(p-O)))}if(--l,t+=8*(i+c)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var no=null,so=null;function lc(e){return e.nodeType===9?e:e.ownerDocument}function Of(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _f(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function io(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var co=null;function Om(){var e=window.event;return e&&e.type==="popstate"?e===co?!1:(co=e,!0):(co=null,!1)}var kf=typeof setTimeout=="function"?setTimeout:void 0,_m=typeof clearTimeout=="function"?clearTimeout:void 0,Uf=typeof Promise=="function"?Promise:void 0,km=typeof queueMicrotask=="function"?queueMicrotask:typeof Uf<"u"?function(e){return Uf.resolve(null).then(e).catch(Um)}:kf;function Um(e){setTimeout(function(){throw e})}function fn(e){return e==="head"}function Hf(e,t){var a=t,l=0;do{var s=a.nextSibling;if(e.removeChild(a),s&&s.nodeType===8)if(a=s.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(s),ps(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ai(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ai(a);for(var i=a.firstChild;i;){var c=i.nextSibling,d=i.nodeName;i[G]||d==="SCRIPT"||d==="STYLE"||d==="LINK"&&i.rel.toLowerCase()==="stylesheet"||a.removeChild(i),i=c}}else a==="body"&&ai(e.ownerDocument.body);a=s}while(a);ps(t)}function Bf(e,t){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function ro(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ro(a),C(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Hm(e,t,a,l){for(;e.nodeType===1;){var s=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[G])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=tl(e.nextSibling),e===null)break}return null}function Bm(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=tl(e.nextSibling),e===null))return null;return e}function Yf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=tl(e.nextSibling),e===null))return null;return e}function oo(e){return e.data==="$?"||e.data==="$~"}function uo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ym(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function tl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var fo=null;function qf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return tl(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Vf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Xf(e,t,a){switch(t=lc(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function ai(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);C(e)}var al=new Map,Gf=new Set;function nc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Vl=le.d;le.d={f:qm,r:Vm,D:Xm,C:Gm,L:Zm,m:Qm,X:Jm,S:Km,M:$m};function qm(){var e=Vl.f(),t=$i();return e||t}function Vm(e){var t=h(e);t!==null&&t.tag===5&&t.type==="form"?id(t):Vl.r(e)}var xs=typeof document>"u"?null:document;function Zf(e,t,a){var l=xs;if(l&&typeof t=="string"&&t){var s=ct(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof a=="string"&&(s+='[crossorigin="'+a+'"]'),Gf.has(s)||(Gf.add(s),e={rel:e,crossOrigin:a,href:t},l.querySelector(s)===null&&(t=l.createElement("link"),ga(t,"link",e),$(t),l.head.appendChild(t)))}}function Xm(e){Vl.D(e),Zf("dns-prefetch",e,null)}function Gm(e,t){Vl.C(e,t),Zf("preconnect",e,t)}function Zm(e,t,a){Vl.L(e,t,a);var l=xs;if(l&&e&&t){var s='link[rel="preload"][as="'+ct(t)+'"]';t==="image"&&a&&a.imageSrcSet?(s+='[imagesrcset="'+ct(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(s+='[imagesizes="'+ct(a.imageSizes)+'"]')):s+='[href="'+ct(e)+'"]';var i=s;switch(t){case"style":i=gs(e);break;case"script":i=ys(e)}al.has(i)||(e=j({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),al.set(i,e),l.querySelector(s)!==null||t==="style"&&l.querySelector(li(i))||t==="script"&&l.querySelector(ni(i))||(t=l.createElement("link"),ga(t,"link",e),$(t),l.head.appendChild(t)))}}function Qm(e,t){Vl.m(e,t);var a=xs;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+ct(l)+'"][href="'+ct(e)+'"]',i=s;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=ys(e)}if(!al.has(i)&&(e=j({rel:"modulepreload",href:e},t),al.set(i,e),a.querySelector(s)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ni(i)))return}l=a.createElement("link"),ga(l,"link",e),$(l),a.head.appendChild(l)}}}function Km(e,t,a){Vl.S(e,t,a);var l=xs;if(l&&e){var s=me(l).hoistableStyles,i=gs(e);t=t||"default";var c=s.get(i);if(!c){var d={loading:0,preload:null};if(c=l.querySelector(li(i)))d.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":t},a),(a=al.get(i))&&ho(e,a);var p=c=l.createElement("link");$(p),ga(p,"link",e),p._p=new Promise(function(O,Z){p.onload=O,p.onerror=Z}),p.addEventListener("load",function(){d.loading|=1}),p.addEventListener("error",function(){d.loading|=2}),d.loading|=4,sc(c,t,l)}c={type:"stylesheet",instance:c,count:1,state:d},s.set(i,c)}}}function Jm(e,t){Vl.X(e,t);var a=xs;if(a&&e){var l=me(a).hoistableScripts,s=ys(e),i=l.get(s);i||(i=a.querySelector(ni(s)),i||(e=j({src:e,async:!0},t),(t=al.get(s))&&mo(e,t),i=a.createElement("script"),$(i),ga(i,"link",e),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},l.set(s,i))}}function $m(e,t){Vl.M(e,t);var a=xs;if(a&&e){var l=me(a).hoistableScripts,s=ys(e),i=l.get(s);i||(i=a.querySelector(ni(s)),i||(e=j({src:e,async:!0,type:"module"},t),(t=al.get(s))&&mo(e,t),i=a.createElement("script"),$(i),ga(i,"link",e),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},l.set(s,i))}}function Qf(e,t,a,l){var s=(s=ze.current)?nc(s):null;if(!s)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=gs(a.href),a=me(s).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=gs(a.href);var i=me(s).hoistableStyles,c=i.get(e);if(c||(s=s.ownerDocument||s,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,c),(i=s.querySelector(li(e)))&&!i._p&&(c.instance=i,c.state.loading=5),al.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},al.set(e,a),i||Wm(s,e,a,c.state))),t&&l===null)throw Error(o(528,""));return c}if(t&&l!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ys(a),a=me(s).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function gs(e){return'href="'+ct(e)+'"'}function li(e){return'link[rel="stylesheet"]['+e+"]"}function Kf(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function Wm(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ga(t,"link",a),$(t),e.head.appendChild(t))}function ys(e){return'[src="'+ct(e)+'"]'}function ni(e){return"script[async]"+e}function Jf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+ct(a.href)+'"]');if(l)return t.instance=l,$(l),l;var s=j({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),$(l),ga(l,"style",s),sc(l,a.precedence,e),t.instance=l;case"stylesheet":s=gs(a.href);var i=e.querySelector(li(s));if(i)return t.state.loading|=4,t.instance=i,$(i),i;l=Kf(a),(s=al.get(s))&&ho(l,s),i=(e.ownerDocument||e).createElement("link"),$(i);var c=i;return c._p=new Promise(function(d,p){c.onload=d,c.onerror=p}),ga(i,"link",l),t.state.loading|=4,sc(i,a.precedence,e),t.instance=i;case"script":return i=ys(a.src),(s=e.querySelector(ni(i)))?(t.instance=s,$(s),s):(l=a,(s=al.get(i))&&(l=j({},a),mo(l,s)),e=e.ownerDocument||e,s=e.createElement("script"),$(s),ga(s,"link",l),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,sc(l,a.precedence,e));return t.instance}function sc(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=l.length?l[l.length-1]:null,i=s,c=0;c<l.length;c++){var d=l[c];if(d.dataset.precedence===t)i=d;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function ho(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function mo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ic=null;function $f(e,t,a){if(ic===null){var l=new Map,s=ic=new Map;s.set(a,l)}else s=ic,l=s.get(a),l||(l=new Map,s.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),s=0;s<a.length;s++){var i=a[s];if(!(i[G]||i[kt]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var c=i.getAttribute(t)||"";c=e+c;var d=l.get(c);d?d.push(i):l.set(c,[i])}}return l}function Wf(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Fm(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ff(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Im(e,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var s=gs(l.href),i=t.querySelector(li(s));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=cc.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=i,$(i);return}i=t.ownerDocument||t,l=Kf(l),(s=al.get(s))&&ho(l,s),i=i.createElement("link"),$(i);var c=i;c._p=new Promise(function(d,p){c.onload=d,c.onerror=p}),ga(i,"link",l),a.instance=i}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=cc.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var xo=0;function Pm(e,t){return e.stylesheets&&e.count===0&&oc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&oc(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4+t);0<e.imgBytes&&xo===0&&(xo=62500*Rm());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&oc(e,e.stylesheets),e.unsuspend)){var i=e.unsuspend;e.unsuspend=null,i()}},(e.imgBytes>xo?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(s)}}:null}function cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)oc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var rc=null;function oc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,rc=new Map,t.forEach(ex,e),rc=null,cc.call(e))}function ex(e,t){if(!(t.state.loading&4)){var a=rc.get(e);if(a)var l=a.get(null);else{a=new Map,rc.set(e,a);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var c=s[i];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(a.set(c.dataset.precedence,c),l=c)}l&&a.set(null,l)}s=t.instance,c=s.getAttribute("data-precedence"),i=a.get(c)||l,i===l&&a.set(null,s),a.set(c,s),this.count++,l=cc.bind(this),s.addEventListener("load",l),s.addEventListener("error",l),i?i.parentNode.insertBefore(s,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var si={$$typeof:ue,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function tx(e,t,a,l,s,i,c,d,p){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gl(0),this.hiddenUpdates=gl(null),this.identifierPrefix=l,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=p,this.incompleteTransitions=new Map}function If(e,t,a,l,s,i,c,d,p,O,Z,P){return e=new tx(e,t,a,c,p,O,Z,P,d),t=1,i===!0&&(t|=24),i=Ya(3,null,null,t),e.current=i,i.stateNode=e,t=Kc(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:l,isDehydrated:a,cache:t},Fc(i),e}function Pf(e){return e?(e=Jn,e):Jn}function e0(e,t,a,l,s,i){s=Pf(s),l.context===null?l.context=s:l.pendingContext=s,l=en(t),l.payload={element:a},i=i===void 0?null:i,i!==null&&(l.callback=i),a=tn(e,l,t),a!==null&&(Ra(a,e,t),Us(a,e,t))}function t0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function go(e,t){t0(e,t),(e=e.alternate)&&t0(e,t)}function a0(e){if(e.tag===13||e.tag===31){var t=Tn(e,67108864);t!==null&&Ra(t,e,67108864),go(e,67108864)}}function l0(e){if(e.tag===13||e.tag===31){var t=Za();t=Kl(t);var a=Tn(e,t);a!==null&&Ra(a,e,t),go(e,t)}}var uc=!0;function ax(e,t,a,l){var s=E.T;E.T=null;var i=le.p;try{le.p=2,yo(e,t,a,l)}finally{le.p=i,E.T=s}}function lx(e,t,a,l){var s=E.T;E.T=null;var i=le.p;try{le.p=8,yo(e,t,a,l)}finally{le.p=i,E.T=s}}function yo(e,t,a,l){if(uc){var s=po(l);if(s===null)ao(e,t,l,dc,a),s0(e,l);else if(sx(s,e,t,a,l))l.stopPropagation();else if(s0(e,l),t&4&&-1<nx.indexOf(e)){for(;s!==null;){var i=h(s);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var c=Yt(i.pendingLanes);if(c!==0){var d=i;for(d.pendingLanes|=2,d.entangledLanes|=2;c;){var p=1<<31-ht(c);d.entanglements[1]|=p,c&=~p}Nl(i),(xt&6)===0&&(Ki=jt()+500,Ps(0))}}break;case 31:case 13:d=Tn(i,2),d!==null&&Ra(d,i,2),$i(),go(i,2)}if(i=po(l),i===null&&ao(e,t,l,dc,a),i===s)break;s=i}s!==null&&l.stopPropagation()}else ao(e,t,l,null,a)}}function po(e){return e=Pe(e),vo(e)}var dc=null;function vo(e){if(dc=null,e=Q(e),e!==null){var t=v(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=k(t),e!==null)return e;e=null}else if(a===31){if(e=T(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return dc=e,null}function n0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wl()){case ml:return 2;case ua:return 8;case Ka:case Xl:return 32;case da:return 268435456;default:return 32}default:return 32}}var bo=!1,hn=null,mn=null,xn=null,ii=new Map,ci=new Map,gn=[],nx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s0(e,t){switch(e){case"focusin":case"focusout":hn=null;break;case"dragenter":case"dragleave":mn=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":ii.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ci.delete(t.pointerId)}}function ri(e,t,a,l,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:i,targetContainers:[s]},t!==null&&(t=h(t),t!==null&&a0(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function sx(e,t,a,l,s){switch(t){case"focusin":return hn=ri(hn,e,t,a,l,s),!0;case"dragenter":return mn=ri(mn,e,t,a,l,s),!0;case"mouseover":return xn=ri(xn,e,t,a,l,s),!0;case"pointerover":var i=s.pointerId;return ii.set(i,ri(ii.get(i)||null,e,t,a,l,s)),!0;case"gotpointercapture":return i=s.pointerId,ci.set(i,ri(ci.get(i)||null,e,t,a,l,s)),!0}return!1}function i0(e){var t=Q(e.target);if(t!==null){var a=v(t);if(a!==null){if(t=a.tag,t===13){if(t=k(a),t!==null){e.blockedOn=t,Ta(e.priority,function(){l0(a)});return}}else if(t===31){if(t=T(a),t!==null){e.blockedOn=t,Ta(e.priority,function(){l0(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=po(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Je=l,a.target.dispatchEvent(l),Je=null}else return t=h(a),t!==null&&a0(t),e.blockedOn=a,!1;t.shift()}return!0}function c0(e,t,a){fc(e)&&a.delete(t)}function ix(){bo=!1,hn!==null&&fc(hn)&&(hn=null),mn!==null&&fc(mn)&&(mn=null),xn!==null&&fc(xn)&&(xn=null),ii.forEach(c0),ci.forEach(c0)}function hc(e,t){e.blockedOn===t&&(e.blockedOn=null,bo||(bo=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ix)))}var mc=null;function r0(e){mc!==e&&(mc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){mc===e&&(mc=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],s=e[t+2];if(typeof l!="function"){if(vo(l||a)===null)continue;break}var i=h(a);i!==null&&(e.splice(t,3),t-=3,yr(i,{pending:!0,data:s,method:a.method,action:l},l,s))}}))}function ps(e){function t(p){return hc(p,e)}hn!==null&&hc(hn,e),mn!==null&&hc(mn,e),xn!==null&&hc(xn,e),ii.forEach(t),ci.forEach(t);for(var a=0;a<gn.length;a++){var l=gn[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<gn.length&&(a=gn[0],a.blockedOn===null);)i0(a),a.blockedOn===null&&gn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var s=a[l],i=a[l+1],c=s[Jt]||null;if(typeof i=="function")c||r0(a);else if(c){var d=null;if(i&&i.hasAttribute("formAction")){if(s=i,c=i[Jt]||null)d=c.formAction;else if(vo(s)!==null)continue}else d=c.action;typeof d=="function"?a[l+1]=d:(a.splice(l,3),l-=3),r0(a)}}}function o0(){function e(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(c){return s=c})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function jo(e){this._internalRoot=e}xc.prototype.render=jo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,l=Za();e0(a,l,e,t,null,null)},xc.prototype.unmount=jo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e0(e.current,2,null,e,null,null),$i(),t[Sa]=null}};function xc(e){this._internalRoot=e}xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=bn();e={blockedOn:null,target:e,priority:t};for(var a=0;a<gn.length&&t!==0&&t<gn[a].priority;a++);gn.splice(a,0,e),a===0&&i0(e)}};var u0=u.version;if(u0!=="19.2.0")throw Error(o(527,u0,"19.2.0"));le.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=x(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var cx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{Ja=gc.inject(cx),Tt=gc}catch{}}return ui.createRoot=function(e,t){if(!m(e))throw Error(o(299));var a=!1,l="",s=gd,i=yd,c=pd;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=If(e,1,!1,null,null,a,l,null,s,i,c,o0),e[Sa]=t.current,to(e),new jo(t)},ui.hydrateRoot=function(e,t,a){if(!m(e))throw Error(o(299));var l=!1,s="",i=gd,c=yd,d=pd,p=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(s=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(c=a.onCaughtError),a.onRecoverableError!==void 0&&(d=a.onRecoverableError),a.formState!==void 0&&(p=a.formState)),t=If(e,1,!0,t,a??null,l,s,p,i,c,d,o0),t.context=Pf(null),a=t.current,l=Za(),l=Kl(l),s=en(l),s.callback=null,tn(a,s,l),a=l,t.current.lanes=a,Aa(t,a),Nl(t),e[Sa]=t.current,to(e),new xc(t)},ui.version="19.2.0",ui}var b0;function yx(){if(b0)return wo.exports;b0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(u){console.error(u)}}return r(),wo.exports=gx(),wo.exports}var px=yx();const vx=L0(px),bx="/Lunagis/assets/LunaGis_logo-BRusqGwy.svg",di=({label:r,icon:u,isActive:f,onClick:o})=>n.jsxs("button",{onClick:o,title:r,"aria-label":r,"aria-current":f?"page":void 0,className:`w-full flex flex-col items-center justify-center p-2 rounded-lg transition-colors duration-200 ${f?"bg-cyan-500/20 text-cyan-300":"text-gray-400 hover:bg-gray-700/50 hover:text-gray-200"}`,children:[u,n.jsx("span",{className:"text-xs mt-1",children:r})]}),jx=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2H5a2 2 0 00-2 2v2m14 0V9"})}),Nx=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.121 15.536c-1.171 1.952-3.07 1.952-4.242 0-1.172-1.953-1.172-5.119 0-7.072 1.171-1.952 3.07-1.952 4.242 0M8 12h8M12 8v8"})}),Sx=()=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),wx=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zm-7.518-.267A8.25 8.25 0 1120.25 10.5M8.288 14.212A5.25 5.25 0 1117.25 10.5"})}),Cx=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"})}),Mx=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),Ax=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 8.25H7.5a2.25 2.25 0 00-2.25 2.25v9a2.25 2.25 0 002.25 2.25h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25H15m0-3l-3-3m0 0l-3 3m3-3V15"})}),Tx=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 8.25H7.5a2.25 2.25 0 00-2.25 2.25v9a2.25 2.25 0 002.25 2.25h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25H15M9 12l3 3m0 0l3-3m-3 3V2.25"})}),Ex=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),Dx=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 15l6-6m0 0l-6-6m6 6H9a6 6 0 000 12h3"})}),zx=({activeTool:r,onToolSelect:u,onUserManualClick:f,onImportConfig:o,onExportConfig:m,canUndo:v,canRedo:k,onUndo:T,onRedo:S,isDataLoaded:x})=>{const b=y.useRef(null),j=()=>{var z;return(z=b.current)==null?void 0:z.click()},M=z=>{var Y;(Y=z.target.files)!=null&&Y[0]&&(o(z.target.files[0]),z.target.value="")};return n.jsxs("aside",{className:"bg-gray-800/50 border-r border-gray-700 py-2 flex-shrink-0 flex flex-col items-center gap-4",style:{width:"75x"},role:"navigation","aria-label":"Main navigation",children:[n.jsx("div",{className:"w-full flex items-center justify-center","aria-label":"Lunagis logo",children:n.jsx("img",{src:bx,alt:"LunaGis",className:"h-auto object-contain",style:{width:"50px"}})}),n.jsx(di,{label:"Layers",icon:n.jsx(jx,{}),isActive:r==="layers",onClick:()=>u("layers")}),n.jsx(di,{label:"Artifacts",icon:n.jsx(wx,{}),isActive:r==="artifacts",onClick:()=>u("artifacts")}),n.jsx(di,{label:"Events",icon:n.jsx(Cx,{}),isActive:r==="events",onClick:()=>u("events")}),n.jsx(di,{label:"Measure",icon:n.jsx(Nx,{}),isActive:r==="measurement",onClick:()=>u("measurement")}),n.jsx(di,{label:"Config",icon:n.jsx(Sx,{}),isActive:r==="config",onClick:()=>u("config")}),n.jsx("div",{className:"w-full border-t border-gray-700"}),n.jsx("input",{type:"file",ref:b,onChange:M,accept:".json",style:{display:"none"}}),n.jsxs("button",{onClick:j,title:"Import Config","aria-label":"Import Config",className:"w-full flex flex-col items-center justify-center p-2 rounded-lg transition-colors duration-200 text-gray-400 hover:bg-indigo-700/50 hover:text-indigo-300",children:[n.jsx(Ax,{}),n.jsx("span",{className:"text-xs mt-1",children:"Import"})]}),n.jsxs("button",{onClick:m,disabled:!x,title:"Export Config","aria-label":"Export Config",className:"w-full flex flex-col items-center justify-center p-2 rounded-lg transition-colors duration-200 text-gray-400 hover:bg-teal-700/50 hover:text-teal-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:text-gray-400",children:[n.jsx(Tx,{}),n.jsx("span",{className:"text-xs mt-1",children:"Export"})]}),n.jsxs("button",{onClick:T,disabled:!v,title:"Undo (Ctrl+Z)","aria-label":"Undo",className:"w-full flex flex-col items-center justify-center p-2 rounded-lg transition-colors duration-200 text-gray-400 hover:bg-purple-700/50 hover:text-purple-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:text-gray-400",children:[n.jsx(Ex,{}),n.jsx("span",{className:"text-xs mt-1",children:"Undo"})]}),n.jsxs("button",{onClick:S,disabled:!k,title:"Redo (Ctrl+Y)","aria-label":"Redo",className:"w-full flex flex-col items-center justify-center p-2 rounded-lg transition-colors duration-200 text-gray-400 hover:bg-purple-700/50 hover:text-purple-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:text-gray-400",children:[n.jsx(Dx,{}),n.jsx("span",{className:"text-xs mt-1",children:"Redo"})]}),n.jsx("div",{className:"flex-grow"}),f&&n.jsxs("button",{onClick:f,title:"User Manual","aria-label":"User Manual",className:"w-full flex flex-col items-center justify-center p-2 rounded-lg transition-colors duration-200 text-gray-400 hover:bg-cyan-700/50 hover:text-cyan-300 border border-gray-700 hover:border-cyan-600",children:[n.jsx(Mx,{}),n.jsx("span",{className:"text-xs mt-1",children:"Manual"})]})]})};function j0(r){const u=new DataView(r);if(String.fromCharCode(...new Uint8Array(r,0,6))!=="NUMPY")throw new Error("Not a valid .npy file: invalid magic string.");const o=u.getUint8(6);let m,v;if(o===1)v=u.getUint16(8,!0),m=10;else if(o===2)v=u.getUint32(8,!0),m=12;else throw new Error(`Unsupported .npy version: ${o}. Only v1 and v2 are supported.`);const T=new TextDecoder().decode(r.slice(m,m+v)).replace(/False/g,"false").replace(/True/g,"true").replace(/\(/g,"[").replace(/\)/g,"]").replace(/'/g,'"').replace(/,(\s*\])/g,"$1").replace(/,(\s*})/g,"$1"),S=JSON.parse(T),x=m+v,b=S.descr;let j;if(b.includes("f4")||b.includes("f32"))j=new Float32Array(r,x);else if(b.includes("f8")||b.includes("f64")){console.warn("Downcasting float64 to float32. Precision may be lost.");const M=new Float64Array(r,x);j=new Float32Array(M)}else if(b.includes("b1")||b.includes("?")){const M=new Uint8Array(r,x);j=new Float32Array(M.length);for(let z=0;z<M.length;z++)j[z]=M[z]}else throw new Error(`Unsupported dtype in .npy file: ${b}. Only float32, float64, and boolean are supported.`);return{header:S,data:j,shape:S.shape}}function N0(r){var u,f;try{const m=new DOMParser().parseFromString(r,"application/xml"),v=m.querySelector("parsererror");if(v)throw new Error("XML parsing error: "+v.textContent);const k=m.querySelector("VRTDataset");if(!k)throw new Error("<VRTDataset> tag not found.");const T=parseInt(k.getAttribute("rasterXSize")||"0",10),S=parseInt(k.getAttribute("rasterYSize")||"0",10),x=(u=m.querySelector("GeoTransform"))==null?void 0:u.textContent;if(!x)throw new Error("<GeoTransform> tag not found.");const b=x.split(",").map(Number);if(b.length!==6||b.some(isNaN))throw new Error("Invalid GeoTransform content.");const j=(f=m.querySelector("SRS"))==null?void 0:f.textContent;if(!j)throw new Error("<SRS> tag not found.");return{geoTransform:b,srs:j,width:T,height:S}}catch{return null}}const R0=new Date("2030-01-01T00:00:00Z"),Bt=r=>{const u=new Date(R0.getTime());return u.setUTCHours(u.getUTCHours()+r),u},Lx=r=>{const u=(r.getTime()-R0.getTime())/36e5;return Math.round(u)},Vn=r=>Bt(r).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"UTC"}).replace(",",""),Rx=1e-10,qn={">":{precedence:2,associativity:"Left"},">=":{precedence:2,associativity:"Left"},"<":{precedence:2,associativity:"Left"},"<=":{precedence:2,associativity:"Left"},"==":{precedence:2,associativity:"Left"},AND:{precedence:1,associativity:"Left"},OR:{precedence:1,associativity:"Left"},NOT:{precedence:3,associativity:"Right"}};function Ro(r){const u=[],f=/\s*(>=|<=|==|>|<|\(|\)|[a-zA-Z_][a-zA-Z0-9_]*|-?\d+(\.\d+)?|\S)\s*/g;let o;for(;(o=f.exec(r))!==null;){const m=o[1],v=m.toUpperCase();if(!isNaN(Number(m)))u.push({type:"LITERAL",value:Number(m)});else if(v in qn)u.push({type:"OPERATOR",value:v});else if(m==="(")u.push({type:"LPAREN",value:m});else if(m===")")u.push({type:"RPAREN",value:m});else if(/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(m))u.push({type:"VARIABLE",value:m});else throw new Error(`Invalid token: ${m}`)}return u}function O0(r){const u=[],f=[];for(const o of r)if(o.type==="LITERAL"||o.type==="VARIABLE")u.push(o);else if(o.type==="OPERATOR"){const m=o.value;for(;f.length>0&&f[f.length-1].type==="OPERATOR";){const v=f[f.length-1].value;if(qn[m].associativity==="Left"&&qn[m].precedence<=qn[v].precedence||qn[m].associativity==="Right"&&qn[m].precedence<qn[v].precedence)u.push(f.pop());else break}f.push(o)}else if(o.type==="LPAREN")f.push(o);else if(o.type==="RPAREN"){for(;f.length>0&&f[f.length-1].type!=="LPAREN";)u.push(f.pop());if(f.length===0)throw new Error("Mismatched parentheses");f.pop()}for(;f.length>0;){const o=f.pop();if(o.type==="LPAREN")throw new Error("Mismatched parentheses");u.push(o)}return u}function _0(r,u){const f=[];for(const o of r)if(o.type==="LITERAL")f.push(o.value);else if(o.type==="VARIABLE"){const m=u[o.value];if(m===void 0)throw new Error(`Undefined variable: ${o.value}`);f.push(m)}else if(o.type==="OPERATOR"){if(o.value==="NOT"){if(f.length<1)throw new Error("Invalid expression for NOT operator");const k=f.pop();f.push(k?0:1);continue}if(f.length<2)throw new Error(`Invalid expression for operator ${o.value}`);const m=f.pop(),v=f.pop();switch(o.value){case">":f.push(v>m?1:0);break;case">=":f.push(v>=m?1:0);break;case"<":f.push(v<m?1:0);break;case"<=":f.push(v<=m?1:0);break;case"==":f.push(Math.abs(v-m)<Rx?1:0);break;case"AND":f.push(v&&m?1:0);break;case"OR":f.push(v||m?1:0);break;default:throw new Error(`Unknown operator: ${o.value}`)}}if(f.length!==1)throw new Error("The final expression stack is invalid");return f[0]}function Ox(r){if(!r.trim())throw new Error("Empty expression");try{const u=Ro(r);return O0(u)}catch(u){throw u instanceof Error?new Error(`Expression compilation failed: ${u.message}`):new Error("An unknown error occurred during expression compilation.")}}function _x(r,u){return _0(r,u)}function kx(r,u){if(!r.trim())return 0;try{const f=Ro(r),o=O0(f);return _0(o,u)}catch(f){throw f instanceof Error?new Error(`Expression evaluation failed: ${f.message}`):new Error("An unknown error occurred during expression evaluation.")}}function Ux(r){try{const u=Ro(r),f=new Set;for(const o of u)o.type==="VARIABLE"&&f.add(o.value);return Array.from(f)}catch{return[]}}class Hx{constructor(u,f){this.prev=null,this.next=null,this.key=u,this.value=f}}class k0{constructor(u){if(this.head=null,this.tail=null,u<=0)throw new Error("Cache capacity must be positive");this.capacity=u,this.cache=new Map}get(u){const f=this.cache.get(u);if(f)return this.moveToHead(f),f.value}set(u,f){const o=this.cache.get(u);if(o){o.value=f,this.moveToHead(o);return}const m=new Hx(u,f);this.cache.size>=this.capacity&&this.evictLRU(),this.addToHead(m),this.cache.set(u,m)}has(u){return this.cache.has(u)}delete(u){const f=this.cache.get(u);return f?(this.removeNode(f),this.cache.delete(u)):!1}clear(){this.cache.clear(),this.head=null,this.tail=null}get size(){return this.cache.size}get maxSize(){return this.capacity}keys(){const u=[];let f=this.tail;for(;f;)u.push(f.key),f=f.prev;return u}values(){const u=[];let f=this.tail;for(;f;)u.push(f.value),f=f.prev;return u}getStats(){return{size:this.size,capacity:this.capacity,utilizationPercent:this.size/this.capacity*100}}addToHead(u){u.prev=null,u.next=this.head,this.head&&(this.head.prev=u),this.head=u,this.tail||(this.tail=u)}removeNode(u){u.prev?u.prev.next=u.next:this.head=u.next,u.next?u.next.prev=u.prev:this.tail=u.prev}moveToHead(u){u!==this.head&&(this.removeNode(u),this.addToHead(u))}evictLRU(){if(!this.tail)return;const u=this.tail.key;this.removeNode(this.tail),this.cache.delete(u)}}class Bx extends k0{constructor(u,f=500){super(u),this.currentMemoryBytes=0,this.maxMemoryBytes=f*1024*1024}getCanvasMemorySize(u){return u.width*u.height*4}set(u,f){const o=this.getCanvasMemorySize(f);if(this.has(u)){const m=super.get(u);m&&(this.currentMemoryBytes-=this.getCanvasMemorySize(m))}if(this.currentMemoryBytes+o>this.maxMemoryBytes)for(;this.currentMemoryBytes+o>this.maxMemoryBytes&&this.size>0;)this.evictOldest();if(o>this.maxMemoryBytes){console.warn(`Canvas too large for cache: ${(o/1024/1024).toFixed(2)}MB`);return}super.set(u,f),this.currentMemoryBytes+=o}delete(u){const f=this.cache.get(u);if(f){const o=f.value;this.currentMemoryBytes-=this.getCanvasMemorySize(o)}return super.delete(u)}clear(){super.clear(),this.currentMemoryBytes=0}evictOldest(){const u=this.keys();u.length>0&&this.delete(u[0])}getStats(){return{...super.getStats(),currentMemoryMB:this.currentMemoryBytes/1024/1024,maxMemoryMB:this.maxMemoryBytes/1024/1024,memoryUtilizationPercent:this.currentMemoryBytes/this.maxMemoryBytes*100}}}class Xn{static forExpression(u,f){return`expr:${u}:${f.sort().join(",")}`}static forNightfall(u,f){return`nightfall:${u}:${f}`}static forDaylightFraction(u,f,o){return`daylight:${u}:${f}:${o.start}-${o.end}`}static hashDataset(u,f){const{time:o,height:m,width:v}=f;let k=`${o}x${m}x${v}`;if(o>0&&m>0&&v>0){const T=u[0];if(k+=`-${T[0][0]}`,k+=`-${T[0][v-1]}`,k+=`-${T[m-1][0]}`,k+=`-${T[m-1][v-1]}`,k+=`-${T[Math.floor(m/2)][Math.floor(v/2)]}`,o>1){const S=u[o-1];k+=`-${S[0][0]}`,k+=`-${S[m-1][v-1]}`}}return k}}class Yx{constructor(u=10){this.cacheHits=0,this.cacheMisses=0,this.cache=new k0(u)}getExpression(u){const f=this.cache.get(u);return f?(this.cacheHits++,f):(this.cacheMisses++,null)}setExpression(u,f){this.cache.set(u,f)}getNightfall(u){const f=this.cache.get(u);return f?(this.cacheHits++,f):(this.cacheMisses++,null)}setNightfall(u,f){this.cache.set(u,f)}getDaylightFraction(u){const f=this.cache.get(u);return f?(this.cacheHits++,f):(this.cacheMisses++,null)}setDaylightFraction(u,f){this.cache.set(u,f)}invalidate(u){return this.cache.delete(u)}clear(){this.cache.clear(),this.cacheHits=0,this.cacheMisses=0}getStats(){const u=this.cache.getStats(),f=this.cacheHits+this.cacheMisses,o=f>0?this.cacheHits/f*100:0;return{...u,cacheHits:this.cacheHits,cacheMisses:this.cacheMisses,hitRate:o,totalRequests:f}}}const bs=new Yx(10),Nc=r=>r.replace(/[^a-zA-Z0-9_]/g,"_"),To=async(r,u,f)=>{const o=Ux(r),m=[];for(const _ of o){const ne=u.find(U=>Nc(U.name)===_);if(!ne||!("dataset"in ne))throw new Error(`Variable "${_}" does not correspond to a valid data layer.`);m.push(ne)}const v=m.map(_=>_.id),k=Xn.forExpression(r,v),T=bs.getExpression(k);if(T)return f&&f("Using cached result... 100%"),T;if(m.length===0&&o.length>0)throw new Error(`No layers found for variables in expression: ${o.join(", ")}`);if(m.length===0&&o.length===0){const _=u.find(qe=>"dataset"in qe);if(!_)throw new Error("Cannot evaluate a constant expression without at least one data layer to define dimensions.");const{time:ne,height:U,width:be}=_.dimensions,we=kx(r,{});return{dataset:Array.from({length:ne},()=>Array.from({length:U},()=>new Array(be).fill(we))),range:{min:we,max:we},dimensions:{time:ne,height:U,width:be}}}const S=m[0],{time:x,height:b,width:j}=S.dimensions;if(!m.every(_=>_.dimensions.time===x&&_.dimensions.height===b&&_.dimensions.width===j))throw new Error("All layers used in an expression must have the same dimensions.");const M=Ox(r),z=m.map(_=>Nc(_.name)),Y=Array.from({length:x},()=>Array.from({length:b},()=>new Array(j).fill(0))),F=()=>new Promise(_=>setTimeout(_,0)),K={},he=5e4;let Ne=0;const ue=x*b*j;let re=-1;f&&(f("Calculating expression... 0%"),await F());for(let _=0;_<x;_++)for(let ne=0;ne<b;ne++)for(let U=0;U<j;U++){for(let we=0;we<m.length;we++)K[z[we]]=m[we].dataset[_][ne][U];const be=_x(M,K);if(Y[_][ne][U]=be,Ne++,Ne>=he){if(f){const we=_*b*j+ne*j+U+1,Oe=Math.floor(we/ue*100);Oe!==re&&(f(`Calculating expression... ${Oe}%`),re=Oe)}await F(),Ne=0}}f&&f("Calculating expression... 100%");let je=1/0,L=-1/0;for(let _=0;_<x;_++)for(let ne=0;ne<b;ne++)for(let U=0;U<j;U++){const be=Y[_][ne][U];be<je&&(je=be),be>L&&(L=be)}je===L&&(L=je+1);const B={dataset:Y,range:{min:je,max:L},dimensions:{time:x,height:b,width:j}};return bs.setExpression(k,B),B},Eo=(r,u,f,o)=>{const{height:m,width:v}=f;if(o){const x=Xn.hashDataset(r,{time:r.length,height:m,width:v}),b=Xn.forDaylightFraction(o,x,u),j=bs.getDaylightFraction(b);if(j)return j}const k=Array.from({length:m},()=>new Array(v).fill(0)),T=u.end-u.start+1;if(T<=0)return{slice:k,range:{min:0,max:100}};for(let x=0;x<m;x++)for(let b=0;b<v;b++){let j=0;for(let z=u.start;z<=u.end;z++){if(z>=r.length)continue;r[z][x][b]===1&&j++}const M=j/T*100;k[x][b]=M}const S={slice:k,range:{min:0,max:100}};if(o){const x=Xn.hashDataset(r,{time:r.length,height:m,width:v}),b=Xn.forDaylightFraction(o,x,u);bs.setDaylightFraction(b,S)}return S},S0=async r=>{const{dataset:u,dimensions:f}=r,{time:o,height:m,width:v}=f,k=Xn.hashDataset(u,f),T=Xn.forNightfall(r.id,k),S=bs.getNightfall(T);if(S)return S;const x=Array.from({length:o},()=>Array.from({length:m},()=>new Array(v).fill(0))),b=()=>new Promise(Y=>setTimeout(Y,0));let j=0,M=0;for(let Y=0;Y<m;Y++){for(let F=0;F<v;F++){const K=u.map(je=>je[Y][F]),he=[];let Ne=!1,ue=-1;for(let je=0;je<o;je++){const L=K[je]===0;if(L&&!Ne)Ne=!0,ue=je;else if(!L&&Ne){Ne=!1;const B=je-ue;he.push({start:ue,end:je,duration:B})}}if(Ne){const je=o-ue;he.push({start:ue,end:o,duration:je})}let re=0;for(let je=0;je<o;je++)if(K[je]===1){for(;re<he.length&&he[re].start<=je;)re++;if(re<he.length){const L=he[re];x[je][Y][F]=L.duration,L.duration>j&&(j=L.duration)}else x[je][Y][F]=0}else{const L=he.find(B=>je>=B.start&&je<B.end);if(L){const B=-L.duration;x[je][Y][F]=B,B<M&&(M=B)}else x[je][Y][F]=-1}}Y%10===0&&await b()}const z={dataset:x,range:{min:M,max:j},maxDuration:j};return bs.setNightfall(T,z),z},U0=y.createContext(null),Oo=()=>{const r=y.useContext(U0);if(!r)throw new Error("useToast must be used within a ToastProvider");return r},qx=({children:r})=>{const[u,f]=y.useState([]),o=y.useCallback(b=>{const j=`toast-${Date.now()}-${Math.random()}`,M={id:j,duration:5e3,...b};f(z=>[...z,M]),M.duration&&setTimeout(()=>{m(j)},M.duration)},[]),m=y.useCallback(b=>{f(j=>j.filter(M=>M.id!==b))},[]),v=y.useCallback((b,j)=>{o({type:"success",message:b,title:j})},[o]),k=y.useCallback((b,j)=>{o({type:"error",message:b,title:j,duration:8e3})},[o]),T=y.useCallback((b,j)=>{o({type:"warning",message:b,title:j,duration:6e3})},[o]),S=y.useCallback((b,j)=>{o({type:"info",message:b,title:j})},[o]),x={showToast:o,showSuccess:v,showError:k,showWarning:T,showInfo:S,dismissToast:m};return n.jsxs(U0.Provider,{value:x,children:[r,n.jsx(Vx,{toasts:u,onDismiss:m})]})},Vx=({toasts:r,onDismiss:u})=>r.length===0?null:n.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 max-w-md pointer-events-none",children:r.map(f=>n.jsx(Xx,{toast:f,onDismiss:u},f.id))}),Xx=({toast:r,onDismiss:u})=>{const[f,o]=y.useState(!1),m=()=>{o(!0),setTimeout(()=>{u(r.id)},300)},v=()=>{const T="pointer-events-auto rounded-lg shadow-lg p-4 border";switch(r.type){case"success":return`${T} bg-green-900/95 border-green-500/50 text-green-100`;case"error":return`${T} bg-red-900/95 border-red-500/50 text-red-100`;case"warning":return`${T} bg-yellow-900/95 border-yellow-500/50 text-yellow-100`;case"info":return`${T} bg-blue-900/95 border-blue-500/50 text-blue-100`;default:return`${T} bg-gray-800/95 border-gray-500/50 text-gray-100`}},k=()=>{switch(r.type){case"success":return n.jsx("svg",{className:"w-6 h-6 text-green-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"error":return n.jsx("svg",{className:"w-6 h-6 text-red-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"warning":return n.jsx("svg",{className:"w-6 h-6 text-yellow-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return n.jsx("svg",{className:"w-6 h-6 text-blue-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return n.jsx("div",{className:`${v()} transition-all duration-300 ${f?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[k(),n.jsxs("div",{className:"flex-1 min-w-0",children:[r.title&&n.jsx("h4",{className:"font-semibold text-sm mb-1",children:r.title}),n.jsx("p",{className:"text-sm",children:r.message}),r.action&&n.jsx("button",{onClick:()=>{r.action.onClick(),m()},className:"mt-2 text-xs font-medium underline hover:no-underline",children:r.action.label})]}),n.jsx("button",{onClick:m,className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors","aria-label":"Dismiss",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})};function Gx({proj:r,primaryDataLayer:u,lonRange:f,latRange:o}){return y.useMemo(()=>{if(!u||!r)return null;const{width:m,height:v}=u.dimensions,[k,T]=f,[S,x]=o;try{const b=r.forward([k,x]),j=r.forward([T,x]),M=r.forward([k,S]),z=(j[0]-b[0])/m,Y=(j[1]-b[1])/m,F=(M[0]-b[0])/v,K=(M[1]-b[1])/v,he=b[0],Ne=b[1],ue=z*K-Y*F;return Math.abs(ue)<1e-9?(console.warn("Coordinate transformation matrix is singular (determinant  0)"),null):(re,je)=>{try{const[L,B]=r.forward([je,re]),_=(K*(L-he)-F*(B-Ne))/ue,ne=(z*(B-Ne)-Y*(L-he))/ue,U=Math.round(_),be=Math.round(ne);return U>=0&&U<m&&be>=0&&be<v?{x:U,y:be}:null}catch(L){return console.warn("Error transforming coordinates:",L),null}}}catch(b){return console.warn("Error setting up coordinate transformation:",b),null}},[r,u,f,o])}const yc=[-85.505,-85.26],pc=[28.97,32.53],vc=r=>new Promise((u,f)=>{const o=new Image;o.onload=()=>u(o),o.onerror=f,o.src=r}),H0=y.createContext(null),Na=()=>{const r=y.useContext(H0);if(!r)throw new Error("useAppContext must be used within an AppProvider");return r},Zx=({children:r})=>{const{showError:u,showWarning:f,showSuccess:o}=Oo(),[m,v]=y.useState([]),[k,T]=y.useState(null),[S,x]=y.useState(null),[b,j]=y.useState(null),[M,z]=y.useState(null),[Y,F]=y.useState(null),[K,he]=y.useState(!1),[Ne,ue]=y.useState(null),[re,je]=y.useState(1),[L,B]=y.useState("layers"),[_,ne]=y.useState(null),[U,be]=y.useState(null),[we,Oe]=y.useState(null),[qe,Ge]=y.useState(null),[E,le]=y.useState(null),se=y.useRef(null),Ee=y.useRef(null),[ye,g]=y.useState(!1),[D,ae]=y.useState(200),[xe,ce]=y.useState("#ffffff80"),[ze,Ve]=y.useState([]),[gt,rt]=y.useState("#ffff00"),[_t,ca]=y.useState(null),[Qt,Kt]=y.useState(!1),[Pt,Oa]=y.useState(!1),[ll,vn]=y.useState(10),ya=y.useRef(null),Qa=y.useRef(0),nl=y.useRef(null),[hl,_a]=y.useState(null),[Ma,jt]=y.useState([]),[wl,ml]=y.useState(null),[ua,Ka]=y.useState(null),[Xl,da]=y.useState(!1),[sl,Gl]=y.useState(null),[Ja,Tt]=y.useState({waypointDotSize:8,showSegmentLengths:!0,labelFontSize:14,showActivitySymbols:!0}),[pa,ht]=y.useState({defaultMaxSegmentLength:200}),[il,ka]=y.useState(()=>{const N="lunagis_activity_definitions";try{const X=localStorage.getItem(N);if(X)return JSON.parse(X)}catch(X){console.error("Error loading activity definitions:",X)}return[{id:"DRIVE-0",name:"Drive-0",defaultDuration:60},{id:"DRIVE-5",name:"Drive-5",defaultDuration:0},{id:"DRIVE-10",name:"Drive-10",defaultDuration:60},{id:"DRIVE-15",name:"Drive-15",defaultDuration:60},{id:"DTE_COMMS",name:"TTC_COMMS",defaultDuration:3600},{id:"LPF_COMMS",name:"PL_COMMS",defaultDuration:60},{id:"IDLE",name:"Idle",defaultDuration:60},{id:"SLEEP",name:"Sleep",defaultDuration:60},{id:"SCIENCE",name:"Science",defaultDuration:60}]}),[xl,ra]=y.useState({min:-15,max:15}),[Cl,ea]=y.useState(!1),[Yt,va]=y.useState([]),[qt,Zl]=y.useState(null);y.useEffect(()=>{const N="lunagis_activity_definitions";try{localStorage.setItem(N,JSON.stringify(il))}catch(X){const I=X instanceof Error?X.message:"Unknown error";u(`Failed to save activity definitions: ${I}`,"Save Error")}},[il,u]);const[Ua,gl]=y.useState([]),[Aa,Ql]=y.useState([]),ba=y.useCallback(()=>{const N={artifacts:JSON.parse(JSON.stringify(Ma)),events:JSON.parse(JSON.stringify(Yt))};gl(X=>[...X,N]),Ql([])},[Ma,Yt]),cl=y.useMemo(()=>m.find(N=>N.type==="basemap"),[m]),ta=y.useMemo(()=>m.find(N=>N.type==="data"),[m]),Kl=y.useMemo(()=>m.find(N=>N.id===k),[m,k]),aa=y.useMemo(()=>cl?proj4(cl.vrt.srs):null,[cl]),bn=()=>{F(null),ne(null)},Ta=y.useMemo(()=>ta?[Bt(0),Bt(ta.dimensions.time-1)]:null,[ta]),Ha=Gx({proj:aa,primaryDataLayer:ta,lonRange:pc,latRange:yc}),kt=y.useMemo(()=>{if(!ta||!aa)return null;const{width:N,height:X}=ta.dimensions,[I,fe]=pc,[Ae,ke]=yc,Se=aa.forward([I,ke]),Be=aa.forward([fe,ke]),tt=aa.forward([I,Ae]),Ce=(Be[0]-Se[0])/N,Ze=(Be[1]-Se[1])/N,Qe=(tt[0]-Se[0])/X,_e=(tt[1]-Se[1])/X,Je=Se[0],Pe=Se[1],Le=Ce*_e-Ze*Qe;return Math.abs(Le)<1e-9?null:mt=>{try{const[ut,At]=mt,la=(_e*(ut-Je)-Qe*(At-Pe))/Le,Lt=(Ce*(At-Pe)-Ze*(ut-Je))/Le,Vt=Math.round(la),Xt=Math.round(Lt),na=Math.max(0,Math.min(N,Vt)),Rt=Math.max(0,Math.min(X,Xt)),yl=Ce*na+Qe*Rt+Je,rl=Ze*na+_e*Rt+Pe;return[yl,rl]}catch{return null}}},[aa,ta]),Jt=y.useMemo(()=>{if(!ta||!aa)return null;const{width:N,height:X}=ta.dimensions,[I,fe]=pc,[Ae,ke]=yc,Se=aa.forward([I,ke]),Be=aa.forward([fe,ke]),tt=aa.forward([I,Ae]),Ce=(Be[0]-Se[0])/N,Ze=(Be[1]-Se[1])/N,Qe=(tt[0]-Se[0])/X,_e=(tt[1]-Se[1])/X,Je=Se[0],Pe=Se[1],Le=Ce*_e-Ze*Qe;return Math.abs(Le)<1e-9?null:(mt,ut)=>{try{const At=(_e*(mt[0]-Je)-Qe*(mt[1]-Pe))/Le,la=(Ce*(mt[1]-Pe)-Ze*(mt[0]-Je))/Le,Lt=(_e*(ut[0]-Je)-Qe*(ut[1]-Pe))/Le,Vt=(Ce*(ut[1]-Pe)-Ze*(ut[0]-Je))/Le,Xt=Math.abs(Lt-At),na=Math.abs(Vt-la),Rt=Math.min(At,Lt),yl=Math.min(la,Vt),rl=Math.max(At,Lt),Sn=Math.max(la,Vt),wn=[Ce*Rt+Qe*yl+Je,Ze*Rt+_e*yl+Pe],Cn=[Ce*rl+Qe*yl+Je,Ze*rl+_e*yl+Pe],Ns=[Ce*rl+Qe*Sn+Je,Ze*rl+_e*Sn+Pe],fa=[Ce*Rt+Qe*Sn+Je,Ze*Rt+_e*Sn+Pe],Ml=[(wn[0]+Cn[0]+Ns[0]+fa[0])/4,(wn[1]+Cn[1]+Ns[1]+fa[1])/4],Al=[Ce*Xt,Ze*Xt],pl=[Qe*na,_e*na],wc=Math.sqrt(Al[0]*Al[0]+Al[1]*Al[1]),Ss=Math.sqrt(pl[0]*pl[0]+pl[1]*pl[1]),ws=Math.atan2(Ze,Ce)*180/Math.PI;return{center:Ml,width:wc,height:Ss,rotation:ws}}catch{return null}}},[aa,ta]);y.useEffect(()=>{if(_t){const N=[...m].reverse().find(X=>X.visible&&(X.type==="data"||X.type==="analysis"||X.type==="dte_comms"||X.type==="lpf_comms"));if(N)if(_t.y<N.dimensions.height&&_t.x<N.dimensions.width){const X=N.dataset.map(I=>{var fe;return((fe=I==null?void 0:I[_t.y])==null?void 0:fe[_t.x])??0});be({data:X,range:N.range})}else be(null);else be(null)}else if(_){const N=m.find(X=>X.id===_.layerId);if((N==null?void 0:N.type)==="data"||(N==null?void 0:N.type)==="analysis"||(N==null?void 0:N.type)==="dte_comms"||(N==null?void 0:N.type)==="lpf_comms")if(_.y<N.dimensions.height&&_.x<N.dimensions.width){const X=N.dataset.map(I=>{var fe;return((fe=I==null?void 0:I[_.y])==null?void 0:fe[_.x])??0});be({data:X,range:N.range})}else be(null);else be(null)}else be(null)},[_,_t,m]),y.useEffect(()=>{if(k&&_&&b){const N=m.find(X=>X.id===k);if((N==null?void 0:N.type)==="analysis"&&N.analysisType==="daylight_fraction"){const X=m.find(I=>I.id===N.sourceLayerId);if(X){const{x:I,y:fe}=_;if(fe>=X.dimensions.height||I>=X.dimensions.width){Ge(null);return}const{start:Ae,end:ke}=b,Se=ke-Ae+1;let Be=0,tt=0,Ce=1/0,Ze=0,Qe=0,_e=1/0,Je=0,Pe=null,Le=0;for(let At=Ae;At<=ke;At++){if(At>=X.dataset.length||!X.dataset[At])continue;const la=X.dataset[At][fe][I];la===1&&Be++;const Lt=la===1?"day":"night";Pe!==Lt?(Pe==="day"?(Ze++,Le>tt&&(tt=Le),Le<Ce&&(Ce=Le)):Pe==="night"&&(Je++,Le>Qe&&(Qe=Le),Le<_e&&(_e=Le)),Pe=Lt,Le=1):Le++}Pe==="day"?(Ze++,Le>tt&&(tt=Le),Le<Ce&&(Ce=Le)):Pe==="night"&&(Je++,Le>Qe&&(Qe=Le),Le<_e&&(_e=Le));const mt=Se-Be,ut=Se>0?Be/Se*100:0;Ge({fraction:ut,dayHours:Be,nightHours:mt,longestDayPeriod:tt,shortestDayPeriod:Ce===1/0?0:Ce,dayPeriods:Ze,longestNightPeriod:Qe,shortestNightPeriod:_e===1/0?0:_e,nightPeriods:Je});return}}}Ge(null)},[_,k,m,b]);const Sa=y.useCallback(async(N,X)=>{if(!N)return;x(`Parsing "${N.name}"...`);const I=()=>new Promise(fe=>setTimeout(fe,0));try{const fe=await N.arrayBuffer(),{data:Ae,shape:ke,header:Se}=j0(fe);if(ke.length!==3)throw new Error(`Expected a 3D array, but got ${ke.length} dimensions.`);const[Be,tt,Ce]=ke;let Ze=1/0,Qe=-1/0;for(const Le of Ae)Le<Ze&&(Ze=Le),Le>Qe&&(Qe=Le);const _e=Array.from({length:Ce},()=>Array.from({length:Be},()=>new Array(tt)));let Je=0;if(Se.fortran_order)for(let Le=0;Le<Ce;Le++){for(let mt=0;mt<tt;mt++)for(let ut=0;ut<Be;ut++)_e[Le][ut][mt]=Ae[Je++];Le%100===0&&await I()}else for(let Le=0;Le<Be;Le++){for(let mt=0;mt<tt;mt++)for(let ut=0;ut<Ce;ut++)_e[ut][Le][mt]=Ae[Je++];Le%10===0&&await I()}const Pe={id:`${X}-${Date.now()}`,name:N.name,type:X,visible:!0,opacity:1,fileName:N.name,dataset:_e,range:{min:Ze,max:Qe},colormap:"Viridis",colormapInverted:!1,customColormap:[{value:Ze,color:"#000000"},{value:Qe,color:"#ffffff"}],dimensions:{time:Ce,height:Be,width:tt}};if(v(Le=>[...Le,Pe]),T(Pe.id),X==="data"&&!ta){const Le={start:0,end:Ce-1};j(Le),z(0),Oe([Bt(0),Bt(Ce-1)]),Ne||ue(null)}}catch(fe){u(`Error loading file: ${fe instanceof Error?fe.message:String(fe)}`)}finally{x(null)}},[ta,Ne]),Jl=y.useCallback(N=>Sa(N,"data"),[Sa]),jn=y.useCallback(N=>Sa(N,"dte_comms"),[Sa]),Nn=y.useCallback(N=>Sa(N,"lpf_comms"),[Sa]),V=y.useCallback(async(N,X)=>{x(`Loading basemap "${N.name}"...`);try{const I=await X.text(),fe=N0(I);if(!fe)throw new Error("Failed to parse VRT file.");const Ae=URL.createObjectURL(N),ke=await vc(Ae);URL.revokeObjectURL(Ae);const Se={id:`basemap-${Date.now()}`,name:N.name,type:"basemap",visible:!0,opacity:1,image:ke,vrt:fe,pngFileName:N.name,vrtFileName:X.name};v(Be=>[Se,...Be]),T(Se.id),Ne||ue(null)}catch(I){u(`Error processing base map: ${I instanceof Error?I.message:String(I)}`)}finally{x(null)}},[Ne]),G=y.useCallback(async(N,X)=>{x(`Loading image "${N.name}"...`);try{const I=URL.createObjectURL(N),fe=await vc(I);URL.revokeObjectURL(I);const Ae=X||(Ne?Ne.center:[0,0]),ke={id:`image-${Date.now()}`,name:N.name,type:"image",visible:!0,opacity:.7,image:fe,fileName:N.name,position:Ae,scaleX:1,scaleY:1,rotation:0,originalWidth:fe.width,originalHeight:fe.height};v(Se=>[...Se,ke]),T(ke.id),o(`Image layer "${N.name}" added successfully`)}catch(I){u(`Error loading image: ${I instanceof Error?I.message:String(I)}`)}finally{x(null)}},[Ne,o,u]),C=y.useCallback((N,X)=>{v(I=>I.map(fe=>fe.id===N?{...fe,...X}:fe))},[]),Q=y.useCallback(N=>{v(X=>X.filter(I=>I.id!==N)),k===N&&T(null)},[k]),h=y.useCallback(N=>{v(X=>{const I=X.findIndex(Ae=>Ae.id===N);if(I===-1||I>=X.length-1)return X;const fe=[...X];return[fe[I],fe[I+1]]=[fe[I+1],fe[I]],fe})},[]),ee=y.useCallback(N=>{v(X=>{const I=X.findIndex(Ae=>Ae.id===N);if(I<=0)return X;const fe=[...X];return[fe[I-1],fe[I]]=[fe[I],fe[I-1]],fe})},[]),me=y.useCallback(async N=>{const X=m.find(Ze=>Ze.id===N);if(!X)return;x(`Forecasting nightfall for "${X.name}"...`),await new Promise(Ze=>setTimeout(Ze,50));const{dataset:I,range:fe,maxDuration:Ae}=await S0(X),ke="rgba(0,0,0,0)",Se=336,Be=[{value:-1/0,color:ke},{value:-Se,color:"cyan"},{value:0,color:"yellow"},{value:Se+.001,color:ke}],tt=Math.min(1e3,Math.ceil(Ae/24)*24||24),Ce={id:`analysis-${Date.now()}`,name:`Nightfall Forecast for ${X.name}`,type:"analysis",analysisType:"nightfall",visible:!0,opacity:1,colormap:"Custom",colormapInverted:!1,dataset:I,range:fe,dimensions:X.dimensions,sourceLayerId:N,customColormap:Be,params:{clipValue:tt}};v(Ze=>[...Ze,Ce]),T(Ce.id),x(null)},[m]),$=y.useCallback(N=>{const X=m.find(Se=>Se.id===N);if(!X||!b)return;const{slice:I,range:fe}=Eo(X.dataset,b,X.dimensions,X.id),Ae=Array.from({length:X.dimensions.time},()=>I),ke={id:`analysis-${Date.now()}`,name:`Daylight Fraction for ${X.name}`,type:"analysis",analysisType:"daylight_fraction",visible:!0,opacity:1,colormap:"Turbo",dataset:Ae,range:fe,dimensions:X.dimensions,sourceLayerId:N,params:{}};v(Se=>[...Se,ke]),T(ke.id)},[m,b]),pe=y.useCallback(async(N,X)=>{x(`Calculating expression "${N}"...`),await new Promise(I=>setTimeout(I,50));try{const{dataset:I,range:fe,dimensions:Ae}=await To(X,m,Se=>x(Se)),ke={id:`analysis-expr-${Date.now()}`,name:N,type:"analysis",analysisType:"expression",visible:!0,opacity:1,colormap:"Custom",dataset:I,range:fe,dimensions:Ae,sourceLayerId:void 0,customColormap:[{value:-1/0,color:"rgba(0,0,0,0)"},{value:1,color:"#ffff00"}],params:{expression:X}};v(Se=>[...Se,ke]),T(ke.id),ea(!1)}catch(I){u(`Expression Error: ${I instanceof Error?I.message:String(I)}`)}finally{x(null)}},[m]),ie=y.useCallback(async(N,X)=>{const I=m.find(fe=>fe.id===N);if(!I||I.type!=="analysis"||I.analysisType!=="expression"){u("Invalid layer for expression recalculation");return}x(`Recalculating expression "${I.name}"...`),await new Promise(fe=>setTimeout(fe,50));try{const{dataset:fe,range:Ae,dimensions:ke}=await To(X,m,Se=>x(Se));v(Se=>Se.map(Be=>Be.id===N?{...Be,dataset:fe,range:Ae,dimensions:ke,params:{...Be.params,expression:X}}:Be))}catch(fe){u(`Expression Error: ${fe instanceof Error?fe.message:String(fe)}`)}finally{x(null)}},[m]);y.useEffect(()=>{b&&v(N=>{if(N.filter(Ae=>Ae.type==="analysis"&&Ae.analysisType==="daylight_fraction").length===0)return N;let I=!1;const fe=N.map(Ae=>{if(Ae.type==="analysis"&&Ae.analysisType==="daylight_fraction"){const ke=N.find(Se=>Se.id===Ae.sourceLayerId);if(ke){const{slice:Se,range:Be}=Eo(ke.dataset,b,ke.dimensions,ke.id),tt=Array.from({length:ke.dimensions.time},()=>Se);return I=!0,{...Ae,dataset:tt,range:Be}}}return Ae});return I?fe:N})},[b]),y.useEffect(()=>{if(!Qt){ya.current&&(cancelAnimationFrame(ya.current),ya.current=null);return}const N=X=>{Qa.current===0&&(Qa.current=X);const I=X-Qa.current,fe=1e3/ll;I>=fe&&(Qa.current=X,z(Ae=>{if(Ae===null||!nl.current)return Ae;let ke=Ae+1;return ke>nl.current.end&&(ke=nl.current.start),ke})),ya.current=requestAnimationFrame(N)};return ya.current=requestAnimationFrame(N),()=>{ya.current&&(cancelAnimationFrame(ya.current),ya.current=null,Qa.current=0)}},[Qt,ll]);const ge=y.useCallback(()=>{if(!Qt){if(!Pt){if(!b||b.start>=b.end)return;nl.current={...b},z(b.start)}Oa(!1),Kt(!0)}else Oa(!0),Kt(!1)},[Qt,Pt,b]),oe=N=>{Qt&&Kt(!1),Oa(!1),nl.current=null,j(N)},te=y.useCallback((N,X)=>{ba(),jt(I=>I.map(fe=>fe.id===N?{...fe,...X}:fe))},[ba]),de=y.useCallback(()=>{Ka(null),da(!1),ml(null)},[]),Me=y.useCallback(()=>{da(!0)},[]);y.useEffect(()=>{const N=X=>{X.key==="Escape"&&de()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[de]);const De=y.useCallback(N=>{ba(),jt(X=>X.filter(I=>I.id!==N)),wl===N&&ml(null)},[wl,ba]),J=y.useCallback((N,X)=>{ba(),va(I=>I.map(fe=>fe.id===N?{...fe,...X}:fe))},[ba]),ve=y.useCallback(N=>{ba(),va(X=>X.filter(I=>I.id!==N)),qt===N&&Zl(null)},[qt,ba]),Xe=y.useCallback(N=>{ba(),va(X=>[...X,N]),Zl(N.id)},[ba]),Ye=y.useCallback(()=>{if(Ua.length===0)return;const N={artifacts:JSON.parse(JSON.stringify(Ma)),events:JSON.parse(JSON.stringify(Yt))},X=Ua[Ua.length-1];jt(X.artifacts),va(X.events),Ql(I=>[...I,N]),gl(I=>I.slice(0,-1))},[Ua,Ma,Yt]),$e=y.useCallback(()=>{if(Aa.length===0)return;const N={artifacts:JSON.parse(JSON.stringify(Ma)),events:JSON.parse(JSON.stringify(Yt))},X=Aa[Aa.length-1];jt(X.artifacts),va(X.events),gl(I=>[...I,N]),Ql(I=>I.slice(0,-1))},[Aa,Ma,Yt]),yt=y.useCallback(()=>{Ve([])},[]),Ie=y.useCallback(()=>{if(!b||!Ta)return;let N;if(b.start===b.end){const X=Bt(b.start),I=720*60*1e3;N=[new Date(Math.max(Ta[0].getTime(),X.getTime()-I)),new Date(Math.min(Ta[1].getTime(),X.getTime()+I))]}else N=[Bt(b.start),Bt(b.end)];Oe(N)},[b,Ta]),Nt=y.useCallback(()=>{Ta&&Oe(Ta)},[Ta]),et=y.useCallback(N=>{const X=E;if(se.current&&(clearInterval(se.current),se.current=null),X&&Ee.current!==null&&C(X,{visible:Ee.current}),X===N)le(null),Ee.current=null;else{const I=m.find(fe=>fe.id===N);I&&(Ee.current=I.visible,le(N))}},[m,E,C]);y.useEffect(()=>(E&&(se.current=window.setInterval(()=>{v(N=>N.map(X=>X.id===E?{...X,visible:!X.visible}:X))},400)),()=>{se.current&&(clearInterval(se.current),se.current=null)}),[E]);const ot=y.useCallback(async()=>{if(m.length===0){f("Cannot export an empty session.");return}x("Exporting session...");try{const X={version:1,layers:m.map(Se=>{if(Se.type==="basemap"){const{image:Be,...tt}=Se;return tt}else if(Se.type==="image"){const Be=document.createElement("canvas");Be.width=Se.image.width,Be.height=Se.image.height,Be.getContext("2d").drawImage(Se.image,0,0);const Ce=Be.toDataURL("image/png"),{image:Ze,...Qe}=Se;return{...Qe,imageDataUrl:Ce}}else{const{dataset:Be,...tt}=Se;return tt}}),activeLayerId:k,timeRange:b,timeZoomDomain:we?[we[0].toISOString(),we[1].toISOString()]:null,viewState:Ne,showGraticule:K,graticuleDensity:re,showGrid:ye,gridSpacing:D,gridColor:xe,selectedCells:ze,selectionColor:gt,activeTool:L,artifacts:Ma.map(Se=>({...Se})),artifactDisplayOptions:Ja,pathCreationOptions:pa,activityDefinitions:il,nightfallPlotYAxisRange:xl,events:Yt.map(Se=>({...Se}))},I=JSON.stringify(X,null,2),fe=new Blob([I],{type:"application/json"}),Ae=URL.createObjectURL(fe),ke=document.createElement("a");ke.href=Ae,ke.download=`session_${new Date().toISOString()}.json`,document.body.appendChild(ke),ke.click(),document.body.removeChild(ke),URL.revokeObjectURL(Ae)}catch(N){u(`Error exporting session: ${N instanceof Error?N.message:String(N)}`)}finally{x(null)}},[m,k,b,we,Ne,K,re,ye,D,xe,ze,gt,L,Ma,Ja,pa,il,xl]),ct=y.useCallback(N=>{x("Reading config file...");const X=new FileReader;X.onload=I=>{var fe;try{const Ae=JSON.parse((fe=I.target)==null?void 0:fe.result);if(Ae.version!==1)throw new Error("Unsupported config version.");const ke=[];for(const Se of Ae.layers)Se.type==="data"||Se.type==="dte_comms"||Se.type==="lpf_comms"?ke.push(Se.fileName):Se.type==="basemap"&&(ke.push(Se.pngFileName),ke.push(Se.vrtFileName));ke.length>0?_a({config:Ae,requiredFiles:ke}):pt(Ae,[])}catch(Ae){u(`Error reading config file: ${Ae instanceof Error?Ae.message:String(Ae)}`)}finally{x(null)}},X.onerror=()=>{u("Failed to read the file."),x(null)},X.readAsText(N)},[]),pt=y.useCallback(async(N,X)=>{var I;_a(null),x("Restoring session...");try{const fe=new Map;Array.from(X).forEach(Ce=>fe.set(Ce.name,Ce)),v([]),j(null),Oe(null),ue(null),Ve([]),jt([]),va([]);let Ae=[];const Se=N.layers.filter(Ce=>Ce.type!=="analysis").length;let Be=0;for(const Ce of N.layers)if(Ce.type==="basemap"){Be++;const Ze=Math.floor(Be/Se*100);x(`Loading layer ${Be} of ${Se}... ${Ze}%`);const Qe=fe.get(Ce.pngFileName),_e=fe.get(Ce.vrtFileName);if(!Qe)throw new Error(`Required file "${Ce.pngFileName}" was not provided.`);if(!_e)throw new Error(`Required file "${Ce.vrtFileName}" was not provided.`);const Je=await _e.text(),Pe=N0(Je);if(!Pe)throw new Error(`Failed to parse VRT file: ${_e.name}`);const Le=URL.createObjectURL(Qe),mt=await vc(Le);URL.revokeObjectURL(Le);const ut={...Ce,image:mt,vrt:Pe};Ae.push(ut)}else if(Ce.type==="data"||Ce.type==="dte_comms"||Ce.type==="lpf_comms"){Be++;const Ze=Math.floor(Be/Se*100);x(`Loading layer ${Be} of ${Se}... ${Ze}%`);const Qe=fe.get(Ce.fileName);if(!Qe)throw new Error(`Required file "${Ce.fileName}" was not provided.`);const _e=await Qe.arrayBuffer(),{data:Je,shape:Pe,header:Le}=j0(_e),[mt,ut,At]=Pe,la=Array.from({length:At},()=>Array.from({length:mt},()=>new Array(ut)));let Lt=0;if(Le.fortran_order)for(let Xt=0;Xt<At;Xt++)for(let na=0;na<ut;na++)for(let Rt=0;Rt<mt;Rt++)la[Xt][Rt][na]=Je[Lt++];else for(let Xt=0;Xt<mt;Xt++)for(let na=0;na<ut;na++)for(let Rt=0;Rt<At;Rt++)la[Rt][Xt][na]=Je[Lt++];const Vt={...Ce,dataset:la};Ae.push(Vt)}else if(Ce.type==="image"){Be++;const Ze=Math.floor(Be/Se*100);x(`Loading layer ${Be} of ${Se}... ${Ze}%`);const Qe=await vc(Ce.imageDataUrl),{imageDataUrl:_e,...Je}=Ce,Pe={...Je,image:Qe};Ae.push(Pe)}let tt=[...Ae];for(const Ce of N.layers)if(Ce.type==="analysis"){let Ze,Qe;if(Ce.analysisType==="expression"&&Ce.params.expression){const{dataset:_e}=await To(Ce.params.expression,tt,Je=>x(Je));Ze=_e,Qe={...Ce,dataset:Ze}}else{const _e=tt.find(Je=>Je.id===Ce.sourceLayerId);if(!_e)throw new Error(`Source layer with ID ${Ce.sourceLayerId} not found for analysis layer "${Ce.name}".`);if(Ce.analysisType==="nightfall"){const{dataset:Je}=await S0(_e);Ze=Je}else{const Je=N.timeRange||{start:0,end:_e.dimensions.time-1},{slice:Pe}=Eo(_e.dataset,Je,_e.dimensions,_e.id);Ze=Array.from({length:_e.dimensions.time},()=>Pe)}Qe={...Ce,dataset:Ze}}tt.push(Qe)}v(tt),T(N.activeLayerId),j(N.timeRange),z(((I=N.timeRange)==null?void 0:I.start)??null),ue(N.viewState),he(N.showGraticule),je(N.graticuleDensity),g(N.showGrid),ae(N.gridSpacing),ce(N.gridColor),Ve(N.selectedCells),rt(N.selectionColor),B(N.activeTool),jt(N.artifacts||[]),va(N.events||[]),N.timeZoomDomain&&Oe([new Date(N.timeZoomDomain[0]),new Date(N.timeZoomDomain[1])]),Tt(N.artifactDisplayOptions||{waypointDotSize:8,showSegmentLengths:!0,labelFontSize:14,showActivitySymbols:!0}),ht(N.pathCreationOptions||{defaultMaxSegmentLength:200}),ka(N.activityDefinitions||[{id:"DRIVE-0",name:"Drive-0",defaultDuration:60},{id:"DRIVE-5",name:"Drive-5",defaultDuration:0},{id:"DRIVE-10",name:"Drive-10",defaultDuration:60},{id:"DRIVE-15",name:"Drive-15",defaultDuration:60},{id:"DTE_COMMS",name:"TTC_COMMS",defaultDuration:3600},{id:"LPF_COMMS",name:"PL_COMMS",defaultDuration:60},{id:"IDLE",name:"Idle",defaultDuration:60},{id:"SLEEP",name:"Sleep",defaultDuration:60},{id:"SCIENCE",name:"Science",defaultDuration:60}]),ra(N.nightfallPlotYAxisRange||{min:-15,max:15})}catch(fe){u(`Error restoring session: ${fe instanceof Error?fe.message:String(fe)}`)}finally{x(null)}},[]),zt=y.useMemo(()=>({layers:m,activeLayerId:k,isLoading:S,timeRange:b,currentDateIndex:M,hoveredCoords:Y,showGraticule:K,viewState:Ne,graticuleDensity:re,activeTool:L,selectedPixel:_,timeSeriesData:U,timeZoomDomain:we,daylightFractionHoverData:qe,flickeringLayerId:E,showGrid:ye,gridSpacing:D,gridColor:xe,selectedCells:ze,selectionColor:gt,selectedCellForPlot:_t,isPlaying:Qt,isPaused:Pt,playbackSpeed:ll,importRequest:hl,artifacts:Ma,activeArtifactId:wl,artifactCreationMode:ua,isAppendingWaypoints:Xl,draggedInfo:sl,artifactDisplayOptions:Ja,nightfallPlotYAxisRange:xl,isCreatingExpression:Cl,events:Yt,activeEventId:qt,baseMapLayer:cl,primaryDataLayer:ta,activeLayer:Kl,proj:aa,fullTimeDomain:Ta,coordinateTransformer:Ha,snapToCellCorner:kt,calculateRectangleFromCellCorners:Jt,setLayers:v,setActiveLayerId:T,setIsLoading:x,setTimeRange:j,setCurrentDateIndex:z,setHoveredCoords:F,setShowGraticule:he,setViewState:ue,setGraticuleDensity:je,onToolSelect:B,setSelectedPixel:ne,setTimeZoomDomain:Oe,onToggleFlicker:et,setShowGrid:g,setGridSpacing:ae,setGridColor:ce,setSelectedCells:Ve,setSelectionColor:rt,setSelectedCellForPlot:ca,setIsPlaying:Kt,setIsPaused:Oa,onPlaybackSpeedChange:vn,setImportRequest:_a,setArtifacts:jt,setActiveArtifactId:ml,setArtifactCreationMode:Ka,setIsAppendingWaypoints:da,setDraggedInfo:Gl,setArtifactDisplayOptions:Tt,pathCreationOptions:pa,setPathCreationOptions:ht,activityDefinitions:il,setActivityDefinitions:ka,onNightfallPlotYAxisRangeChange:ra,setIsCreatingExpression:ea,setEvents:va,setActiveEventId:Zl,onUpdateEvent:J,onRemoveEvent:ve,onAddEvent:Xe,clearHoverState:bn,onAddDataLayer:Jl,onAddDteCommsLayer:jn,onAddLpfCommsLayer:Nn,onAddBaseMapLayer:V,onAddImageLayer:G,onUpdateLayer:C,onRemoveLayer:Q,onMoveLayerUp:h,onMoveLayerDown:ee,onCalculateNightfallLayer:me,onCalculateDaylightFractionLayer:$,onCreateExpressionLayer:pe,onRecalculateExpressionLayer:ie,handleManualTimeRangeChange:oe,onTogglePlay:ge,onUpdateArtifact:te,onRemoveArtifact:De,onFinishArtifactCreation:de,onStartAppendWaypoints:Me,onClearSelection:yt,onZoomToSelection:Ie,onResetZoom:Nt,onExportConfig:ot,onImportConfig:ct,handleRestoreSession:pt,canUndo:Ua.length>0,canRedo:Aa.length>0,onUndo:Ye,onRedo:$e,latRange:yc,lonRange:pc}),[m,k,S,b,M,Y,K,Ne,re,L,_,U,we,qe,E,ye,D,xe,ze,gt,_t,Qt,Pt,ll,hl,Ma,wl,ua,Xl,sl,Ja,xl,Cl,Yt,qt,cl,ta,Kl,aa,Ta,Ha,kt,Jt,pa,il,Ua.length,Aa.length,v,T,x,j,z,F,he,ue,je,B,ne,Oe,et,g,ae,ce,Ve,rt,ca,Kt,Oa,vn,_a,jt,ml,Ka,da,Gl,Tt,ht,ka,ra,ea,va,Zl,J,ve,Xe,bn,Jl,jn,Nn,V,G,C,Q,h,ee,me,$,pe,ie,oe,ge,te,De,de,Me,yt,Ie,Nt,ot,ct,pt,Ye,$e]);return n.jsx(H0.Provider,{value:zt,children:r})},Qx=["Viridis","Plasma","Inferno","Magma","Cividis","Turbo","Grayscale","Custom"];function B0(r,u,f,o,m){if(r==="Custom"&&o&&o.length>0){const T=[...o].sort((b,j)=>b.value-j.value);if(m){if(T.length===1)return()=>T[0].color;const b=T.map(z=>z.value).slice(1),j=T.map(z=>z.color);return d3.scaleThreshold().domain(b).range(j)}const S=f?[...o].reverse():o;return S.length===1?()=>S[0].color:d3.scaleLinear().domain(S.map(b=>b.value)).range(S.map(b=>b.color)).clamp(!0)}const v=(()=>{switch(r){case"Viridis":return d3.interpolateViridis;case"Plasma":return d3.interpolatePlasma;case"Inferno":return d3.interpolateInferno;case"Magma":return d3.interpolateMagma;case"Cividis":return d3.interpolateCividis;case"Turbo":return d3.interpolateTurbo;case"Grayscale":return d3.interpolateGreys;default:return d3.interpolateViridis}})(),k=f?T=>v(1-T):v;return d3.scaleSequential(u,k)}const bc=20,pn=200,Kx=({colorMap:r,dataRange:u,units:f,inverted:o,customColormap:m,isThreshold:v})=>{const k=y.useRef(null);y.useEffect(()=>{if(!u||!k.current)return;const b=k.current.getContext("2d");if(!b)return;const j=[u.min,u.max],M=B0(r,j,o,m,v);b.clearRect(0,0,bc,pn);for(let z=0;z<pn;z++){const Y=1-z/pn,F=u.min+Y*(u.max-u.min);b.fillStyle=M(F),b.fillRect(0,z,bc,1)}},[r,u,o,m,v]);const T=x=>f==="days"?(x/24).toFixed(1):x<100?x.toFixed(1):Math.round(x),S=y.useMemo(()=>{if(!u)return[];const{min:x,max:b}=u,j=b-x,M=new Map;M.set(b,{value:b,y:0}),M.set(x,{value:x,y:pn}),v&&m&&m.length>1&&m.forEach(Y=>{if(Y.value>x&&Y.value<b){const F=pn*(1-(Y.value-x)/j);M.set(Y.value,{value:Y.value,y:F})}});const z=Array.from(M.values());return z.sort((Y,F)=>Y.y-F.y),z},[u,v,m]);return u?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"relative",style:{height:pn,width:bc},children:n.jsx("canvas",{ref:k,width:bc,height:pn,className:"rounded-sm border border-gray-600 absolute"})}),n.jsxs("div",{className:"relative h-full",style:{height:pn,width:60},children:[S.map(({value:x,y:b})=>n.jsxs("div",{className:"absolute w-full right-0",style:{top:`${b}px`,transform:"translateY(-50%)"},children:[n.jsx("span",{className:"block border-t border-gray-500 w-3 -mr-3 absolute right-full top-1/2"}),n.jsx("span",{className:"text-xs font-mono text-gray-300",children:T(x)})]},x)),f&&n.jsx("span",{className:"absolute -bottom-4 right-1/2 translate-x-1/2 text-xs text-gray-400 mt-1",children:f})]})]}):null},vs=r=>{if(r===0)return"0 hrs";const u=(r/24).toFixed(1);return`${r} hrs (${u} days)`},Y0=r=>r<1e3?`${r.toFixed(0)} m`:r<1e4?`${(r/1e3).toFixed(2)} km`:`${(r/1e3).toFixed(1)} km`,Jx=(r,u,f)=>{if(!r)return 0;try{const o=r.forward(u),m=r.forward(f),v=m[0]-o[0],k=m[1]-o[1];return Math.sqrt(v*v+k*k)}catch{return 0}},q0=(r,u)=>{if(!r||u.length<2)return 0;let f=0;for(let o=0;o<u.length-1;o++)f+=Jx(r,u[o].geoPosition,u[o+1].geoPosition);return f},Ca=({title:r,children:u,defaultOpen:f=!1})=>{const[o,m]=y.useState(f);return n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium text-gray-300 mb-2 bg-gray-900/50 p-2 rounded-md cursor-pointer flex justify-between items-center",onClick:()=>m(!o),children:[n.jsx("span",{children:r}),n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-transform ${o?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),o&&n.jsx("div",{className:"p-3 rounded-md space-y-4 animate-fade-in bg-gray-800/30",children:u})]})},$x=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),Wx=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})});function V0(r){return r.type==="data"||r.type==="analysis"||r.type==="dte_comms"||r.type==="lpf_comms"}function Fx(r){return r.type==="data"}function w0(r){return r.type==="analysis"}function Ix(r){return r.type==="image"}function C0(r){return V0(r)}function Sc(r){return r.type==="analysis"&&r.analysisType==="nightfall"}function _o(r){return r.type==="analysis"&&r.analysisType==="daylight_fraction"}function M0(r){return r.type==="analysis"&&r.analysisType==="expression"}function Px(r,u){return _o(r)?0:u}const A0=r=>{const u=d3.color(r);if(!u)return{hex:"#000000",alpha:1};const{r:f,g:o,b:m,opacity:v}=u.rgb(),k=S=>("0"+Math.round(S).toString(16)).slice(-2);return{hex:`#${k(f)}${k(o)}${k(m)}`,alpha:v}},T0=(r,u)=>{const f=d3.color(r);if(!f)return`rgba(0, 0, 0, ${u})`;const{r:o,g:m,b:v}=f.rgb();return`rgba(${o}, ${m}, ${v}, ${u})`},eg=({stops:r,onStopsChange:u,units:f,layerRange:o})=>{const[m,v]=y.useState("0"),[k,T]=y.useState("#ffffff"),[S,x]=y.useState(1),b=()=>{const z=parseFloat(m);if(isNaN(z))return;const Y=[...r,{value:z,color:T0(k,S)}];Y.sort((F,K)=>F.value-K.value),u(Y)},j=(z,Y)=>{const F=[...r],K=F[z];if("value"in Y){const he=typeof Y.value=="string"?parseFloat(Y.value):Y.value;if(isNaN(he))return;F[z]={...K,value:he},F.sort((Ne,ue)=>Ne.value-ue.value)}else{const{hex:he,alpha:Ne}=A0(K.color),ue="color"in Y?Y.color:he,re="alpha"in Y?Y.alpha:Ne;F[z]={...K,color:T0(ue,re)}}u(F)},M=z=>{u(r.filter((Y,F)=>F!==z))};return n.jsxs("div",{className:"space-y-3 p-3 bg-gray-900/30 rounded-md",children:[n.jsx("h4",{className:"text-xs font-medium text-gray-300",children:"Colormap Stops"}),n.jsx("div",{className:"space-y-2",children:r.map((z,Y)=>{const{hex:F,alpha:K}=A0(z.color),he=Y===0,Ne=he?f==="days"?(o.min/24).toFixed(1):o.min.toFixed(0):f==="days"?z.value.toFixed(1):z.value.toFixed(0);return n.jsxs("div",{className:"grid grid-cols-[20px_1fr_auto_auto_auto] items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-right pr-1 font-mono text-gray-400",children:!he&&">="}),n.jsx("input",{type:"text",defaultValue:Ne,readOnly:he,onBlur:he?void 0:ue=>{let re=parseFloat(ue.target.value);isNaN(re)||j(Y,{value:re})},className:"w-full bg-gray-700 text-white text-sm rounded-md p-1 border border-gray-600 disabled:bg-gray-800 disabled:text-gray-500",disabled:he,title:`Value${f==="days"?" (days)":""}`},Ne+z.color),n.jsx("input",{type:"color",value:F,onChange:ue=>j(Y,{color:ue.target.value}),className:"w-8 h-8 p-0 border-none rounded-md bg-transparent"}),n.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",defaultValue:K.toFixed(2),onBlur:ue=>{let re=parseFloat(ue.target.value);isNaN(re)&&(re=1),re<0&&(re=0),re>1&&(re=1),j(Y,{alpha:re})},className:"w-16 bg-gray-700 text-white text-sm rounded-md p-1 border border-gray-600",placeholder:"Opacity"}),n.jsx("button",{disabled:he,onClick:()=>M(Y),className:"text-gray-500 hover:text-red-400 disabled:opacity-30 disabled:cursor-not-allowed ml-auto",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},Y)})}),n.jsxs("div",{className:"border-t border-gray-600 pt-3 grid grid-cols-[20px_1fr_auto_auto_auto] items-center gap-2",children:[n.jsx("span",{}),n.jsx("input",{type:"number",step:f==="days"?.1:1,value:m,onChange:z=>v(z.target.value),className:"w-full bg-gray-700 text-white text-sm rounded-md p-1 border border-gray-600",placeholder:"Value"}),n.jsx("input",{type:"color",value:k,onChange:z=>T(z.target.value),className:"w-8 h-8 p-0 border-none rounded-md bg-transparent"}),n.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",value:S,onChange:z=>x(Number(z.target.value)),className:"w-16 bg-gray-700 text-white text-sm rounded-md p-1 border border-gray-600",placeholder:"Opacity"}),n.jsx("button",{onClick:b,className:"bg-teal-600 hover:bg-teal-500 text-white text-xs font-semibold py-1.5 px-2 rounded-md",children:"Add"})]})]})},tg=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),ag=r=>{switch(r){case"basemap":return"Basemap Layer";case"data":return"Data Layer";case"analysis":return"Analysis Layer";case"dte_comms":return"DTE Comms Layer";case"lpf_comms":return"LPF Comms Layer";case"image":return"Image Layer";default:return"Layer"}},lg=js.memo(({layer:r,isActive:u,onSelect:f})=>{const{onUpdateLayer:o,onRemoveLayer:m,onMoveLayerUp:v,onMoveLayerDown:k,onCalculateNightfallLayer:T,onCalculateDaylightFractionLayer:S,daylightFractionHoverData:x,flickeringLayerId:b,onToggleFlicker:j,layers:M,onRecalculateExpressionLayer:z,isLoading:Y}=Na(),[F,K]=y.useState(!1),[he,Ne]=y.useState(""),ue=Sc(r),re=M0(r),je=ue&&r.colormap==="Custom",L=C0(r),B=y.useMemo(()=>M.filter(C0).filter(U=>U.id!==r.id).map(U=>Nc(U.name)),[M,r.id]),_=()=>{w0(r)&&r.params.expression&&(Ne(r.params.expression),K(!0))},ne=async()=>{he.trim()&&z&&(await z(r.id,he),K(!1))};return n.jsxs("div",{className:`bg-gray-800/60 rounded-lg border ${u?"border-cyan-500/50":"border-gray-700/80"}`,children:[n.jsxs("div",{className:"flex items-center p-2 gap-2",children:[n.jsx("button",{onClick:()=>o(r.id,{visible:!r.visible}),title:r.visible?"Hide Layer":"Show Layer",className:"text-gray-400 hover:text-white",children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[n.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),n.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.022 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd",style:{opacity:r.visible?1:.3}})]})}),n.jsx("button",{onClick:()=>j(r.id),title:"Flicker Layer",className:`${r.id===b?"text-cyan-400":"text-gray-400 hover:text-white"}`,children:n.jsx(tg,{})}),n.jsxs("div",{className:"flex flex-col gap-0.5",children:[n.jsx("button",{onClick:()=>v(r.id),title:"Move Layer Up",className:"text-gray-400 hover:text-white p-0 h-3",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})}),n.jsx("button",{onClick:()=>k(r.id),title:"Move Layer Down",className:"text-gray-400 hover:text-white p-0 h-3",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),n.jsxs("div",{onClick:f,className:"flex-grow cursor-pointer truncate text-xs",children:[n.jsx("p",{className:"font-medium text-gray-200",title:r.name,children:r.name}),n.jsx("p",{className:"text-xs text-gray-400",children:ag(r.type)}),M0(r)&&r.params.expression&&n.jsxs("p",{className:"text-xs text-gray-500 font-mono truncate mt-1",title:r.params.expression,children:["Expr: ",r.params.expression]})]}),n.jsx("button",{onClick:f,className:"text-gray-400 hover:text-white",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-transform ${u?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})}),n.jsx("button",{onClick:()=>m(r.id),title:"Remove Layer",className:"text-gray-500 hover:text-red-400",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),u&&n.jsxs("div",{className:"p-3 border-t border-gray-700 space-y-4 animate-fade-in",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Layer Name"}),n.jsx("input",{type:"text",value:r.name,onChange:U=>o(r.id,{name:U.target.value}),className:"w-full bg-gray-700 text-white text-sm rounded-md p-1.5 border border-gray-600 focus:border-cyan-500 focus:outline-none",placeholder:"Enter layer name..."})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-gray-400",children:["Opacity: ",Math.round(r.opacity*100),"%"]}),n.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:r.opacity,onChange:U=>o(r.id,{opacity:Number(U.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 mt-1"})]}),Ix(r)&&n.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-3",children:[n.jsx("h4",{className:"text-xs font-medium text-gray-300",children:"Transformation"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Scale X: ",r.scaleX.toFixed(2),"x"]}),n.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.01",value:r.scaleX,onChange:U=>o(r.id,{scaleX:Number(U.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Scale Y: ",r.scaleY.toFixed(2),"x"]}),n.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.01",value:r.scaleY,onChange:U=>o(r.id,{scaleY:Number(U.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Rotation: ",r.rotation.toFixed(0),""]}),n.jsx("input",{type:"range",min:"-180",max:"180",step:"1",value:r.rotation,onChange:U=>o(r.id,{rotation:Number(U.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Position X"}),n.jsx("input",{type:"number",step:"100",value:r.position[0].toFixed(0),onChange:U=>{const be=[Number(U.target.value),r.position[1]];o(r.id,{position:be})},className:"w-full bg-gray-700 text-white text-sm rounded-md px-2 py-1.5 border border-gray-600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Position Y"}),n.jsx("input",{type:"number",step:"100",value:r.position[1].toFixed(0),onChange:U=>{const be=[r.position[0],Number(U.target.value)];o(r.id,{position:be})},className:"w-full bg-gray-700 text-white text-sm rounded-md px-2 py-1.5 border border-gray-600"})]})]}),n.jsx("button",{onClick:()=>{o(r.id,{scaleX:1,scaleY:1,rotation:0})},className:"w-full bg-gray-600 hover:bg-gray-500 text-white font-medium py-1.5 px-3 rounded-md text-xs transition-all",children:"Reset Transformation"}),n.jsx("button",{onClick:()=>{const U=document.createElement("canvas"),be=r.originalWidth*r.scaleX,we=r.originalHeight*r.scaleY;U.width=be,U.height=we;const Oe=U.getContext("2d");Oe.translate(U.width/2,U.height/2),Oe.rotate(r.rotation*Math.PI/180),Oe.scale(r.scaleX,r.scaleY),Oe.drawImage(r.image,-r.originalWidth/2,-r.originalHeight/2,r.originalWidth,r.originalHeight),U.toBlob(qe=>{if(qe){const Ge=URL.createObjectURL(qe),E=document.createElement("a");E.href=Ge,E.download=`transformed_${r.fileName}`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(Ge)}},"image/png")},className:"w-full bg-green-600 hover:bg-green-500 text-white font-semibold py-2 px-3 rounded-md text-xs transition-all",children:"Export Transformed Image"})]})]}),L&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Colormap"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("select",{value:r.colormap,onChange:U=>o(r.id,{colormap:U.target.value}),className:"flex-grow bg-gray-700 border border-gray-600 text-white text-xs rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block p-2.5",children:Qx.map(U=>n.jsx("option",{value:U,children:U},U))}),n.jsxs("label",{className:"flex items-center gap-1.5 text-xs text-gray-400 cursor-pointer whitespace-nowrap",children:[n.jsx("input",{type:"checkbox",checked:!!r.colormapInverted,onChange:U=>o(r.id,{colormapInverted:U.target.checked}),className:"w-4 h-4 text-cyan-600 bg-gray-700 border-gray-600 rounded focus:ring-cyan-500"}),"Invert"]})]})]}),r.colormap==="Custom"&&n.jsx(eg,{layerRange:r.range,stops:(r.customColormap||[]).map(U=>({...U,value:je?U.value/24:U.value})),onStopsChange:U=>{const be=U.map(we=>({...we,value:je?we.value*24:we.value}));o(r.id,{customColormap:be})},units:je?"days":void 0}),r.colormap!=="Custom"&&n.jsxs("div",{className:"space-y-2 p-3 bg-gray-900/30 rounded-md",children:[n.jsx("h4",{className:"text-xs font-medium text-gray-300",children:"Transparency Thresholds"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Lower "}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("input",{type:"number",step:"any",value:r.transparencyLowerThreshold??"",onChange:U=>{const be=U.target.value===""?void 0:Number(U.target.value);o(r.id,{transparencyLowerThreshold:be})},placeholder:"None",className:"flex-1 bg-gray-700 text-white text-sm rounded-md px-2 py-1.5 border border-gray-600"}),r.transparencyLowerThreshold!==void 0&&n.jsx("button",{onClick:()=>o(r.id,{transparencyLowerThreshold:void 0}),className:"text-gray-400 hover:text-red-400 flex-shrink-0",title:"Clear",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Upper "}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("input",{type:"number",step:"any",value:r.transparencyUpperThreshold??"",onChange:U=>{const be=U.target.value===""?void 0:Number(U.target.value);o(r.id,{transparencyUpperThreshold:be})},placeholder:"None",className:"flex-1 bg-gray-700 text-white text-sm rounded-md px-2 py-1.5 border border-gray-600"}),r.transparencyUpperThreshold!==void 0&&n.jsx("button",{onClick:()=>o(r.id,{transparencyUpperThreshold:void 0}),className:"text-gray-400 hover:text-red-400 flex-shrink-0",title:"Clear",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),n.jsx("p",{className:"text-xs text-gray-500 italic",children:"Values at or beyond thresholds become transparent"})]})]}),n.jsx("div",{className:"flex flex-col items-center",children:n.jsx(Kx,{colorMap:r.colormap,customColormap:r.customColormap,dataRange:ue?{min:-(r.params.clipValue??0),max:r.params.clipValue??0}:r.range,units:w0(r)?Sc(r)?"days":"%":void 0,inverted:r.colormapInverted,isThreshold:r.colormap==="Custom"})})]}),_o(r)&&x&&n.jsxs("div",{className:"mt-3 p-3 bg-gray-900/40 rounded-md text-sm space-y-2 animate-fade-in",children:[n.jsx("h4",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"Hover Details"}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-300",children:"Daylight Fraction:"}),n.jsxs("span",{className:"font-mono text-cyan-300",children:[x.fraction.toFixed(1),"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-300",children:"Total Daylight:"}),n.jsx("span",{className:"font-mono text-cyan-300",children:vs(x.dayHours)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-300",children:"Total Night:"}),n.jsx("span",{className:"font-mono text-cyan-300",children:vs(x.nightHours)})]}),n.jsxs("div",{className:"border-t border-gray-700/50 pt-2 mt-2 space-y-1",children:[n.jsx("p",{className:"text-xs text-gray-400",children:"Day Periods"}),n.jsxs("div",{className:"flex justify-between text-xs pl-2",children:[n.jsx("span",{className:"text-gray-400",children:"Count:"}),n.jsx("span",{className:"font-mono text-cyan-400",children:x.dayPeriods})]}),n.jsxs("div",{className:"flex justify-between text-xs pl-2",children:[n.jsx("span",{className:"text-gray-400",children:"Longest:"}),n.jsx("span",{className:"font-mono text-cyan-400",children:vs(x.longestDayPeriod)})]}),n.jsxs("div",{className:"flex justify-between text-xs pl-2",children:[n.jsx("span",{className:"text-gray-400",children:"Shortest:"}),n.jsx("span",{className:"font-mono text-cyan-400",children:vs(x.shortestDayPeriod)})]})]}),n.jsxs("div",{className:"border-t border-gray-700/50 pt-2 mt-2 space-y-1",children:[n.jsx("p",{className:"text-xs text-gray-400",children:"Night Periods"}),n.jsxs("div",{className:"flex justify-between text-xs pl-2",children:[n.jsx("span",{className:"text-gray-400",children:"Count:"}),n.jsx("span",{className:"font-mono text-cyan-400",children:x.nightPeriods})]}),n.jsxs("div",{className:"flex justify-between text-xs pl-2",children:[n.jsx("span",{className:"text-gray-400",children:"Longest:"}),n.jsx("span",{className:"font-mono text-cyan-400",children:vs(x.longestNightPeriod)})]}),n.jsxs("div",{className:"flex justify-between text-xs pl-2",children:[n.jsx("span",{className:"text-gray-400",children:"Shortest:"}),n.jsx("span",{className:"font-mono text-cyan-400",children:vs(x.shortestNightPeriod)})]})]})]}),Fx(r)&&n.jsxs("div",{className:"border-t border-gray-700 pt-3 space-y-2",children:[n.jsx("button",{onClick:()=>T(r.id),className:"w-full bg-blue-600 hover:bg-blue-500 text-white font-semibold py-2 px-3 rounded-md text-xs transition-all",children:"Calculate Nightfall Forecast"}),n.jsx("button",{onClick:()=>S(r.id),className:"w-full bg-amber-600 hover:bg-amber-500 text-white font-semibold py-2 px-3 rounded-md text-xs transition-all",children:"Calculate Daylight Fraction"})]}),ue&&n.jsxs("div",{className:"border-t border-gray-700 pt-3 space-y-3",children:[n.jsx("h4",{className:"text-xs font-medium text-gray-300",children:"Colormap Clipping"}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs text-gray-400",children:["Clip colormap at: ",`${((r.params.clipValue??0)/24).toFixed(1)} days`]}),n.jsx("input",{type:"range",min:"0",max:"1000",step:"1",value:r.params.clipValue,onChange:U=>o(r.id,{params:{...r.params,clipValue:Number(U.target.value)}}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500 mt-1"})]})]}),re&&n.jsxs("div",{className:"border-t border-gray-700 pt-3 space-y-3",children:[n.jsx("h4",{className:"text-xs font-medium text-gray-300",children:"Expression"}),F?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"New Expression"}),n.jsx("textarea",{value:he,onChange:U=>Ne(U.target.value),rows:3,className:"w-full bg-gray-700 text-white text-xs rounded-md p-1.5 border border-gray-600 font-mono",placeholder:"Enter expression..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Available Variables"}),n.jsx("div",{className:"bg-gray-800 p-2 rounded-md text-xs font-mono text-gray-400 flex flex-wrap gap-x-2 gap-y-1",children:B.length>0?B.map(U=>n.jsx("span",{children:U},U)):n.jsx("span",{className:"text-gray-500",children:"No variables available"})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>K(!1),className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-semibold py-1.5 px-3 rounded-md text-xs",children:"Cancel"}),n.jsx("button",{onClick:ne,disabled:!he.trim()||!!Y,className:"flex-1 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold py-1.5 px-3 rounded-md text-xs",children:Y&&Y.toLowerCase().includes("expression")?"Calculating...":"Apply"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-gray-900/40 p-2 rounded-md",children:n.jsx("p",{className:"text-xs font-mono text-gray-300 break-words",children:r.params.expression||"No expression defined"})}),n.jsx("button",{onClick:_,disabled:!!Y,className:"w-full bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-2 px-3 rounded-md text-xs transition-all",children:"Edit Expression"})]})]})]})]})}),ng=()=>{const{onAddDataLayer:r,onAddDteCommsLayer:u,onAddLpfCommsLayer:f,onAddBaseMapLayer:o,onAddImageLayer:m,isLoading:v}=Na(),[k,T]=y.useState(!1),S=y.useRef(null),x=y.useRef(null),b=y.useRef(null),j=y.useRef(null),M=y.useRef(null),z=y.useRef(null),[Y,F]=y.useState(null),[K,he]=y.useState(null),Ne=y.useRef(null),ue=(_,ne)=>{var U;(U=_.target.files)!=null&&U[0]&&ne(_.target.files[0]),T(!1)},re=async _=>{var ne;(ne=_.target.files)!=null&&ne[0]&&await m(_.target.files[0]),T(!1)},je=_=>{var ne;(ne=_.target.files)!=null&&ne[0]&&F(_.target.files[0])},L=_=>{var ne;(ne=_.target.files)!=null&&ne[0]&&he(_.target.files[0])},B=async()=>{Y&&K&&(await o(Y,K),F(null),he(null),j.current&&(j.current.value=""),M.current&&(M.current.value="")),T(!1)};return y.useEffect(()=>{const _=ne=>{Ne.current&&!Ne.current.contains(ne.target)&&T(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),n.jsxs("div",{className:"relative",ref:Ne,children:[n.jsxs("button",{onClick:()=>T(!k),disabled:!!v,className:"w-full bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-2 px-4 rounded-md text-xs transition-all flex items-center justify-center gap-2",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Layer"]}),k&&n.jsxs("div",{className:"absolute top-full mt-2 w-full bg-gray-800 rounded-md shadow-xl z-10 border border-gray-700 p-2 space-y-2",children:[n.jsx("input",{ref:S,type:"file",accept:".npy",className:"hidden",onChange:_=>ue(_,r)}),n.jsx("button",{onClick:()=>{var _;return(_=S.current)==null?void 0:_.click()},className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-1 px-3 rounded-md text-xs transition-all text-left",children:"Data Layer (.npy)"}),n.jsx("input",{ref:x,type:"file",accept:".npy",className:"hidden",onChange:_=>ue(_,u)}),n.jsx("button",{onClick:()=>{var _;return(_=x.current)==null?void 0:_.click()},className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-1 px-3 rounded-md text-xs transition-all text-left",children:"DTE Comms Layer (.npy)"}),n.jsx("input",{ref:b,type:"file",accept:".npy",className:"hidden",onChange:_=>ue(_,f)}),n.jsx("button",{onClick:()=>{var _;return(_=b.current)==null?void 0:_.click()},className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-1 px-3 rounded-md text-xs transition-all text-left",children:"LPF Comms Layer (.npy)"}),n.jsx("input",{ref:z,type:"file",accept:"image/*",className:"hidden",onChange:re}),n.jsx("button",{onClick:()=>{var _;return(_=z.current)==null?void 0:_.click()},className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-1 px-3 rounded-md text-xs transition-all text-left",children:"Image Layer"}),n.jsxs("div",{className:"border-t border-gray-700 pt-2",children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Base Map (PNG + VRT)"}),n.jsx("input",{ref:j,type:"file",accept:".png",className:"hidden",onChange:je}),n.jsx("button",{onClick:()=>{var _;return(_=j.current)==null?void 0:_.click()},className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-1 px-3 rounded-md text-xs transition-all text-left mb-1",children:Y?` ${Y.name}`:"Select PNG..."}),n.jsx("input",{ref:M,type:"file",accept:".vrt",className:"hidden",onChange:L}),n.jsx("button",{onClick:()=>{var _;return(_=M.current)==null?void 0:_.click()},className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-1 px-3 rounded-md text-xs transition-all text-left mb-1",children:K?` ${K.name}`:"Select VRT..."}),n.jsx("button",{onClick:B,disabled:!Y||!K,className:"w-full bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-600 text-white font-semibold py-1 px-3 rounded-md text-xs transition-all",children:"Add Base Map"})]})]})]})},sg=()=>{const{layers:r,onCreateExpressionLayer:u,setIsCreatingExpression:f,isLoading:o}=Na(),[m,v]=y.useState("Expression Layer"),[k,T]=y.useState(""),S=y.useMemo(()=>r.filter(j=>j.type==="data"||j.type==="analysis"||j.type==="dte_comms"||j.type==="lpf_comms").map(j=>Nc(j.name)),[r]),x=async()=>{m.trim()&&k.trim()&&await u(m,k)},b=!!o&&o.toLowerCase().includes("expression");return n.jsxs("div",{className:"p-3 bg-gray-900/50 border border-cyan-700 rounded-md text-xs text-cyan-200 space-y-4",children:[n.jsx("h3",{className:"text-sm font-medium text-cyan-300",children:"Create Expression Layer"}),b&&n.jsxs("div",{className:"p-4 bg-cyan-900/50 border border-cyan-500 rounded-md text-center space-y-3 animate-pulse",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"animate-spin h-5 w-5 text-cyan-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n.jsx("span",{className:"text-cyan-300 font-semibold",children:o})]}),n.jsx("p",{className:"text-xs text-cyan-400",children:"Please wait, this may take a while for large datasets..."})]}),S.length===0&&!b&&n.jsx("div",{className:"p-2 bg-red-900/30 border border-red-600/50 rounded-md text-xs text-red-200",children:"No data layers available. Please load data layers before creating expressions."}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Layer Name"}),n.jsx("input",{type:"text",value:m,onChange:j=>v(j.target.value),disabled:b,className:"w-full bg-gray-700 text-white text-sm rounded-md p-1.5 border border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Expression"}),n.jsx("textarea",{value:k,onChange:j=>T(j.target.value),rows:4,disabled:b,className:"w-full bg-gray-700 text-white text-sm rounded-md p-1.5 border border-gray-600 font-mono disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"(Nightfall_Forecast > 0) AND (DTE_Comms == 1)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Available Variables"}),n.jsx("div",{className:"bg-gray-800 p-2 rounded-md text-xs font-mono text-gray-400 flex flex-wrap gap-x-3 gap-y-1",children:S.length>0?S.map(j=>n.jsx("span",{children:j},j)):n.jsx("span",{className:"text-gray-500",children:"No data layers available."})})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>f(!1),disabled:b,className:"bg-gray-600 hover:bg-gray-500 disabled:bg-gray-800 disabled:cursor-not-allowed text-white font-semibold py-1.5 px-3 rounded-md text-xs",children:"Cancel"}),n.jsx("button",{onClick:x,disabled:!m.trim()||!k.trim()||b,className:"bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed text-white font-semibold py-1.5 px-3 rounded-md text-xs",children:b?"Computing...":"Create"})]})]})},ig=()=>{const{layers:r,activeLayerId:u,setActiveLayerId:f,isCreatingExpression:o,setIsCreatingExpression:m,isLoading:v}=Na(),k=y.useMemo(()=>r.some(T=>T.type==="data"||T.type==="analysis"||T.type==="dte_comms"||T.type==="lpf_comms"),[r]);return o?n.jsx(sg,{}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-base font-semibold text-cyan-300",children:"Layer Management"}),n.jsx(ng,{}),!k&&n.jsx("div",{className:"p-2 bg-yellow-900/30 border border-yellow-600/50 rounded-md text-xs text-yellow-200",children:"Load a data layer before creating expression layers"}),n.jsx("button",{onClick:()=>m(!0),disabled:!!v||!k,className:"w-full bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-2 px-4 rounded-md text-xs transition-all flex items-center justify-center gap-2",title:k?"Create a layer from an expression":"Load a data layer first",children:"Add Expression Layer"}),v&&n.jsx("div",{className:"text-xs text-cyan-300 text-center p-2 bg-gray-900/50 rounded-md",children:v}),n.jsx("div",{className:"space-y-2",children:r.length>0?[...r].reverse().map(T=>n.jsx(lg,{layer:T,isActive:T.id===u,onSelect:()=>f(T.id===u?null:T.id)},T.id)):n.jsx("p",{className:"text-xs text-gray-500 text-center p-4",children:"No layers loaded."})})]})},cg=(r,u)=>{const f=u.find(o=>o.id===r);return(f==null?void 0:f.name)||r},rg=(r,u)=>{if(!r.activities||r.activities.length===0)return"5";for(let f=r.activities.length-1;f>=0;f--){const o=r.activities[f];if(o.type.startsWith("DRIVE-"))return o.type.replace("DRIVE-","")}return"5"},og=(r,u)=>{const f=new Date,o=f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),m=f.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});let v=`# creation date: ${o}, ${m}

`;r.waypoints.forEach((x,b)=>{const j=b+1,[M,z]=x.geoPosition;v+=`- ID: ${j}
`,v+=`  latitude_degrees: ${z.toFixed(5)}
`,v+=`  longitude_degrees: ${M.toFixed(5)}
`,v+=`  tasks:
`;const Y=[],F=[];if(b===0&&Y.push("Start"),x.activities&&x.activities.length>0&&x.activities.forEach(K=>{K.type.startsWith("DRIVE-")||(Y.push(cg(K.type,u)),F.push(K.duration))}),b<r.waypoints.length-1){const K=rg(x),he=b+2;Y.push(`Drive-${K}_Traverse_${he}`),F.push(0)}Y.forEach(K=>{v+=`    - ${K}
`}),v+=`  duration_s:
`,F.forEach(K=>{v+=`    - ${K}
`}),b<r.waypoints.length-1&&(v+=`
`)});const k=new Blob([v],{type:"text/yaml"}),T=URL.createObjectURL(k),S=document.createElement("a");S.href=T,S.download=`${r.name.replace(/\s+/g,"_")}_${f.toISOString().split("T")[0]}.yaml`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(T)},X0=js.memo(({artifact:r,isActive:u,onSelect:f})=>{const{onUpdateArtifact:o,onRemoveArtifact:m,onStartAppendWaypoints:v,proj:k,activityDefinitions:T}=Na(),S=(j,M)=>{o(r.id,{[j]:M})},x=(j,M,z)=>{const Y=[...j.waypoints];Y[M]={...Y[M],...z},o(j.id,{waypoints:Y})},b=(j,M)=>{const z=j.waypoints.filter((Y,F)=>F!==M);o(j.id,{waypoints:z})};return n.jsxs("div",{className:`bg-gray-800/60 rounded-lg border ${u?"border-cyan-500/50":"border-gray-700/80"}`,children:[n.jsxs("div",{className:"flex items-center p-2 gap-2",children:[n.jsx("button",{onClick:()=>S("visible",!r.visible),title:r.visible?"Hide":"Show",className:"text-gray-400 hover:text-white",children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[n.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),n.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.022 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd",style:{opacity:r.visible?1:.3}})]})}),n.jsxs("div",{onClick:f,className:"flex-grow cursor-pointer truncate text-xs",children:[n.jsx("p",{className:"font-medium text-gray-200",title:r.name,children:r.name}),n.jsx("p",{className:"text-xs text-gray-400",children:r.type.charAt(0).toUpperCase()+r.type.slice(1)})]}),n.jsx("button",{onClick:f,className:"text-gray-400 hover:text-white",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-transform ${u?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})}),n.jsx("button",{onClick:()=>m(r.id),title:"Remove",className:"text-gray-500 hover:text-red-400",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),u&&n.jsxs("div",{className:"p-3 border-t border-gray-700 space-y-4 text-xs animate-fade-in",children:[n.jsxs(Ca,{title:"General",defaultOpen:!0,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"font-medium text-gray-300",children:"Name"}),n.jsx("input",{type:"text",value:r.name,onChange:j=>S("name",j.target.value),className:"w-40 bg-gray-700 text-white rounded-md p-1 border border-gray-600 text-right"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"font-medium text-gray-300",children:"Color"}),n.jsx("input",{type:"color",value:r.color,onChange:j=>S("color",j.target.value),className:"w-10 h-8 p-0 border-none rounded-md bg-transparent cursor-pointer"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block font-medium text-gray-300 mb-1",children:["Thickness: ",r.thickness,"px"]}),n.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:r.thickness,onChange:j=>S("thickness",Number(j.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]})]}),r.type==="circle"&&n.jsx(Ca,{title:"Circle Properties",defaultOpen:!0,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"font-medium text-gray-300",children:"Radius (m)"}),n.jsx("input",{type:"number",min:"0",value:r.radius,onChange:j=>o(r.id,{radius:Number(j.target.value)}),className:"w-24 bg-gray-700 text-white rounded-md p-1 border border-gray-600 text-right"})]})}),r.type==="rectangle"&&n.jsxs(Ca,{title:"Rectangle Properties",defaultOpen:!0,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"font-medium text-gray-300",children:"Width (m)"}),n.jsx("input",{type:"number",min:"0",value:r.width,onChange:j=>o(r.id,{width:Number(j.target.value)}),className:"w-24 bg-gray-700 text-white rounded-md p-1 border border-gray-600 text-right"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"font-medium text-gray-300",children:"Height (m)"}),n.jsx("input",{type:"number",min:"0",value:r.height,onChange:j=>o(r.id,{height:Number(j.target.value)}),className:"w-24 bg-gray-700 text-white rounded-md p-1 border border-gray-600 text-right"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block font-medium text-gray-300 mb-1",children:["Rotation: ",r.rotation,""]}),n.jsx("input",{type:"range",min:"0",max:"360",step:"1",value:r.rotation,onChange:j=>o(r.id,{rotation:Number(j.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]})]}),r.type==="path"&&n.jsxs(n.Fragment,{children:[n.jsx(Ca,{title:"Path Tools",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("button",{onClick:v,className:"w-full bg-teal-600 hover:bg-teal-500 text-white text-sm font-semibold py-1.5 px-2 rounded-md",children:"Add Waypoints"}),n.jsx("button",{onClick:()=>og(r,T),className:"w-full bg-blue-600 hover:bg-blue-500 text-white text-sm font-semibold py-1.5 px-2 rounded-md",title:"Export path to YAML format",children:"Export to YAML"})]})}),n.jsx(Ca,{title:`Path Waypoints (${Y0(q0(k,r.waypoints))})`,defaultOpen:!0,children:n.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:r.waypoints.map((j,M)=>n.jsx("div",{className:"bg-gray-900/40 p-1.5 rounded-md",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"font-mono text-gray-400",children:[M+1,"."]}),n.jsx("input",{type:"text",value:j.label,onChange:z=>x(r,M,{label:z.target.value}),className:"w-full bg-gray-700 text-white rounded p-1 border border-gray-600 text-sm",placeholder:"Label"}),n.jsx("button",{onClick:()=>b(r,M),title:"Remove Waypoint",className:"text-gray-500 hover:text-red-400",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})},j.id))})})]})]})]})});X0.displayName="ArtifactItem";const ug=()=>{const{artifacts:r,activeArtifactId:u,setActiveArtifactId:f,artifactCreationMode:o,setArtifactCreationMode:m,onFinishArtifactCreation:v,primaryDataLayer:k,baseMapLayer:T,isAppendingWaypoints:S,pathCreationOptions:x,setPathCreationOptions:b,activityDefinitions:j,setActivityDefinitions:M,proj:z}=Na(),Y=!!k||!!T,F=y.useMemo(()=>r.filter(K=>K.type==="path").reduce((K,he)=>K+q0(z,he.waypoints),0),[r,z]);return Y?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-base font-semibold text-cyan-300",children:"Artifacts"}),F>0&&n.jsxs("span",{className:"text-xs font-medium text-cyan-400 bg-cyan-900/30 px-2 py-1 rounded-md",title:"Total cumulative distance of all paths",children:["Total: ",Y0(F)]})]}),o==="path"?n.jsxs("div",{className:"p-3 bg-cyan-900/50 border border-cyan-700 rounded-md text-xs text-cyan-200 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Drawing Path:"})," Click on the map to add waypoints. Press 'Esc' or click finish when done."]}),n.jsx("button",{onClick:v,className:"w-full bg-cyan-600 hover:bg-cyan-500 text-white font-semibold py-1.5 px-3 rounded-md text-xs transition-all",children:"Finish Drawing"})]}):S?n.jsxs("div",{className:"p-3 bg-teal-900/50 border border-teal-700 rounded-md text-xs text-teal-200 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Appending to Path:"})," Click on the map to add new waypoints. Press 'Esc' or click finish to stop."]}),n.jsx("button",{onClick:v,className:"w-full bg-teal-600 hover:bg-teal-500 text-white font-semibold py-1.5 px-3 rounded-md text-xs transition-all",children:"Finish Appending"})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-xs text-gray-400",children:"Add and manage annotations on the map. Click a button below, then click on the map to place an artifact."}),n.jsx(Ca,{title:"Path Creation Settings",defaultOpen:!1,children:n.jsx("div",{className:"space-y-2",children:n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-xs text-gray-300",children:"Max Segment Length (m):"}),n.jsx("input",{type:"number",min:"0",step:"100",value:x.defaultMaxSegmentLength??"",placeholder:"No limit",onChange:K=>{const he=K.target.value===""?null:parseFloat(K.target.value);b({defaultMaxSegmentLength:he})},className:"bg-gray-700 text-white rounded p-2 border border-gray-600 text-sm",title:"Maximum distance between waypoints. A visual guide circle will be shown during path creation."}),n.jsx("span",{className:"text-xs text-gray-500",children:"Set a limit before creating a path. Leave empty for no limit."})]})})}),n.jsx(Ca,{title:"Default Activity Settings",defaultOpen:!1,children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Manage activity types with custom names and default durations:"}),j.map((K,he)=>n.jsxs("div",{className:"flex items-center gap-2 bg-gray-700/50 p-1.5 rounded border border-gray-600",children:[n.jsx("input",{type:"text",value:K.name,onChange:Ne=>{const ue=[...j];ue[he]={...ue[he],name:Ne.target.value},M(ue)},className:"bg-gray-800 text-white rounded px-2 py-1 border border-gray-600 text-xs flex-1",placeholder:"Activity Name",title:"Name used in UI and YAML export"}),n.jsx("input",{type:"number",min:"0",step:"1",value:K.defaultDuration,onChange:Ne=>{const ue=parseInt(Ne.target.value)||0,re=[...j];re[he]={...re[he],defaultDuration:ue>=0?ue:0},M(re)},className:"bg-gray-800 text-white rounded px-2 py-1 border border-gray-600 text-xs w-16 text-right",title:"Default duration in seconds"}),n.jsx("span",{className:"text-xs text-gray-500",children:"s"}),n.jsx("button",{onClick:()=>{confirm(`Remove activity "${K.name}"?`)&&M(j.filter((Ne,ue)=>ue!==he))},className:"text-red-400 hover:text-red-300 p-0.5",title:"Remove activity",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},K.id)),n.jsx("button",{onClick:()=>{const K=`CUSTOM_${Date.now()}`;M([...j,{id:K,name:"New Activity",defaultDuration:60}])},className:"w-full bg-blue-600 hover:bg-blue-500 text-white text-xs font-semibold py-1 px-2 rounded",children:"+ Add Activity Type"})]})}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsx("button",{onClick:()=>m("circle"),className:"bg-teal-700 hover:bg-teal-600 text-white font-semibold py-2 px-2 rounded-md text-xs transition-all text-center",children:"Add Circle"}),n.jsx("button",{onClick:()=>m("rectangle"),className:"bg-indigo-700 hover:bg-indigo-600 text-white font-semibold py-2 px-2 rounded-md text-xs transition-all text-center",children:"Add Rect"}),n.jsx("button",{onClick:()=>m("path"),className:"bg-purple-700 hover:bg-purple-600 text-white font-semibold py-2 px-2 rounded-md text-xs transition-all text-center",children:"Add Path"})]})]}),n.jsx("div",{className:"space-y-2",children:r.length>0?[...r].reverse().map(K=>n.jsx(X0,{artifact:K,isActive:K.id===u,onSelect:()=>f(K.id===u?null:K.id)},K.id)):n.jsx("p",{className:"text-xs text-gray-500 text-center p-4",children:"No artifacts created."})})]}):n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-cyan-300",children:"Artifacts"}),n.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Load a basemap or data layer to add artifacts."})]})},dg=()=>{const{events:r,activeEventId:u,setActiveEventId:f,onAddEvent:o,onUpdateEvent:m,onRemoveEvent:v,primaryDataLayer:k,currentDateIndex:T,setCurrentDateIndex:S,timeRange:x}=Na(),[b,j]=y.useState(""),[M,z]=y.useState(""),[Y,F]=y.useState(!0),[K,he]=y.useState(0),Ne=!!k,ue=k?k.dimensions.time-1:0,re=()=>{if(!b.trim()||!Ne)return;const L=Y?T??0:Math.max(0,Math.min(K,ue)),B={id:`event-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:b.trim(),description:M.trim(),dateIndex:L,visible:!0,color:"#FFA500"};o(B),j(""),z("")},je=L=>{S(L)};return Ne?n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-base font-semibold text-cyan-300",children:"Events"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Add and manage temporal event markers on the timeline."}),n.jsx(Ca,{title:"Add New Event",defaultOpen:!0,children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-xs text-gray-300",children:"Event Name:"}),n.jsx("input",{type:"text",value:b,onChange:L=>j(L.target.value),placeholder:"e.g., Launch Event",maxLength:24,className:"bg-gray-700 text-white rounded p-2 border border-gray-600 text-sm"}),n.jsxs("span",{className:"text-xs text-gray-500",children:[b.length,"/24 characters"]})]}),n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-xs text-gray-300",children:"Description:"}),n.jsx("textarea",{value:M,onChange:L=>z(L.target.value),placeholder:"Optional description",rows:3,className:"bg-gray-700 text-white rounded p-2 border border-gray-600 text-sm resize-none"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("span",{className:"text-xs text-gray-300",children:"Date:"}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"radio",checked:Y,onChange:()=>F(!0),className:"w-4 h-4"}),n.jsxs("span",{className:"text-gray-300",children:["Use current date ",T!==null&&`(${Vn(T)})`]})]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"radio",checked:!Y,onChange:()=>F(!1),className:"w-4 h-4"}),n.jsx("span",{className:"text-gray-300",children:"Custom date"})]}),!Y&&n.jsxs("div",{className:"ml-6 space-y-1",children:[n.jsx("input",{type:"number",min:"0",max:ue,value:K,onChange:L=>he(parseInt(L.target.value)||0),className:"bg-gray-700 text-white rounded p-2 border border-gray-600 text-sm w-full"}),n.jsxs("span",{className:"text-xs text-gray-500",children:["Index: ",K," / ",ue," (",Vn(K),")"]})]})]}),n.jsx("button",{onClick:re,disabled:!b.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-2 px-3 rounded-md text-sm transition-all",children:"Add Event"})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Events List"}),r.length>0?n.jsx("div",{className:"space-y-2",children:[...r].sort((L,B)=>L.dateIndex-B.dateIndex).map(L=>n.jsxs("div",{className:`p-3 rounded-md border transition-all cursor-pointer ${L.id===u?"bg-orange-900/30 border-orange-500":"bg-gray-700/30 border-gray-600 hover:border-gray-500"}`,onClick:()=>f(L.id===u?null:L.id),children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:B=>{B.stopPropagation(),m(L.id,{visible:!L.visible})},className:"flex-shrink-0",title:L.visible?"Hide event":"Show event",children:L.visible?n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-orange-400",viewBox:"0 0 20 20",fill:"currentColor",children:[n.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),n.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:[n.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"}),n.jsx("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})]})}),n.jsx("input",{type:"color",value:L.color,onChange:B=>{B.stopPropagation(),m(L.id,{color:B.target.value})},className:"w-6 h-6 rounded cursor-pointer",title:"Change event color"}),n.jsx("span",{className:"text-sm font-medium text-white truncate",children:L.name})]}),n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:Vn(L.dateIndex)}),L.description&&n.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:L.description})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("button",{onClick:B=>{B.stopPropagation(),je(L.dateIndex)},className:"p-1 hover:bg-gray-600 rounded",title:"Jump to event date",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-cyan-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})}),n.jsx("button",{onClick:B=>{B.stopPropagation(),window.confirm(`Delete event "${L.name}"?`)&&v(L.id)},className:"p-1 hover:bg-red-600 rounded",title:"Delete event",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}),L.id===u&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600 space-y-2 animate-fade-in",children:[n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-xs text-gray-400",children:"Edit Name:"}),n.jsx("input",{type:"text",value:L.name,onChange:B=>m(L.id,{name:B.target.value}),onClick:B=>B.stopPropagation(),maxLength:24,className:"bg-gray-700 text-white rounded p-2 border border-gray-600 text-sm"}),n.jsxs("span",{className:"text-xs text-gray-500",children:[L.name.length,"/24 characters"]})]}),n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-xs text-gray-400",children:"Edit Description:"}),n.jsx("textarea",{value:L.description,onChange:B=>m(L.id,{description:B.target.value}),onClick:B=>B.stopPropagation(),rows:3,className:"bg-gray-700 text-white rounded p-2 border border-gray-600 text-sm resize-none"})]}),n.jsxs("label",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-xs text-gray-400",children:"Edit Date Index:"}),n.jsx("input",{type:"number",min:"0",max:ue,value:L.dateIndex,onChange:B=>m(L.id,{dateIndex:parseInt(B.target.value)||0}),onClick:B=>B.stopPropagation(),className:"bg-gray-700 text-white rounded p-2 border border-gray-600 text-sm"}),n.jsx("span",{className:"text-xs text-gray-500",children:Vn(L.dateIndex)})]})]})]},L.id))}):n.jsx("p",{className:"text-xs text-gray-500 text-center p-4",children:"No events created."})]})]}):n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-cyan-300",children:"Events"}),n.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Load a data layer to add events."})]})},fg=()=>{const{primaryDataLayer:r,selectedCells:u,selectionColor:f,setSelectionColor:o,onClearSelection:m}=Na();return!r?n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-cyan-300",children:"Measurement"}),n.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Load a data layer to select cells."})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-base font-semibold text-cyan-300",children:"Cell Selection"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Click on the map to select or deselect individual cells."}),n.jsxs(Ca,{title:"Selection Tools",defaultOpen:!0,children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-300",children:"Selected cells:"}),n.jsx("span",{className:"font-mono text-cyan-300",children:u.length})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-xs font-medium text-gray-300",children:"Highlight Color"}),n.jsx("input",{type:"color",value:f,onChange:k=>o(k.target.value),className:"w-10 h-8 p-0 border-none rounded-md bg-transparent cursor-pointer"})]}),n.jsx("button",{onClick:m,disabled:u.length===0,className:"w-full bg-red-600 hover:bg-red-500 disabled:bg-gray-600 text-white font-semibold py-2 px-3 rounded-md text-xs transition-all",children:"Clear Selection"})]})]})},hg=()=>{const{primaryDataLayer:r,baseMapLayer:u,activeLayer:f,timeRange:o,showGraticule:m,setShowGraticule:v,graticuleDensity:k,setGraticuleDensity:T,selectedPixel:S,showGrid:x,setShowGrid:b,gridSpacing:j,setGridSpacing:M,gridColor:z,setGridColor:Y,isPlaying:F,isPaused:K,playbackSpeed:he,onTogglePlay:Ne,onPlaybackSpeedChange:ue,artifactDisplayOptions:re,setArtifactDisplayOptions:je,nightfallPlotYAxisRange:L,onNightfallPlotYAxisRangeChange:B}=Na(),_=!!r||!!u,ne=(f==null?void 0:f.type)==="analysis"&&f.analysisType==="nightfall";return n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-base font-semibold text-cyan-300",children:"Configuration"}),_?n.jsxs(n.Fragment,{children:[ne&&n.jsxs(Ca,{title:"Plot Options",defaultOpen:!0,children:[n.jsx("h4",{className:"text-xs font-medium text-gray-300 mb-2",children:"Nightfall Plot Y-Axis Range"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-xs text-gray-400",children:"Min (days)"}),n.jsx("input",{type:"number",step:"1",value:L.min,onChange:U=>B({...L,min:Number(U.target.value)}),className:"w-full bg-gray-700 text-white text-xs rounded-md p-1 border border-gray-600"}),n.jsx("label",{className:"text-xs text-gray-400",children:"Max (days)"}),n.jsx("input",{type:"number",step:"1",value:L.max,onChange:U=>B({...L,max:Number(U.target.value)}),className:"w-full bg-gray-700 text-white text-xs rounded-md p-1 border border-gray-600"})]})]}),n.jsx(Ca,{title:"Time Animation",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("button",{onClick:Ne,disabled:!F&&!K&&(!o||o.start>=o.end),className:"flex items-center justify-center gap-2 w-28 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed text-white font-semibold py-2 px-3 rounded-md text-xs transition-all",title:F?"Stop":K?"Resume Playback":!o||o.start>=o.end?"Select a time range on the slider to enable playback":"Play",children:[F?n.jsx(Wx,{}):n.jsx($x,{}),n.jsx("span",{children:F?"Stop":K?"Resume":"Play"})]}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Speed: ",he," FPS"]}),n.jsx("input",{type:"range",min:"1",max:"30",step:"1",value:he,onChange:U=>ue(Number(U.target.value)),disabled:F,className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 disabled:opacity-50"})]})]})}),n.jsxs(Ca,{title:"View Options",defaultOpen:!0,children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:m,onChange:U=>v(U.target.checked),className:"w-4 h-4 text-cyan-600 bg-gray-700 border-gray-600 rounded focus:ring-cyan-500"}),n.jsx("span",{children:"Show Graticule"})]}),m&&n.jsxs("div",{className:"pt-3",children:[n.jsxs("label",{className:"block text-xs font-medium text-gray-400",children:["Density: ",k.toFixed(1),"x"]}),n.jsx("input",{type:"range",min:"0.2",max:"5",step:"0.1",value:k,onChange:U=>T(Number(U.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 mt-1"})]})]}),n.jsxs(Ca,{title:"Artifact Display Options",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-gray-400",children:["Waypoint Dot Size: ",re.waypointDotSize,"px"]}),n.jsx("input",{type:"range",min:"2",max:"20",step:"1",value:re.waypointDotSize,onChange:U=>je({...re,waypointDotSize:Number(U.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 mt-1"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-gray-400",children:["Label Font Size: ",re.labelFontSize,"px"]}),n.jsx("input",{type:"range",min:"8",max:"24",step:"1",value:re.labelFontSize,onChange:U=>je({...re,labelFontSize:Number(U.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 mt-1"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-xs text-gray-300",children:[n.jsx("input",{type:"checkbox",checked:re.showSegmentLengths,onChange:U=>je({...re,showSegmentLengths:U.target.checked}),className:"w-4 h-4 text-cyan-600 bg-gray-700 border-gray-600 rounded focus:ring-cyan-500"}),n.jsx("span",{children:"Show Segment Lengths"})]})]}),n.jsxs(Ca,{title:"Grid Overlay",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:x,onChange:U=>b(U.target.checked),className:"w-4 h-4 text-cyan-600 bg-gray-700 border-gray-600 rounded focus:ring-cyan-500"}),n.jsx("span",{children:"Show Grid Overlay"})]}),x&&n.jsxs("div",{className:"pt-3 space-y-3 border-t border-gray-700/50 mt-3",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-gray-400",children:["Spacing: ",j,"m"]}),n.jsx("input",{type:"range",min:"10",max:"1000",step:"10",value:j,onChange:U=>M(Number(U.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 mt-1"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-xs font-medium text-gray-400",children:"Color"}),n.jsx("input",{type:"color",value:z.slice(0,7),onChange:U=>Y(U.target.value+"80"),className:"w-10 h-8 p-0 border-none rounded-md bg-transparent cursor-pointer"})]})]})]}),n.jsx(Ca,{title:"Selected Pixel",defaultOpen:!0,children:n.jsx("div",{className:"text-xs space-y-2",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Pixel (X, Y):"}),n.jsx("span",{className:"font-mono text-green-400",children:S?`${S.x}, ${S.y}`:"---"})]})})})]}):n.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Load a data layer or import a session to see more options."})]})},mg=()=>{const{activeTool:r}=Na(),u=()=>{switch(r){case"layers":return n.jsx(ig,{});case"artifacts":return n.jsx(ug,{});case"events":return n.jsx(dg,{});case"measurement":return n.jsx(fg,{});case"config":return n.jsx(hg,{});default:return null}};return n.jsx("aside",{className:"bg-gray-800/50 border-r border-gray-700 p-4 w-80 flex-shrink-0 flex flex-col gap-6 overflow-y-auto",children:u()})},Do="w-9 h-9 bg-gray-800/80 hover:bg-gray-700/90 text-gray-200 rounded-md flex items-center justify-center text-xl font-mono transition-colors shadow-lg border border-gray-600/50",xg=({onZoomIn:r,onZoomOut:u,onResetView:f})=>n.jsxs("div",{className:"absolute top-3 left-3 z-30 flex flex-col gap-1.5",children:[n.jsx("button",{onClick:r,className:Do,"aria-label":"Zoom In",title:"Zoom In",children:"+"}),n.jsx("button",{onClick:u,className:Do,"aria-label":"Zoom Out",title:"Zoom Out",children:"-"}),n.jsx("button",{onClick:f,className:Do,"aria-label":"Reset View",title:"Reset View",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 0l-5-5"})})})]});function zo(r,u=16){const[f,o]=y.useState(r);return y.useEffect(()=>{const m=setTimeout(()=>{o(r)},u);return()=>{clearTimeout(m)}},[r,u]),f}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yg=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(u,f,o)=>o?o.toUpperCase():f.toLowerCase()),E0=r=>{const u=yg(r);return u.charAt(0).toUpperCase()+u.slice(1)},G0=(...r)=>r.filter((u,f,o)=>!!u&&u.trim()!==""&&o.indexOf(u)===f).join(" ").trim(),pg=r=>{for(const u in r)if(u.startsWith("aria-")||u==="role"||u==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=y.forwardRef(({color:r="currentColor",size:u=24,strokeWidth:f=2,absoluteStrokeWidth:o,className:m="",children:v,iconNode:k,...T},S)=>y.createElement("svg",{ref:S,...vg,width:u,height:u,stroke:r,strokeWidth:o?Number(f)*24/Number(u):f,className:G0("lucide",m),...!v&&!pg(T)&&{"aria-hidden":"true"},...T},[...k.map(([x,b])=>y.createElement(x,b)),...Array.isArray(v)?v:[v]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=(r,u)=>{const f=y.forwardRef(({className:o,...m},v)=>y.createElement(bg,{ref:v,iconNode:u,className:G0(`lucide-${gg(E0(r))}`,`lucide-${r}`,o),...m}));return f.displayName=E0(r),f};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=[["path",{d:"M10 14v-4",key:"suye4c"}],["path",{d:"M22 14v-4",key:"14q9d5"}],["path",{d:"M6 14v-4",key:"14a6bd"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],Z0=ia("battery-medium",jg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Q0=ia("camera",Ng);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],wg=ia("chevron-down",Sg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Mg=ia("chevron-up",Cg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],K0=ia("circle-pause",Ag);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=[["path",{d:"M10 18a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H5a3 3 0 0 1-3-3 1 1 0 0 1 1-1z",key:"ioqxb1"}],["path",{d:"M13 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1l-.81 3.242a1 1 0 0 1-.97.758H8",key:"1rs59n"}],["path",{d:"M14 4h3a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-3",key:"105ega"}],["path",{d:"M18 6h4",key:"66u95g"}],["path",{d:"m5 10-2 8",key:"xt2lic"}],["path",{d:"m7 18 2-8",key:"1bzku2"}]],J0=ia("drill",Tg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],$0=ia("flag",Eg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],zg=ia("folder-open",Dg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],W0=ia("list-checks",Lg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Og=ia("plus",Rg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=[["path",{d:"M4 10a7.31 7.31 0 0 0 10 10Z",key:"1fzpp3"}],["path",{d:"m9 15 3-3",key:"88sc13"}],["path",{d:"M17 13a6 6 0 0 0-6-6",key:"15cc6u"}],["path",{d:"M21 13A10 10 0 0 0 11 3",key:"11nf8s"}]],F0=ia("satellite-dish",_g);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=[["path",{d:"m13.5 6.5-3.148-3.148a1.205 1.205 0 0 0-1.704 0L6.352 5.648a1.205 1.205 0 0 0 0 1.704L9.5 10.5",key:"dzhfyz"}],["path",{d:"M16.5 7.5 19 5",key:"1ltcjm"}],["path",{d:"m17.5 10.5 3.148 3.148a1.205 1.205 0 0 1 0 1.704l-2.296 2.296a1.205 1.205 0 0 1-1.704 0L13.5 14.5",key:"nfoymv"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}],["path",{d:"M9.352 10.648a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l4.296-4.296a1.205 1.205 0 0 0 0-1.704l-2.296-2.296a1.205 1.205 0 0 0-1.704 0z",key:"nv9zqy"}]],I0=ia("satellite",kg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Hg=ia("save",Ug);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]],P0=ia("square-activity",Bg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],eh=ia("sunset",Yg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],th=ia("target",qg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=[["path",{d:"M16.05 10.966a5 2.5 0 0 1-8.1 0",key:"m5jpwb"}],["path",{d:"m16.923 14.049 4.48 2.04a1 1 0 0 1 .001 1.831l-8.574 3.9a2 2 0 0 1-1.66 0l-8.574-3.91a1 1 0 0 1 0-1.83l4.484-2.04",key:"rbg3g8"}],["path",{d:"M16.949 14.14a5 2.5 0 1 1-9.9 0L10.063 3.5a2 2 0 0 1 3.874 0z",key:"vap8c8"}],["path",{d:"M9.194 6.57a5 2.5 0 0 0 5.61 0",key:"15hn5c"}]],ah=ia("traffic-cone",Vg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],lh=ia("trash-2",Xg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]],nh=ia("waypoints",Gg),D0=[{name:null,icon:null,label:"None"},{name:"sunset",icon:eh,label:"hibernation"},{name:"battery-medium",icon:Z0,label:"charging"},{name:"circle-pause",icon:K0,label:"pause"},{name:"flag",icon:$0,label:"objective"},{name:"target",icon:th,label:"target"},{name:"traffic-cone",icon:ah,label:"commissioning"},{name:"list-checks",icon:W0,label:"checkout"},{name:"camera",icon:Q0,label:"imaging"},{name:"satellite-dish",icon:F0,label:"comms"},{name:"satellite",icon:I0,label:"LPF comms"},{name:"square-activity",icon:P0,label:"science station"},{name:"drill",icon:J0,label:"drill"},{name:"waypoints",icon:nh,label:"wisdom scan"}],Zg=({isOpen:r,waypoint:u,defaultColor:f,onClose:o,onSave:m})=>{const[v,k]=y.useState(u.activitySymbol||null),[T,S]=y.useState(u.activityLabel||""),[x,b]=y.useState(u.activitySymbolSize||24),[j,M]=y.useState(u.activitySymbolColor||f),[z,Y]=y.useState(u.activityOffset!==void 0?u.activityOffset:35),[F,K]=y.useState(u.description||""),[he,Ne]=y.useState(!1),ue=y.useRef(null);if(y.useEffect(()=>{const L=B=>{ue.current&&!ue.current.contains(B.target)&&Ne(!1)};if(he)return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[he]),!r)return null;const re=()=>{m({activitySymbol:v||void 0,activityLabel:T||void 0,activitySymbolSize:v?x:void 0,activitySymbolColor:v?j:void 0,activityOffset:v?z:void 0,description:F}),o()},je=L=>{L.target===L.currentTarget&&o()};return n.jsx("div",{"data-modal":"true",className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:je,children:n.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl max-w-2xl w-full max-h-[90vh] flex flex-col border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[n.jsx("h2",{className:"text-xl font-semibold text-white",children:"Edit Waypoint"}),n.jsx("button",{onClick:o,className:"text-gray-400 hover:text-white transition-colors",title:"Close",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Coordinates"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Longitude"}),n.jsx("input",{type:"text",value:u.geoPosition[0].toFixed(6),readOnly:!0,className:"w-full bg-gray-700/50 text-gray-300 rounded px-3 py-2 font-mono text-sm cursor-not-allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Latitude"}),n.jsx("input",{type:"text",value:u.geoPosition[1].toFixed(6),readOnly:!0,className:"w-full bg-gray-700/50 text-gray-300 rounded px-3 py-2 font-mono text-sm cursor-not-allowed"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Activity Symbol"}),n.jsxs("div",{className:"relative",ref:ue,children:[n.jsxs("button",{type:"button",onClick:()=>Ne(!he),className:"w-full bg-gray-700 text-white rounded px-3 py-2 border border-gray-600 hover:border-gray-500 focus:outline-none focus:border-blue-500 flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-2",children:(()=>{const L=D0.find(_=>_.name===v),B=L==null?void 0:L.icon;return n.jsxs(n.Fragment,{children:[B&&n.jsx(B,{className:"w-5 h-5",style:{color:j},strokeWidth:2}),n.jsx("span",{children:(L==null?void 0:L.label)||"None"})]})})()}),n.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),he&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg max-h-80 overflow-y-auto",children:D0.map(L=>{const B=L.icon,_=v===L.name;return n.jsxs("button",{type:"button",onClick:()=>{k(L.name),Ne(!1)},className:`w-full px-3 py-2 flex items-center gap-3 hover:bg-gray-600 transition-colors ${_?"bg-blue-600/20":""}`,children:[n.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:B&&n.jsx(B,{className:"w-5 h-5",style:{color:_?j:"#9ca3af"},strokeWidth:2})}),n.jsx("span",{className:`text-sm ${_?"text-blue-400":"text-gray-300"}`,children:L.label})]},L.name||"none")})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Activity Label"}),n.jsx("input",{type:"text",value:T,onChange:L=>S(L.target.value),className:"w-full bg-gray-700 text-white rounded px-3 py-2 border border-gray-600 focus:outline-none focus:border-blue-500",placeholder:"e.g., Drilling, Rest Stop, Target Point...",disabled:!v}),!v&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select an activity symbol to enable this field"})]}),v&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Symbol Size"}),n.jsx("input",{type:"range",min:"16",max:"48",step:"2",value:x,onChange:L=>b(Number(L.target.value)),className:"w-full"}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[n.jsx("span",{children:"Small"}),n.jsxs("span",{className:"font-mono",children:[x,"px"]}),n.jsx("span",{children:"Large"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offset Distance"}),n.jsx("input",{type:"range",min:"20",max:"100",step:"5",value:z,onChange:L=>Y(Number(L.target.value)),className:"w-full"}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[n.jsx("span",{children:"Near"}),n.jsxs("span",{className:"font-mono",children:[z,"px"]}),n.jsx("span",{children:"Far"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Symbol Color"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"color",value:j,onChange:L=>M(L.target.value),className:"w-12 h-10 rounded cursor-pointer bg-gray-700 border border-gray-600"}),n.jsx("input",{type:"text",value:j,onChange:L=>M(L.target.value),className:"flex-1 bg-gray-700 text-white rounded px-3 py-2 border border-gray-600 focus:outline-none focus:border-blue-500 font-mono text-sm",placeholder:f})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),n.jsx("textarea",{value:F,onChange:L=>K(L.target.value),className:"w-full bg-gray-700 text-white rounded px-3 py-2 border border-gray-600 focus:outline-none focus:border-blue-500 resize-none",rows:4,placeholder:"Add a description for this waypoint..."})]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-gray-700",children:[n.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"Cancel"}),n.jsx("button",{onClick:re,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors font-medium",children:"Save"})]})]})})},sh="lunagis_activity_templates",Qg=r=>{try{const u=localStorage.getItem(sh);return u?JSON.parse(u):[]}catch(u){const f=u instanceof Error?u.message:"Unknown error";return r==null||r(`Failed to load activity templates: ${f}`,"Template Load Error"),[]}},z0=(r,u)=>{try{localStorage.setItem(sh,JSON.stringify(r))}catch(f){const o=f instanceof Error?f.message:"Unknown error";u==null||u(`Failed to save activity templates: ${o}`,"Template Save Error")}},jc=()=>`activity_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;function Kg({waypoint:r,activityDefinitions:u,showError:f}){const[o,m]=y.useState(r.activities||[]),[v,k]=y.useState(r.description||""),[T,S]=y.useState(!1),[x,b]=y.useState(!1),[j,M]=y.useState(Qg(f)),[z,Y]=y.useState(!1),[F,K]=y.useState(""),[he,Ne]=y.useState(!1),[ue,re]=y.useState(null),[je,L]=y.useState(!1),B=y.useRef(null),_=y.useRef(null);y.useEffect(()=>{const ye=r.activities||[],g=r.description||"",D=JSON.stringify(o)!==JSON.stringify(ye);L(D||v!==g)},[o,v,r.activities,r.description]),y.useEffect(()=>{const ye=g=>{B.current&&!B.current.contains(g.target)&&S(!1),_.current&&!_.current.contains(g.target)&&b(!1)};return document.addEventListener("mousedown",ye),()=>document.removeEventListener("mousedown",ye)},[]);const ne=y.useCallback(ye=>{const g=u.find(ae=>ae.id===ye),D={id:jc(),type:ye,duration:(g==null?void 0:g.defaultDuration)??60};m(ae=>[...ae,D]),S(!1)},[u]),U=y.useCallback(ye=>{m(g=>g.filter(D=>D.id!==ye))},[]),be=y.useCallback(ye=>{ye!==0&&m(g=>{const D=[...g];return[D[ye-1],D[ye]]=[D[ye],D[ye-1]],D})},[]),we=y.useCallback(ye=>{m(g=>{if(ye===g.length-1)return g;const D=[...g];return[D[ye],D[ye+1]]=[D[ye+1],D[ye]],D})},[]),Oe=y.useCallback((ye,g)=>{const D=parseInt(g);(g===""||!isNaN(D)&&D>=0)&&m(ae=>ae.map(xe=>xe.id===ye?{...xe,duration:g===""?0:D}:xe))},[]),qe=y.useCallback((ye,g)=>{m(D=>D.map(ae=>ae.id===ye?{...ae,type:g}:ae))},[]),Ge=y.useCallback(()=>{if(!F.trim()){alert("Please enter a template name");return}const ye={id:jc(),name:F.trim(),activities:o.map(D=>({...D,id:jc()}))},g=[...j,ye];M(g),z0(g,f),Y(!1),K("")},[F,o,j,f]),E=y.useCallback(ye=>{const g=ye.activities.map(D=>({...D,id:jc()}));m(g),Ne(!1),re(null),b(!1)},[]),le=y.useCallback(ye=>{je&&o.length>0?(re(ye),Ne(!0),b(!1)):E(ye)},[je,o.length,E]),se=y.useCallback((ye,g)=>{if(g.stopPropagation(),confirm("Are you sure you want to delete this template?")){const D=j.filter(ae=>ae.id!==ye);M(D),z0(D,f)}},[j,f]),Ee=y.useCallback(()=>o.find(g=>typeof g.duration!="number"||g.duration<0)?(alert("All activity durations must be non-negative numbers"),null):{activities:o,description:v.trim()},[o,v]);return{activities:o,description:v,isAddDropdownOpen:T,isTemplateDropdownOpen:x,templates:j,showSaveTemplateDialog:z,templateName:F,showLoadConfirmation:he,templateToLoad:ue,hasUnsavedChanges:je,addDropdownRef:B,templateDropdownRef:_,setDescription:k,setIsAddDropdownOpen:S,setIsTemplateDropdownOpen:b,setShowSaveTemplateDialog:Y,setTemplateName:K,setShowLoadConfirmation:Ne,handleAddActivity:ne,handleRemoveActivity:U,handleMoveUp:be,handleMoveDown:we,handleDurationChange:Oe,handleTypeChange:qe,handleSaveTemplate:Ge,handleLoadTemplate:le,confirmLoadTemplate:E,handleDeleteTemplate:se,validateAndGetUpdates:Ee}}const ih=js.memo(({activity:r,index:u,totalCount:f,activityDefinitions:o,onTypeChange:m,onDurationChange:v,onMoveUp:k,onMoveDown:T,onRemove:S})=>n.jsxs("div",{className:"bg-gray-700 rounded border border-gray-600 px-2.5 py-1.5 flex items-center gap-2",children:[n.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-gray-800 rounded flex items-center justify-center text-xs font-medium text-gray-300",children:u+1}),n.jsx("select",{value:r.type,onChange:x=>m(r.id,x.target.value),className:"flex-1 bg-gray-800 text-white rounded px-2 py-1 border border-gray-600 focus:outline-none focus:border-blue-500 text-xs",children:o.map(x=>n.jsx("option",{value:x.id,children:x.name},x.id))}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"number",min:"0",step:"1",value:r.duration,onChange:x=>v(r.id,x.target.value),className:"w-16 bg-gray-800 text-white rounded px-2 py-1 border border-gray-600 focus:outline-none focus:border-blue-500 text-xs text-right",placeholder:"Dur"}),n.jsx("span",{className:"text-xs text-gray-400 w-4",children:"s"})]}),n.jsxs("div",{className:"flex gap-0.5",children:[n.jsx("button",{onClick:()=>k(u),disabled:u===0,className:"text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors p-0.5",title:"Move up",children:n.jsx(Mg,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>T(u),disabled:u===f-1,className:"text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors p-0.5",title:"Move down",children:n.jsx(wg,{className:"w-3.5 h-3.5"})})]}),n.jsx("button",{onClick:()=>S(r.id),className:"text-red-400 hover:text-red-300 transition-colors p-0.5",title:"Remove activity",children:n.jsx(lh,{className:"w-3.5 h-3.5"})})]}));ih.displayName="ActivityItem";const Jg=({isOpen:r,waypoint:u,onClose:f,onSave:o})=>{const{activityDefinitions:m}=Na(),{showError:v}=Oo(),{activities:k,description:T,isAddDropdownOpen:S,isTemplateDropdownOpen:x,templates:b,showSaveTemplateDialog:j,templateName:M,showLoadConfirmation:z,templateToLoad:Y,addDropdownRef:F,templateDropdownRef:K,setDescription:he,setIsAddDropdownOpen:Ne,setIsTemplateDropdownOpen:ue,setShowSaveTemplateDialog:re,setTemplateName:je,setShowLoadConfirmation:L,handleAddActivity:B,handleRemoveActivity:_,handleMoveUp:ne,handleMoveDown:U,handleDurationChange:be,handleTypeChange:we,handleSaveTemplate:Oe,handleLoadTemplate:qe,confirmLoadTemplate:Ge,handleDeleteTemplate:E,validateAndGetUpdates:le}=Kg({waypoint:u,activityDefinitions:m,showError:v});if(!r)return null;const se=()=>{const ce=le();ce&&(o({activities:ce.activities&&ce.activities.length>0?ce.activities:void 0,description:ce.description||void 0}),f())},Ee=ce=>{ce.target===ce.currentTarget&&f()},ye=()=>k.reduce((ce,ze)=>ce+ze.duration,0),g=ce=>{ce.stopPropagation()},D=ce=>{ce.target===ce.currentTarget&&(ce.stopPropagation(),ce.preventDefault())},ae=ce=>{ce.stopPropagation()},xe=ce=>{ce.stopPropagation()};return n.jsxs(n.Fragment,{children:[n.jsx("div",{"data-modal":"true",className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:Ee,onWheel:D,onKeyDown:xe,onKeyUp:xe,onMouseDown:g,onMouseUp:g,onMouseMove:g,children:n.jsxs("div",{ref:modalRef,className:"bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl flex flex-col border border-gray-700",style:{height:"85vh"},onWheel:ae,onKeyDown:xe,children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-700 flex-shrink-0",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-white",children:"Activity Timeline Editor"}),n.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Waypoint: ",u.label]})]}),n.jsx("button",{onClick:f,className:"text-gray-400 hover:text-white transition-colors",title:"Close",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",ref:K,children:[n.jsxs("button",{onClick:()=>ue(!x),className:"w-full bg-gray-700 hover:bg-gray-600 text-white rounded px-3 py-1.5 text-sm border border-gray-600 transition-colors flex items-center justify-center gap-2",children:[n.jsx(zg,{className:"w-4 h-4"}),"Load Template"]}),x&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:b.length===0?n.jsx("div",{className:"px-4 py-3 text-sm text-gray-400 text-center",children:"No templates saved"}):b.map(ce=>n.jsxs("div",{className:"px-3 py-2 hover:bg-gray-600 transition-colors flex items-center justify-between group",children:[n.jsxs("button",{onClick:()=>qe(ce),className:"flex-1 text-left text-sm text-gray-300",children:[n.jsx("div",{className:"font-medium",children:ce.name}),n.jsxs("div",{className:"text-xs text-gray-500",children:[ce.activities.length," activities"]})]}),n.jsx("button",{onClick:ze=>E(ce.id,ze),className:"opacity-0 group-hover:opacity-100 text-red-400 hover:text-red-300 transition-opacity p-1",title:"Delete template",children:n.jsx(lh,{className:"w-4 h-4"})})]},ce.id))})]}),n.jsxs("button",{onClick:()=>re(!0),disabled:k.length===0,className:"bg-gray-700 hover:bg-gray-600 text-white rounded px-3 py-1.5 text-sm border border-gray-600 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",title:k.length===0?"Add activities before saving template":"Save as template",children:[n.jsx(Hg,{className:"w-4 h-4"}),"Save as Template"]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Activity Plan"}),k.length>0&&n.jsxs("span",{className:"text-xs text-gray-400",children:["Total: ",ye(),"s (",k.length," activities)"]})]}),n.jsxs("div",{className:"space-y-1.5",children:[k.map((ce,ze)=>n.jsx(ih,{activity:ce,index:ze,totalCount:k.length,activityDefinitions:m,onTypeChange:we,onDurationChange:be,onMoveUp:ne,onMoveDown:U,onRemove:_},ce.id)),n.jsxs("div",{className:"relative",ref:F,children:[n.jsxs("button",{onClick:()=>Ne(!S),className:"w-full bg-gray-700/50 hover:bg-gray-700 border-2 border-dashed border-gray-600 hover:border-blue-500 text-gray-400 hover:text-blue-400 rounded px-2.5 py-1.5 transition-colors flex items-center justify-center gap-2 text-sm",children:[n.jsx(Og,{className:"w-4 h-4"}),"Add Activity"]}),S&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:m.map(ce=>n.jsx("button",{onClick:()=>B(ce.id),className:"w-full px-3 py-1.5 text-left text-sm text-gray-300 hover:bg-gray-600 transition-colors",children:ce.name},ce.id))})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Description"}),n.jsx("textarea",{value:T,onChange:ce=>he(ce.target.value),placeholder:"Add waypoint description...",className:"w-full bg-gray-700 text-white rounded px-3 py-2 border border-gray-600 focus:outline-none focus:border-blue-500 resize-none text-sm",rows:3})]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 px-4 py-3 border-t border-gray-700 flex-shrink-0",children:[n.jsx("button",{onClick:f,className:"px-4 py-1.5 text-sm text-gray-300 hover:text-white transition-colors",children:"Cancel"}),n.jsx("button",{onClick:se,className:"px-5 py-1.5 text-sm bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors font-medium",children:"Save"})]})]})}),j&&n.jsx("div",{"data-modal":"true",className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[110] flex items-center justify-center p-4",onWheel:D,onKeyDown:xe,children:n.jsx("div",{className:"bg-gray-800 rounded-lg shadow-2xl max-w-md w-full border border-gray-700",children:n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Save Activity Template"}),n.jsx("input",{type:"text",value:M,onChange:ce=>je(ce.target.value),placeholder:"Enter template name",className:"w-full bg-gray-700 text-white rounded px-3 py-2 border border-gray-600 focus:outline-none focus:border-blue-500",autoFocus:!0,onKeyDown:ce=>{ce.stopPropagation(),ce.key==="Enter"&&Oe(),ce.key==="Escape"&&re(!1)}}),n.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:()=>{re(!1),je("")},className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Oe,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors font-medium",children:"Save"})]})]})})}),z&&Y&&n.jsx("div",{"data-modal":"true",className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[110] flex items-center justify-center p-4",onWheel:D,onKeyDown:xe,children:n.jsx("div",{className:"bg-gray-800 rounded-lg shadow-2xl max-w-md w-full border border-gray-700",children:n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Unsaved Changes"}),n.jsx("p",{className:"text-gray-300 text-sm",children:"You have unsaved changes to the current activity plan. Loading a template will replace all current activities. Do you want to continue?"}),n.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:()=>{L(!1),setTemplateToLoad(null)},className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"Cancel"}),n.jsx("button",{onClick:()=>Ge(Y),className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors font-medium",children:"Continue"})]})]})})})]})},$g={sunset:eh,"battery-medium":Z0,"circle-pause":K0,flag:$0,target:th,"traffic-cone":ah,"list-checks":W0,camera:Q0,"satellite-dish":F0,satellite:I0,"square-activity":P0,drill:J0,waypoints:nh},Wg=({artifacts:r,proj:u,viewState:f,containerWidth:o,containerHeight:m,showActivitySymbols:v})=>{if(!v||!u||!f||o<=0||m<=0||!f.scale||f.scale<=0)return null;const k=T=>{if(!T||!Array.isArray(T)||T.length!==2||!isFinite(T[0])||!isFinite(T[1]))return null;const S=window.devicePixelRatio||1,x=(T[0]-f.center[0])*f.scale*S+o*S/2,b=(f.center[1]-T[1])*f.scale*S+m*S/2;return!isFinite(x)||!isFinite(b)?null:[x/S,b/S]};return n.jsx("div",{className:"absolute inset-0 pointer-events-none",children:r.map(T=>!T.visible||T.type!=="path"?null:T.waypoints.map((S,x)=>{if(!S.activitySymbol)return null;try{if(!S.geoPosition||!Array.isArray(S.geoPosition)||S.geoPosition.length!==2||!isFinite(S.geoPosition[0])||!isFinite(S.geoPosition[1]))return console.warn(`ActivitySymbolsOverlay: Waypoint ${S.id} has invalid geoPosition`,S),null;const b=u.forward(S.geoPosition);if(!b||!Array.isArray(b)||b.length!==2)return console.warn(`ActivitySymbolsOverlay: Invalid projection result for waypoint ${S.id}`,b),null;const j=k(b);if(!j)return console.warn(`ActivitySymbolsOverlay: Invalid canvas position for waypoint ${S.id}`),null;const[M,z]=j;let Y=0,F=-35;const K=S.activityOffset!==void 0?S.activityOffset:35;if(T.waypoints.length>1){let ne=null;if(x===0){const U=T.waypoints[1],be=u.forward(U.geoPosition),we=k(be);if(we){const[Oe,qe]=we,Ge=Oe-M,E=qe-z,le=Math.sqrt(Ge*Ge+E*E);if(le>0){const se=[Ge/le,E/le];ne=[-se[1],se[0]]}}}else if(x===T.waypoints.length-1){const U=T.waypoints[x-1],be=u.forward(U.geoPosition),we=k(be);if(we){const[Oe,qe]=we,Ge=M-Oe,E=z-qe,le=Math.sqrt(Ge*Ge+E*E);if(le>0){const se=[Ge/le,E/le];ne=[-se[1],se[0]]}}}else{const U=T.waypoints[x-1],be=T.waypoints[x+1],we=u.forward(U.geoPosition),Oe=u.forward(be.geoPosition),qe=k(we),Ge=k(Oe);if(qe&&Ge){const[E,le]=qe,[se,Ee]=Ge,ye=M-E,g=z-le,D=Math.sqrt(ye*ye+g*g),ae=se-M,xe=Ee-z,ce=Math.sqrt(ae*ae+xe*xe);if(D>0&&ce>0){const ze=[ye/D,g/D],Ve=[ae/ce,xe/ce],gt=Math.atan2(ze[1],ze[0]);let _t=Math.atan2(Ve[1],Ve[0])-gt;_t<0&&(_t+=2*Math.PI);let ca=ze[0]+Ve[0],Qt=ze[1]+Ve[1];_t<Math.PI&&(ca=-ca,Qt=-Qt);const Kt=Math.sqrt(ca*ca+Qt*Qt);if(Kt>0){const Pt=ca/Kt;ne=[-(Qt/Kt),Pt]}}}}ne&&(Y=ne[0]*K,F=ne[1]*K)}const he=S.activitySymbolSize||24,Ne=S.activitySymbolColor||T.color,ue=$g[S.activitySymbol];if(!ue)return null;const re=he/2+20,je=Y!==0||F!==0?[Y/K,F/K]:[0,-1],L=-je[1],B=je[0],_=Math.atan2(B,L)*(180/Math.PI);return n.jsxs(js.Fragment,{children:[n.jsx("div",{className:"absolute",style:{left:`${M+Y}px`,top:`${z+F}px`,transform:"translate(-50%, -50%)"},children:n.jsx(ue,{size:he,color:Ne,strokeWidth:2})}),S.activityLabel&&n.jsx("div",{className:"absolute",style:{left:`${M+Y+je[0]*re}px`,top:`${z+F+je[1]*re}px`,transform:`translate(-50%, -50%) rotate(${_}deg)`},children:n.jsx("span",{className:"text-xs font-semibold whitespace-nowrap",style:{color:Ne,textShadow:"0 0 3px rgba(0,0,0,0.8), 0 0 3px rgba(0,0,0,0.8)"},children:S.activityLabel})})]},`${T.id}-${S.id}-activity`)}catch(b){return console.error(`ActivitySymbolsOverlay: Error rendering activity symbol for waypoint ${S.id}:`,b),null}}))})},Fg=r=>!r||r.length===0?"":r.map(u=>`${u.value}:${u.color}`).join("|"),Ig=(r,u,f=256)=>{const o=new Uint8ClampedArray(f*4),[m,v]=u,k=v-m;for(let T=0;T<f;T++){const S=m+k*T/(f-1),x=d3.color(r(S));if(x){const b=T*4;o[b]=x.r,o[b+1]=x.g,o[b+2]=x.b,o[b+3]=x.opacity*255}}return o},Pg=()=>n.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",children:[n.jsxs("svg",{className:"animate-spin h-10 w-10 text-cyan-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n.jsx("p",{className:"mt-4",children:"Rendering..."})]}),ey=()=>{var jn,Nn;const{layers:r,timeRange:u,currentDateIndex:f,setHoveredCoords:o,setSelectedPixel:m,onFinishArtifactCreation:v,onUpdateArtifact:k,clearHoverState:T,latRange:S,lonRange:x,showGraticule:b,graticuleDensity:j,proj:M,viewState:z,setViewState:Y,primaryDataLayer:F,baseMapLayer:K,showGrid:he,gridSpacing:Ne,gridColor:ue,activeTool:re,selectedCells:je,selectionColor:L,artifacts:B,artifactCreationMode:_,draggedInfo:ne,setDraggedInfo:U,artifactDisplayOptions:be,isAppendingWaypoints:we,coordinateTransformer:Oe,snapToCellCorner:qe,calculateRectangleFromCellCorners:Ge,setActiveArtifactId:E,setArtifacts:le,setSelectedCells:se,activeLayerId:Ee,onUpdateLayer:ye,pathCreationOptions:g,activityDefinitions:D,activeArtifactId:ae,setSelectedCellForPlot:xe,selectedCellForPlot:ce}=Na(),{showError:ze}=Oo(),Ve=f??0,gt=u,rt=!!F||!!K,_t=y.useCallback(()=>{const V=D.find(C=>C.id==="DTE_COMMS"),G=D.find(C=>C.id==="DRIVE-5");return[{id:`act-${Date.now()}-${Math.random()}`,type:"DTE_COMMS",duration:(V==null?void 0:V.defaultDuration)??3600},{id:`act-${Date.now()}-${Math.random()}`,type:"DRIVE-5",duration:(G==null?void 0:G.defaultDuration)??0}]},[D]),ca=zo(j,100),Qt=zo(he,50),Kt=zo(Ne,100),Pt=y.useRef(null),Oa=y.useRef(null),ll=y.useRef(null),vn=y.useRef(null),ya=y.useRef(null),Qa=y.useRef(null),[nl,hl]=y.useState(!1),[_a,Ma]=y.useState(null),[jt,wl]=y.useState(null),ml=y.useRef(new Bx(50,500)).current,ua=y.useMemo(()=>{if(!F&&!K)return null;let V=null;if(F&&M){const[C,Q]=x,[h,ee]=S,me=[[C,h],[Q,h],[Q,ee],[C,ee]].map($=>M.forward($));V={minX:Math.min(...me.map($=>$[0])),maxX:Math.max(...me.map($=>$[0])),minY:Math.min(...me.map($=>$[1])),maxY:Math.max(...me.map($=>$[1]))}}let G=null;if(K){const C=K.vrt.geoTransform;G={minX:C[0],maxX:C[0]+K.vrt.width*C[1],minY:C[3]+K.vrt.height*C[5],maxY:C[3]}}return V&&G?{minX:Math.min(V.minX,G.minX),maxX:Math.max(V.maxX,G.maxX),minY:Math.min(V.minY,G.minY),maxY:Math.max(V.maxY,G.maxY)}:V||G},[F,K,M,x,S]),Ka=y.useMemo(()=>{if(!M||!ua||!ca||ca<=0)return null;try{const{minX:V,maxX:G,minY:C,maxY:Q}=ua,ee=[[V,C],[G,C],[G,Q],[V,Q]].map(de=>{try{return proj4("EPSG:4326",M).inverse(de)}catch{return null}}).filter(de=>de!==null);let me=360,$=180;if(ee.length>0){const de=Math.min(...ee.map(ve=>ve[0])),Me=Math.max(...ee.map(ve=>ve[0])),De=Math.min(...ee.map(ve=>ve[1])),J=Math.max(...ee.map(ve=>ve[1]));me=Math.abs(Me-de),me>180&&(me=360-me),$=Math.abs(J-De)}const pe=de=>{if(de<=0)return 1;const Me=de/(5*ca);if(Me<=0)return 1;const De=Math.pow(10,Math.floor(Math.log10(Me))),J=Me/De;return J<1.5?De:J<3.5?2*De:J<7.5?5*De:10*De},ie=pe(me),ge=pe($),oe=[],te=[];for(let de=-180;de<=180;de+=ie){const Me=[];for(let De=0;De<=100;De++){const J=-90+De/100*180;try{const ve=M.forward([de,J]);isFinite(ve[0])&&isFinite(ve[1])&&Me.push([ve[0],ve[1]])}catch{}}Me.length>=2&&oe.push({lon:de,points:Me})}for(let de=-90;de<=90;de+=ge){const Me=[];for(let De=0;De<=200;De++){const J=-180+De/200*360;try{const ve=M.forward([J,de]);isFinite(ve[0])&&isFinite(ve[1])&&Me.push([ve[0],ve[1]])}catch{}}Me.length>=2&&te.push({lat:de,points:Me})}return{lonLines:oe,latLines:te,lonStep:ie,latStep:ge}}catch(V){const G=V instanceof Error?V.message:"Unknown error";return ze(`Failed to calculate graticule: ${G}`,"Graticule Error"),null}},[M,ua,ca,ze]),Xl=y.useRef(!1),da=y.useRef(!1),sl=y.useRef({x:0,y:0}),[Gl,Ja]=y.useState(null),[Tt,pa]=y.useState(null),[ht,il]=y.useState(null),[ka,xl]=y.useState(null),[ra,Cl]=y.useState(null),[ea,Yt]=y.useState(null);y.useEffect(()=>{_!=="rectangle"&&xl(null)},[_]),y.useEffect(()=>{const V=ya.current;if(!ua||!V||z&&Xl.current)return;const{clientWidth:G,clientHeight:C}=V;if(G===0||C===0)return;const Q=ua.maxX-ua.minX,h=ua.maxY-ua.minY,ee=Math.min(G/Q,C/h)*.95,$={center:[ua.minX+Q/2,ua.minY+h/2],scale:ee};Ja($),Y($),Xl.current=!0},[ua,Y,z]);const va=y.useMemo(()=>r.map(V=>V.id).join(","),[r]);y.useEffect(()=>{Xl.current=!1},[va]);const qt=y.useCallback((V,G)=>{const C=ya.current;if(!C||!z||C.width===0||C.height===0)return null;const Q=window.devicePixelRatio||1,{center:h,scale:ee}=z,me=(V*Q-C.width/2)/(ee*Q)+h[0],$=-(G*Q-C.height/2)/(ee*Q)+h[1];return[me,$]},[z]),Zl=y.useCallback(V=>{try{if(!z||!Ee||!V)return null;const G=r.find(De=>De.id===Ee&&De.type==="image");if(!G||G.type!=="image")return null;const C=G;if(!C.originalWidth||!C.originalHeight||!C.scaleX||!C.scaleY||!C.position)return null;const Q=C.originalWidth*C.scaleX,h=C.originalHeight*C.scaleY,ee=12/z.scale,me=V[0]-C.position[0],$=V[1]-C.position[1],pe=C.rotation*Math.PI/180,ie=Math.cos(-pe),ge=Math.sin(-pe),oe=me*ie-$*ge,te=me*ge+$*ie;if(Math.abs(oe)<ee&&Math.abs(te)<ee)return{layerId:C.id,handleType:"center"};const de=[[-Q/2,-h/2],[Q/2,-h/2],[Q/2,h/2],[-Q/2,h/2]];for(let De=0;De<de.length;De++){const[J,ve]=de[De];if(Math.abs(oe-J)<ee&&Math.abs(te-ve)<ee)return{layerId:C.id,handleType:"corner",handleIndex:De}}const Me=[[0,-h/2],[Q/2,0],[0,h/2],[-Q/2,0]];for(let De=0;De<Me.length;De++){const[J,ve]=Me[De];if(Math.abs(oe-J)<ee&&Math.abs(te-ve)<ee)return{layerId:C.id,handleType:"edge",handleIndex:De}}return null}catch(G){const C=G instanceof Error?G.message:"Unknown error";return ze(`Failed to get image layer handle: ${C}`,"Image Layer Error"),null}},[z,r,Ee,ze]);y.useEffect(()=>{const V=Pt.current;if(!V)return;const G=C=>{if(!z)return;const Q=C.target;if(Q&&Q.closest('[data-modal="true"]'))return;C.preventDefault();const h=V.getBoundingClientRect(),ee=C.clientX-h.left,me=C.clientY-h.top,$=qt(ee,me);if(!$)return;const pe=1-C.deltaY*.001,ie=z.scale*pe,ge=window.devicePixelRatio||1,oe=[$[0]-(ee*ge-V.offsetWidth*ge/2)/(ie*ge),$[1]+(me*ge-V.offsetHeight*ge/2)/(ie*ge)];Y({scale:ie,center:oe})};return V.addEventListener("wheel",G,{passive:!1}),()=>{V.removeEventListener("wheel",G)}},[z,qt,Y]),y.useEffect(()=>{const V=[Oa.current,ll.current,ya.current];if(V.some(J=>!J)||!z||!rt)return;hl(!0);const G=performance.now(),[C,Q,h]=V,ee=window.devicePixelRatio||1;[C,Q,h].forEach(J=>{if(!J.parentElement)return;const{clientWidth:ve,clientHeight:Xe}=J.parentElement;J.width=ve*ee,J.height=Xe*ee});const me=C.getContext("2d"),$=Q.getContext("2d"),pe=h.getContext("2d");if(!me||!$||!pe)return;const ie=[me,$,pe],{center:ge,scale:oe}=z;ie.forEach(J=>{J.clearRect(0,0,J.canvas.width,J.canvas.height),J.save(),J.translate(J.canvas.width/2,J.canvas.height/2);const ve=oe*ee;J.scale(ve,-ve),J.translate(-ge[0],-ge[1]),J.imageSmoothingEnabled=!1}),r.forEach(J=>{if(J.visible){if(J.type==="basemap"){const ve=J.vrt.geoTransform;me.save(),me.globalAlpha=J.opacity,me.transform(ve[1],ve[4],ve[2],ve[5],ve[0],ve[3]),me.drawImage(J.image,0,0),me.restore()}else if(J.type==="image"){me.save(),me.globalAlpha=J.opacity,me.translate(J.position[0],J.position[1]);const ve=J.rotation*Math.PI/180;me.rotate(ve),me.scale(1,-1);const Xe=J.originalWidth*J.scaleX,Ye=J.originalHeight*J.scaleY;me.drawImage(J.image,-Xe/2,-Ye/2,Xe,Ye),me.restore()}else if(V0(J)&&M){let ve;const Xe=!!J.colormapInverted;let Ye;_o(J)&&gt?Ye=`${J.id}-${gt.start}-${gt.end}-${J.colormap}-${Xe}`:(Ye=`${J.id}-${Ve}-${J.colormap}-${Xe}-${J.range.min}-${J.range.max}`,Sc(J)&&(Ye+=`-${J.params.clipValue}`)),J.colormap==="Custom"&&(Ye+=`-${Fg(J.customColormap)}`),J.transparencyLowerThreshold!==void 0&&(Ye+=`-lt${J.transparencyLowerThreshold}`),J.transparencyUpperThreshold!==void 0&&(Ye+=`-ut${J.transparencyUpperThreshold}`),ve=Ye;let $e=ml.get(ve);if(!$e){const ke=J.dataset[Px(J,Ve)];if(!ke)return;const{width:Se,height:Be}=J.dimensions;$e=document.createElement("canvas"),$e.width=Se,$e.height=Be;const tt=$e.getContext("2d");let Ce;const Ze=J.colormap==="Custom";Sc(J)?Ce=[J.range.min,J.params.clipValue??J.range.max]:Ce=[J.range.min,J.range.max];const Qe=B0(J.colormap,Ce,J.colormapInverted,J.customColormap,Ze),_e=tt.createImageData(Se,Be),Je=Ig(Qe,Ce,256),[Pe,Le]=Ce,mt=Le-Pe;for(let ut=0;ut<Be;ut++)for(let At=0;At<Se;At++){const la=ke[ut][At],Lt=(ut*Se+At)*4;let Vt=(la-Pe)/mt;Vt=Math.max(0,Math.min(1,Vt));const Xt=Math.floor(Vt*255)*4;_e.data[Lt]=Je[Xt],_e.data[Lt+1]=Je[Xt+1],_e.data[Lt+2]=Je[Xt+2],_e.data[Lt+3]=Je[Xt+3],J.transparencyLowerThreshold!==void 0&&la<=J.transparencyLowerThreshold&&(_e.data[Lt+3]=0),J.transparencyUpperThreshold!==void 0&&la>=J.transparencyUpperThreshold&&(_e.data[Lt+3]=0)}tt.putImageData(_e,0,0),ml.set(ve,$e)}$.save(),$.globalAlpha=J.opacity;const[yt,Ie]=x,[Nt,et]=S,ot=M.forward([yt,et]),ct=M.forward([Ie,et]),pt=M.forward([yt,Nt]),zt=(ct[0]-ot[0])/$e.width,N=(ct[1]-ot[1])/$e.width,X=(pt[0]-ot[0])/$e.height,I=(pt[1]-ot[1])/$e.height,fe=ot[0],Ae=ot[1];$.transform(zt,N,X,I,fe,Ae),$.drawImage($e,0,0),$.restore()}}});const{clientWidth:te,clientHeight:de}=h,Me=qt(0,0),De=qt(te*(window.devicePixelRatio||1),de*(window.devicePixelRatio||1));if(Me&&De){const[J,ve]=[Me[0],De[1]],[Xe,Ye]=[De[0],Me[1]];if(Qt){pe.strokeStyle=ue,pe.lineWidth=.8/(oe*ee);const $e=Math.ceil(J/Kt)*Kt,yt=Math.ceil(ve/Kt)*Kt;pe.beginPath();for(let Ie=$e;Ie<=Xe;Ie+=Kt)pe.moveTo(Ie,ve),pe.lineTo(Ie,Ye);for(let Ie=yt;Ie<=Ye;Ie+=Kt)pe.moveTo(J,Ie),pe.lineTo(Xe,Ie);pe.stroke()}if(b&&M&&Ka){pe.strokeStyle="rgba(255, 255, 255, 0.4)",pe.lineWidth=1/(oe*ee);const $e=(pt,zt)=>{pe.save(),pe.translate(zt[0],zt[1]);const N=1/(oe*ee);pe.scale(N,-N),pe.fillStyle="rgba(255, 255, 255, 0.95)",pe.font="12px sans-serif",pe.strokeStyle="rgba(0, 0, 0, 0.8)",pe.lineWidth=2,pe.textAlign="left",pe.textBaseline="top",pe.strokeText(pt,5,5),pe.fillText(pt,5,5),pe.restore()},{lonLines:yt,latLines:Ie,lonStep:Nt,latStep:et}=Ka;let ot=0,ct=0;try{const pt=proj4("EPSG:4326",M).inverse(z.center);ot=Math.round(pt[0]/Nt)*Nt,ct=Math.round(pt[1]/et)*et}catch{ot=0,ct=0}for(const{lon:pt,points:zt}of yt){pe.beginPath();for(let N=0;N<zt.length;N++){const[X,I]=zt[N];N===0?pe.moveTo(X,I):pe.lineTo(X,I)}pe.stroke();try{const N=M.forward([pt,ct]);isFinite(N[0])&&isFinite(N[1])&&N[0]>=J&&N[0]<=Xe&&N[1]>=ve&&N[1]<=Ye&&$e(`${pt.toFixed(1)}`,N)}catch{}}for(const{lat:pt,points:zt}of Ie){pe.beginPath();for(let N=0;N<zt.length;N++){const[X,I]=zt[N];N===0?pe.moveTo(X,I):pe.lineTo(X,I)}pe.stroke();try{const N=M.forward([ot,pt]);isFinite(N[0])&&isFinite(N[1])&&N[0]>=J&&N[0]<=Xe&&N[1]>=ve&&N[1]<=Ye&&$e(`${pt.toFixed(1)}`,N)}catch{}}}}ie.forEach(J=>J.restore()),performance.now()-G>16?requestAnimationFrame(()=>hl(!1)):hl(!1)},[r,Ve,b,M,z,rt,S,x,qt,gt,Qt,Kt,ue,Ka]);const Ua=y.useCallback(V=>{if(!F||!M)return null;const{width:G,height:C}=F.dimensions,[Q,h]=x,[ee,me]=S,$=M.forward([Q,me]),pe=M.forward([h,me]),ie=M.forward([Q,ee]),ge=(pe[0]-$[0])/G,oe=(pe[1]-$[1])/G,te=(ie[0]-$[0])/C,de=(ie[1]-$[1])/C,Me=$[0],De=$[1],J=ge*de-oe*te;if(Math.abs(J)<1e-9)return null;try{const ve=(de*(V.center[0]-Me)-te*(V.center[1]-De))/J,Xe=(ge*(V.center[1]-De)-oe*(V.center[0]-Me))/J,Ye=V.width/Math.sqrt(ge*ge+oe*oe),$e=V.height/Math.sqrt(te*te+de*de),yt=Ye/2,Ie=$e/2,Nt=Math.round(ve-yt),et=Math.round(ve+yt),ot=Math.round(Xe-Ie),ct=Math.round(Xe+Ie);return[[Nt,ot],[et,ot],[et,ct],[Nt,ct]].map(([zt,N])=>[ge*zt+te*N+Me,oe*zt+de*N+De])}catch{return null}},[F,M,x,S]);y.useEffect(()=>{var pe;const V=vn.current;if(!V||!z||!M){(pe=V==null?void 0:V.getContext("2d"))==null||pe.clearRect(0,0,V.width,V.height);return}const G=window.devicePixelRatio||1;if(!V.parentElement)return;const{clientWidth:C,clientHeight:Q}=V.parentElement;V.width=C*G,V.height=Q*G;const h=V.getContext("2d");if(!h)return;h.clearRect(0,0,V.width,V.height);const{center:ee,scale:me}=z;h.save(),h.translate(h.canvas.width/2,h.canvas.height/2);const $=me*G;if(h.scale($,-$),h.translate(-ee[0],-ee[1]),B.forEach(ie=>{if(!ie.visible)return;if(h.strokeStyle=ie.color,h.fillStyle=ie.color,ie.type==="circle"){const oe=ie.radius;h.lineWidth=ie.thickness/$,h.beginPath(),h.arc(ie.center[0],ie.center[1],oe,0,2*Math.PI),h.stroke()}else if(ie.type==="rectangle"){const oe=Ua(ie);oe&&oe.length===4&&(h.lineWidth=ie.thickness/$,h.beginPath(),h.moveTo(oe[0][0],oe[0][1]),h.lineTo(oe[1][0],oe[1][1]),h.lineTo(oe[2][0],oe[2][1]),h.lineTo(oe[3][0],oe[3][1]),h.closePath(),h.stroke())}else if(ie.type==="path"){if(ie.waypoints.length===0)return;const oe=ie.waypoints.map(te=>{if(!te.geoPosition||!Array.isArray(te.geoPosition)||te.geoPosition.length!==2||!isFinite(te.geoPosition[0])||!isFinite(te.geoPosition[1]))return console.warn("DataCanvas: Invalid waypoint geoPosition during rendering",te),{...te,projPos:null};try{const de=M.forward(te.geoPosition);return!de||!Array.isArray(de)||de.length!==2||!isFinite(de[0])||!isFinite(de[1])?(console.warn("DataCanvas: Invalid projection result for waypoint",te),{...te,projPos:null}):{...te,projPos:de}}catch(de){return console.warn("DataCanvas: Failed to project waypoint during rendering",te,de),{...te,projPos:null}}}).filter(te=>te.projPos!==null);if(oe.length>1){h.lineWidth=ie.thickness/$,h.beginPath(),h.moveTo(oe[0].projPos[0],oe[0].projPos[1]);for(let te=1;te<oe.length;te++)h.lineTo(oe[te].projPos[0],oe[te].projPos[1]);h.stroke()}if(oe.forEach(te=>{h.beginPath();const de=be.waypointDotSize/2/$;h.arc(te.projPos[0],te.projPos[1],de,0,2*Math.PI),h.fill(),h.save(),h.translate(te.projPos[0],te.projPos[1]),h.scale(1/$,-1/$),h.fillStyle="#ffffff",h.font=`bold ${be.labelFontSize}px sans-serif`,h.textAlign="center",h.textBaseline="bottom",h.strokeStyle="rgba(0,0,0,0.8)",h.lineWidth=2.5,h.strokeText(te.label,0,-(be.waypointDotSize/2+2)),h.fillText(te.label,0,-(be.waypointDotSize/2+2)),h.restore()}),be.showSegmentLengths&&oe.length>1)for(let te=0;te<oe.length-1;te++){const de=oe[te],Me=oe[te+1],De=Me.projPos[0]-de.projPos[0],J=Me.projPos[1]-de.projPos[1],ve=Math.sqrt(De*De+J*J),Xe=[(de.projPos[0]+Me.projPos[0])/2,(de.projPos[1]+Me.projPos[1])/2],Ye=`${ve.toFixed(0)} m`;h.save(),h.translate(Xe[0],Xe[1]);let $e=Math.atan2(Me.projPos[1]-de.projPos[1],Me.projPos[0]-de.projPos[0]);($e<-Math.PI/2||$e>Math.PI/2)&&($e+=Math.PI),h.rotate($e),h.scale(1/$,-1/$),h.font=`${be.labelFontSize}px sans-serif`;const yt=h.measureText(Ye),Ie=4,Nt=be.labelFontSize,et=Nt+Ie,ot=yt.width+Ie*2,ct=-(Nt/2+5);h.fillStyle="rgba(26, 32, 44, 0.7)",h.fillRect(-ot/2,ct-et/2,ot,et),h.fillStyle="#fafafa",h.textAlign="center",h.textBaseline="middle",h.fillText(Ye,0,ct),h.restore()}}h.save();let ge=null;if(ie.type==="path"){if(ie.waypoints.length>0){const oe=ie.waypoints[0];if(oe.geoPosition&&Array.isArray(oe.geoPosition)&&oe.geoPosition.length===2&&isFinite(oe.geoPosition[0])&&isFinite(oe.geoPosition[1]))try{ge=M.forward(oe.geoPosition)}catch(te){console.warn("DataCanvas: Failed to project first waypoint for label",te)}}}else ge=ie.center;ge&&(h.translate(ge[0],ge[1]),h.scale(1/$,-1/$),h.fillStyle=ie.color,h.font=`bold ${be.labelFontSize}px sans-serif`,h.textAlign="center",h.textBaseline="bottom",h.strokeStyle="rgba(0,0,0,0.7)",h.lineWidth=3,h.strokeText(ie.name,0,-10),h.fillText(ie.name,0,-10)),h.restore()}),ka&&ra&&_==="rectangle"&&qe&&Ge&&F){const ie=qe(ra);if(ie){const ge=Ge(ka,ie);if(ge){const oe={id:"preview",type:"rectangle",name:"Preview",visible:!0,color:"#ff00ff",thickness:2,center:ge.center,width:ge.width,height:ge.height,rotation:ge.rotation},te=Ua(oe);if(te&&te.length===4){h.save(),h.strokeStyle="#ff00ff",h.setLineDash([5/$,5/$]),h.lineWidth=2/$,h.beginPath(),h.moveTo(te[0][0],te[0][1]),h.lineTo(te[1][0],te[1][1]),h.lineTo(te[2][0],te[2][1]),h.lineTo(te[3][0],te[3][1]),h.closePath(),h.stroke(),h.restore(),h.save(),h.fillStyle="#ff00ff";const de=10/$;[ka,ie].forEach(Me=>{h.fillRect(Me[0]-de/2,Me[1]-de/2,de,de)}),h.restore()}}}}if((_==="path"||we)&&ra&&M&&ae){const ie=B.find(ge=>ge.id===ae&&ge.type==="path");if(ie&&ie.waypoints.length>0){const ge=ie.waypoints[ie.waypoints.length-1],oe=M.forward(ge.geoPosition),te=g.defaultMaxSegmentLength;let de=ra,Me=null,De=0,J=!1;if(te)try{const Xe=ge.geoPosition;Me=te;const Ye=ra[0]-oe[0],$e=ra[1]-oe[1],yt=Math.sqrt(Ye*Ye+$e*$e);if(J=yt>Me,De=yt,yt>Me){const Ie=Me/yt;de=[oe[0]+Ye*Ie,oe[1]+$e*Ie]}}catch{}h.save(),h.strokeStyle=ie.color,h.setLineDash([10/$,10/$]),h.lineWidth=ie.thickness/$,h.beginPath(),h.moveTo(oe[0],oe[1]),h.lineTo(de[0],de[1]),h.stroke(),h.restore(),h.save(),h.fillStyle=ie.color,h.globalAlpha=.6;const ve=be.waypointDotSize/2/$;if(h.beginPath(),h.arc(de[0],de[1],ve,0,2*Math.PI),h.fill(),h.restore(),te&&Me){h.save(),h.strokeStyle=ie.color,h.setLineDash([15/$,10/$]),h.lineWidth=1/$,h.globalAlpha=.5,h.beginPath(),h.arc(oe[0],oe[1],Me,0,2*Math.PI),h.stroke(),h.restore();try{h.save(),h.translate(ra[0],ra[1]),h.scale(1/$,-1/$);const Xe=`${De.toFixed(0)} m`;h.fillStyle=J?"#ff5555":"#ffffff",h.font="bold 14px sans-serif",h.textAlign="left",h.textBaseline="bottom",h.strokeStyle="rgba(0,0,0,0.8)",h.lineWidth=2.5,h.strokeText(Xe,10,-10),h.fillText(Xe,10,-10),h.restore()}catch{}}}}if(Ee){const ie=r.find(ge=>ge.id===Ee&&ge.type==="image");if(ie&&ie.type==="image"){const ge=ie,oe=ge.originalWidth*ge.scaleX,te=ge.originalHeight*ge.scaleY;h.save(),h.translate(ge.position[0],ge.position[1]);const de=ge.rotation*Math.PI/180;h.rotate(de),h.strokeStyle="#00ffff",h.lineWidth=2/$,h.strokeRect(-oe/2,-te/2,oe,te);const Me=12/$;h.fillStyle="#00ffff",[[-oe/2,-te/2],[oe/2,-te/2],[oe/2,te/2],[-oe/2,te/2]].forEach(ve=>{h.fillRect(ve[0]-Me/2,ve[1]-Me/2,Me,Me)}),h.fillStyle="#ffff00",[[0,-te/2],[oe/2,0],[0,te/2],[-oe/2,0]].forEach(ve=>{h.beginPath(),h.arc(ve[0],ve[1],Me/2,0,2*Math.PI),h.fill()}),h.fillStyle="#ff00ff",h.beginPath(),h.arc(0,0,Me/2,0,2*Math.PI),h.fill(),h.restore()}}h.restore()},[B,z,M,be,ka,ra,_,qe,Ge,Ua,F,r,Ee,we,ae,g]),y.useEffect(()=>{const V=Qa.current;if(!V||!z||!F||!M)return;const G=window.devicePixelRatio||1;if(!V.parentElement)return;const{clientWidth:C,clientHeight:Q}=V.parentElement;V.width=C*G,V.height=Q*G;const h=V.getContext("2d");if(!h||(h.clearRect(0,0,V.width,V.height),je.length===0&&!ce))return;h.save();const{center:ee,scale:me}=z;h.translate(h.canvas.width/2,h.canvas.height/2);const $=me*G;h.scale($,-$),h.translate(-ee[0],-ee[1]);const[pe,ie]=x,[ge,oe]=S,te=M.forward([pe,oe]),de=M.forward([ie,oe]),Me=M.forward([pe,ge]),{width:De,height:J}=F.dimensions,ve=(de[0]-te[0])/De,Xe=(de[1]-te[1])/De,Ye=(Me[0]-te[0])/J,$e=(Me[1]-te[1])/J,yt=te[0],Ie=te[1];if(ce){h.strokeStyle="#00ffff",h.lineWidth=3/(me*G),h.beginPath();const Nt=ce.x,et=ce.y,ot=[ve*Nt+Ye*et+yt,Xe*Nt+$e*et+Ie],ct=[ve*(Nt+1)+Ye*et+yt,Xe*(Nt+1)+$e*et+Ie],pt=[ve*(Nt+1)+Ye*(et+1)+yt,Xe*(Nt+1)+$e*(et+1)+Ie],zt=[ve*Nt+Ye*(et+1)+yt,Xe*Nt+$e*(et+1)+Ie];h.moveTo(ot[0],ot[1]),h.lineTo(ct[0],ct[1]),h.lineTo(pt[0],pt[1]),h.lineTo(zt[0],zt[1]),h.closePath(),h.stroke()}if(je.length>0){h.strokeStyle=L,h.lineWidth=2/(me*G),h.beginPath();for(const Nt of je){const et=Nt.x,ot=Nt.y,ct=[ve*et+Ye*ot+yt,Xe*et+$e*ot+Ie],pt=[ve*(et+1)+Ye*ot+yt,Xe*(et+1)+$e*ot+Ie],zt=[ve*(et+1)+Ye*(ot+1)+yt,Xe*(et+1)+$e*(ot+1)+Ie],N=[ve*et+Ye*(ot+1)+yt,Xe*et+$e*(ot+1)+Ie];h.moveTo(ct[0],ct[1]),h.lineTo(pt[0],pt[1]),h.lineTo(zt[0],zt[1]),h.lineTo(N[0],N[1]),h.closePath()}h.stroke()}h.restore()},[je,L,ce,z,F,M,x,S]);const gl=y.useCallback(V=>{if(o(V),!V||!Oe){m(null);return}const G=Oe(V.lat,V.lon);if(G){const C=[...r].reverse().find(Q=>Q.visible&&(Q.type==="data"||Q.type==="analysis"||Q.type==="dte_comms"||Q.type==="lpf_comms"));m(C?{...G,layerId:C.id}:null)}else m(null)},[Oe,r,o,m]),Aa=y.useCallback((V,G)=>{if(V)if(_==="path"){const C=B.find(Q=>Q.id===ae&&Q.type==="path");if(C){let Q=[V.lon,V.lat];const h=g.defaultMaxSegmentLength;if(h&&C.waypoints.length>0){const me=C.waypoints[C.waypoints.length-1],$=M.forward(me.geoPosition),pe=G[0]-$[0],ie=G[1]-$[1],ge=Math.sqrt(pe*pe+ie*ie);if(ge>h){const oe=h/ge,te=[$[0]+pe*oe,$[1]+ie*oe],de=proj4("EPSG:4326",M).inverse(te);Q=[de[0],de[1]]}}const ee={id:`wp-${Date.now()}`,geoPosition:Q,label:`WP${C.waypoints.length+1}`,activities:_t()};k(ae,{waypoints:[...C.waypoints,ee]})}else{const Q=`path-${Date.now()}`,h={id:`wp-${Date.now()}`,geoPosition:[V.lon,V.lat],label:"WP1",activities:_t()},ee={id:Q,type:"path",name:`Path ${B.length+1}`,visible:!0,color:"#ffff00",thickness:2,waypoints:[h]};le(me=>[...me,ee]),E(Q)}}else if(_){const C=`${_}-${Date.now()}`;if(_==="circle"){const Q={id:C,type:"circle",name:`Circle ${B.length+1}`,visible:!0,color:"#00ffff",thickness:2,center:G,radius:500};le(h=>[...h,Q]),E(C),v()}else if(_==="rectangle")if(ka){const Q=qe?qe(G):G;if(Ge){const h=Ge(ka,Q);if(h&&h.width>0&&h.height>0){const ee={id:C,type:"rectangle",name:`Rectangle ${B.length+1}`,visible:!0,color:"#ff00ff",thickness:2,center:h.center,width:h.width,height:h.height,rotation:h.rotation};le(me=>[...me,ee]),E(C)}}xl(null),v()}else{const Q=qe?qe(G):G;xl(Q)}}else if(we){const C=B.find(Q=>Q.id===ae);if(C&&C.type==="path"){let Q=[V.lon,V.lat];const h=g.defaultMaxSegmentLength;if(h&&C.waypoints.length>0){const me=C.waypoints[C.waypoints.length-1],$=M.forward(me.geoPosition),pe=G[0]-$[0],ie=G[1]-$[1],ge=Math.sqrt(pe*pe+ie*ie);if(ge>h){const oe=h/ge,te=[$[0]+pe*oe,$[1]+ie*oe],de=proj4("EPSG:4326",M).inverse(te);Q=[de[0],de[1]]}}const ee={id:`wp-${Date.now()}`,geoPosition:Q,label:`WP${C.waypoints.length+1}`,activities:_t()};k(ae,{waypoints:[...C.waypoints,ee]})}}else if(re==="measurement"){const C=Oe?Oe(V.lat,V.lon):null;C&&se(Q=>{const h=Q.findIndex(ee=>ee.x===C.x&&ee.y===C.y);return h>-1?[...Q.slice(0,h),...Q.slice(h+1)]:[...Q,C]})}else re==="layers"||(Tt?E(Tt):ht||E(null))},[_,we,re,B,ae,v,le,E,k,Oe,se,Tt,ht,ka,qe,Ge,g,M,xe]),Ql=y.useCallback((V,G)=>{if(we)return;const C=B.find(Q=>Q.id===V.artifactId);if(!(!C||!M)){if(V.waypointId)U({artifactId:V.artifactId,waypointId:V.waypointId,initialMousePos:G});else if(C.type==="circle"||C.type==="rectangle")U({artifactId:V.artifactId,initialMousePos:G,initialCenter:C.center});else if(C.type==="path"){const Q=C.waypoints.map(h=>{if(!h.geoPosition||!Array.isArray(h.geoPosition)||h.geoPosition.length!==2||!isFinite(h.geoPosition[0])||!isFinite(h.geoPosition[1]))return console.warn("DataCanvas: Invalid waypoint geoPosition during drag initialization",h),[0,0];try{return M.forward(h.geoPosition)}catch(ee){return console.warn("DataCanvas: Failed to project waypoint during drag initialization",h,ee),[0,0]}});U({artifactId:V.artifactId,initialMousePos:G,initialWaypointProjPositions:Q})}E(V.artifactId)}},[B,M,we,U,E]),ba=y.useCallback(V=>{if(!(!ne||!M))if(ne.waypointId)le(G=>G.map(C=>{if(C.id===ne.artifactId&&C.type==="path")try{const Q=M.inverse(V),h=C.waypoints.map(ee=>ee.id===ne.waypointId?{...ee,geoPosition:Q}:ee);return{...C,waypoints:h}}catch{return C}return C}));else{const G=V[0]-ne.initialMousePos[0],C=V[1]-ne.initialMousePos[1];le(Q=>Q.map(h=>{if(h.id===ne.artifactId){if((h.type==="circle"||h.type==="rectangle")&&ne.initialCenter){const ee=[ne.initialCenter[0]+G,ne.initialCenter[1]+C];if(h.type==="rectangle"&&qe&&Ge){const me=h.rotation*Math.PI/180,$=Math.cos(me),pe=Math.sin(me),ie=[-h.width/2,-h.height/2],ge=[ee[0]+ie[0]*$-ie[1]*pe,ee[1]+ie[0]*pe+ie[1]*$],oe=qe(ge);if(oe){const te=[h.width/2,h.height/2],de=[ee[0]+te[0]*$-te[1]*pe,ee[1]+te[0]*pe+te[1]*$],Me=qe(de);if(Me){const De=Ge(oe,Me);if(De)return{...h,center:De.center,width:De.width,height:De.height,rotation:De.rotation}}}}return{...h,center:ee}}else if(h.type==="path"&&ne.initialWaypointProjPositions){const ee=h.waypoints.map((me,$)=>{const pe=ne.initialWaypointProjPositions[$],ie=[pe[0]+G,pe[1]+C];try{const ge=M.inverse(ie);return{...me,geoPosition:ge}}catch{return me}});return{...h,waypoints:ee}}}return h}))}},[ne,M,le,qe,Ge]),cl=y.useCallback(()=>{U(null)},[U]),ta=y.useCallback(V=>{const G=qt(V.nativeEvent.offsetX,V.nativeEvent.offsetY);Cl(G);try{if(ea&&G){const C=ea,Q=r.find(h=>h.id===C.layerId&&h.type==="image");if(Q&&Q.type==="image"){if(C.handleType==="center"){const h=G[0]-C.initialMouseProj[0],ee=G[1]-C.initialMouseProj[1];ye(C.layerId,{position:[C.initialPosition[0]+h,C.initialPosition[1]+ee]})}else if(C.handleType==="corner"&&C.handleIndex!==void 0){const h=C.initialRotation*Math.PI/180,ee=Math.cos(-h),me=Math.sin(-h),$=C.initialMouseProj[0]-C.initialPosition[0],pe=C.initialMouseProj[1]-C.initialPosition[1],ie=[$*ee-pe*me,$*me+pe*ee],ge=G[0]-C.initialPosition[0],oe=G[1]-C.initialPosition[1],te=[ge*ee-oe*me,ge*me+oe*ee],de=C.handleIndex,Me=Q.originalWidth*C.initialScaleX,De=Q.originalHeight*C.initialScaleY;let J=C.initialScaleX,ve=C.initialScaleY;de===0||de===3?J=C.initialScaleX*(1-2*(te[0]-ie[0])/Me):J=C.initialScaleX*(1+2*(te[0]-ie[0])/Me),de===0||de===1?ve=C.initialScaleY*(1-2*(te[1]-ie[1])/De):ve=C.initialScaleY*(1+2*(te[1]-ie[1])/De),J=Math.max(.1,Math.min(10,J)),ve=Math.max(.1,Math.min(10,ve)),ye(C.layerId,{scaleX:J,scaleY:ve})}else if(C.handleType==="edge"&&C.handleIndex!==void 0){const h=G[0]-C.initialPosition[0],ee=G[1]-C.initialPosition[1],me=Math.atan2(ee,h)*180/Math.PI,$=C.initialMouseProj[0]-C.initialPosition[0],pe=C.initialMouseProj[1]-C.initialPosition[1],ie=Math.atan2(pe,$)*180/Math.PI;let ge=C.initialRotation+(me-ie);for(;ge>180;)ge-=360;for(;ge<-180;)ge+=360;ye(C.layerId,{rotation:ge})}}return}}catch(C){const Q=C instanceof Error?C.message:"Unknown error";ze(`Failed to transform image layer: ${Q}`,"Image Transformation Error")}if(ne&&G){ba(G);return}if(da.current&&z){const C=V.clientX-sl.current.x,Q=V.clientY-sl.current.y,h=window.devicePixelRatio||1,ee=[z.center[0]-C/(z.scale*h),z.center[1]+Q/(z.scale*h)];Y({...z,center:ee}),sl.current={x:V.clientX,y:V.clientY}}if(G&&M&&z){let C=null,Q=null;if(_===null&&!we){const h=window.devicePixelRatio||1,ee=z.scale*h,$=be.waypointDotSize*.75/ee;for(let pe=B.length-1;pe>=0;pe--){const ie=B[pe];if(!ie.visible)continue;let ge=!1;if(ie.type==="path"){for(const te of ie.waypoints)if(!(!te.geoPosition||!Array.isArray(te.geoPosition)||te.geoPosition.length!==2||!isFinite(te.geoPosition[0])||!isFinite(te.geoPosition[1])))try{const de=M.forward(te.geoPosition);if(!de||!Array.isArray(de)||de.length!==2||!isFinite(de[0])||!isFinite(de[1]))continue;if(Math.sqrt(Math.pow(G[0]-de[0],2)+Math.pow(G[1]-de[1],2))<$){C={artifactId:ie.id,waypointId:te.id},ge=!0;break}}catch{continue}}if(ge)break;let oe=!1;if(ie.type==="circle")Math.sqrt(Math.pow(G[0]-ie.center[0],2)+Math.pow(G[1]-ie.center[1],2))<=ie.radius&&(oe=!0);else if(ie.type==="rectangle"){const te=ie.width,de=ie.height,Me=-ie.rotation*Math.PI/180,De=G[0]-ie.center[0],J=G[1]-ie.center[1],ve=De*Math.cos(Me)-J*Math.sin(Me),Xe=De*Math.sin(Me)+J*Math.cos(Me);Math.abs(ve)<=te/2&&Math.abs(Xe)<=de/2&&(oe=!0)}else ie.type;if(oe){Q=ie.id;break}}}il(C),pa(C?null:Q);try{const[h,ee]=proj4("EPSG:4326",M).inverse(G);gl({lat:ee,lon:h})}catch{T()}}else T(),pa(null),il(null)},[z,Y,qt,M,gl,T,ne,ba,B,_,be,we,ea,r,ye]),Kl=V=>{sl.current={x:V.clientX,y:V.clientY};const G=qt(V.nativeEvent.offsetX,V.nativeEvent.offsetY);if(G&&V.button===0){try{const C=Zl(G);if(C){const Q=r.find(h=>h.id===C.layerId&&h.type==="image");if(Q&&Q.type==="image"){Yt({layerId:C.layerId,handleType:C.handleType,handleIndex:C.handleIndex,initialMouseProj:G,initialPosition:Q.position,initialScaleX:Q.scaleX,initialScaleY:Q.scaleY,initialRotation:Q.rotation});return}}}catch(C){const Q=C instanceof Error?C.message:"Unknown error";ze(`Failed to check image layer handle: ${Q}`,"Image Layer Error")}re==="artifacts"?ht?Ql({artifactId:ht.artifactId,waypointId:ht.waypointId},G):Tt?Ql({artifactId:Tt},G):da.current=!0:da.current=!0}},aa=V=>{const G=da.current&&Math.abs(V.clientX-sl.current.x)<2&&Math.abs(V.clientY-sl.current.y)<2,C=da.current;if(da.current=!1,ea){Yt(null);return}if(ne){cl();return}if(C&&G){const Q=qt(V.nativeEvent.offsetX,V.nativeEvent.offsetY),h=M&&Q?(()=>{try{const[ee,me]=proj4("EPSG:4326",M).inverse(Q);return{lat:me,lon:ee}}catch{return null}})():null;Q&&h&&Aa(h,Q)}},bn=()=>{da.current=!1,T(),ea&&Yt(null),ne&&cl()},Ta=V=>{const G=qt(V.nativeEvent.offsetX,V.nativeEvent.offsetY),C=M&&G?(()=>{try{const[ee,me]=proj4("EPSG:4326",M).inverse(G);return{lat:me,lon:ee}}catch{return null}})():null;if(re==="layers"&&C){const ee=Oe?Oe(C.lat,C.lon):null;ee&&xe(me=>me&&me.x===ee.x&&me.y===ee.y?null:ee);return}if(re!=="artifacts"||!ht)return;const Q=B.find(ee=>ee.id===ht.artifactId);if(!Q||Q.type!=="path")return;const h=Q.waypoints.find(ee=>ee.id===ht.waypointId);if(h){if(!h.geoPosition||!Array.isArray(h.geoPosition)||h.geoPosition.length!==2||!isFinite(h.geoPosition[0])||!isFinite(h.geoPosition[1])){console.error("DataCanvas: Cannot edit waypoint with invalid geoPosition",h);return}wl({artifactId:Q.id,waypoint:h})}},Ha=V=>{if(!_a)return;const G=B.find(h=>h.id===_a.artifactId);if(!G||G.type!=="path")return;const C=G.waypoints.findIndex(h=>h.id===_a.waypoint.id);if(C===-1)return;const Q=[...G.waypoints];Q[C]={...Q[C],...V},k(G.id,{waypoints:Q})},kt=V=>{if(!jt)return;const G=B.find(h=>h.id===jt.artifactId);if(!G||G.type!=="path")return;const C=G.waypoints.findIndex(h=>h.id===jt.waypoint.id);if(C===-1)return;const Q=[...G.waypoints];Q[C]={...Q[C],...V},k(G.id,{waypoints:Q})},Jt=y.useCallback(V=>{z&&Y({...z,scale:z.scale*V})},[z,Y]),Sa=y.useCallback(()=>{Gl&&Y(Gl)},[Gl,Y]),Jl=y.useMemo(()=>{if(_||we)return"crosshair";if(ea){if(ea.handleType==="center")return"move";if(ea.handleType==="corner")return"nwse-resize";if(ea.handleType==="edge")return"grab"}return ne?"grabbing":ht||Tt?"grab":re==="measurement"?"copy":da.current?"grabbing":"default"},[_,we,ne,ht,Tt,re,da.current,ea]);return rt?n.jsxs("div",{ref:Pt,className:"w-full h-full relative",onMouseDown:Kl,onMouseMove:ta,onMouseUp:aa,onMouseLeave:bn,onDoubleClick:Ta,style:{cursor:Jl},children:[nl&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800/50 z-50",children:n.jsx(Pg,{})}),n.jsx("canvas",{ref:Oa,className:"pixelated absolute inset-0 w-full h-full z-0"}),n.jsx("canvas",{ref:ll,className:"pixelated absolute inset-0 w-full h-full z-10"}),n.jsx("canvas",{ref:vn,className:"absolute inset-0 w-full h-full z-20 pointer-events-none"}),n.jsx("canvas",{ref:ya,className:"absolute inset-0 w-full h-full z-30 pointer-events-none"}),n.jsx("canvas",{ref:Qa,className:"absolute inset-0 w-full h-full z-40 pointer-events-none"}),n.jsx(Wg,{artifacts:B.filter(V=>V.type==="path"),proj:M,viewState:z,containerWidth:((jn=Pt.current)==null?void 0:jn.clientWidth)||0,containerHeight:((Nn=Pt.current)==null?void 0:Nn.clientHeight)||0,showActivitySymbols:be.showActivitySymbols}),n.jsx(xg,{onZoomIn:()=>Jt(1.5),onZoomOut:()=>Jt(1/1.5),onResetView:Sa}),_a&&(()=>{const V=B.find(C=>C.id===_a.artifactId),G=(V==null?void 0:V.color)||"#ef4444";return n.jsx(Zg,{isOpen:!0,waypoint:_a.waypoint,defaultColor:G,onClose:()=>Ma(null),onSave:Ha})})(),jt&&n.jsx(Jg,{isOpen:!0,waypoint:jt.waypoint,onClose:()=>wl(null),onSave:kt}),ht&&(()=>{const V=B.find(h=>h.id===ht.artifactId),G=V&&V.type==="path"?V.waypoints.find(h=>h.id===ht.waypointId):null;if(!G)return null;const C=h=>{const ee=D.find(me=>me.id===h);return(ee==null?void 0:ee.name)||h},Q=h=>{if(h===0)return"0s";if(h<60)return`${h}s`;const ee=Math.floor(h/3600),me=Math.floor(h%3600/60),$=h%60,pe=[];return ee>0&&pe.push(`${ee}h`),me>0&&pe.push(`${me}m`),$>0&&pe.push(`${$}s`),pe.join(" ")};return n.jsx("div",{className:"absolute bottom-4 left-4 bg-gray-800/95 border border-gray-600 rounded-lg p-3 shadow-lg z-50 pointer-events-none max-w-sm",children:n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsx("div",{className:"font-semibold text-white border-b border-gray-600 pb-1 mb-2",children:G.label||"Waypoint"}),n.jsxs("div",{className:"text-gray-300",children:[n.jsx("span",{className:"text-gray-400",children:"Coordinates:"})," ",G.geoPosition[1].toFixed(6),", ",G.geoPosition[0].toFixed(6)]}),G.activitySymbol&&n.jsxs("div",{className:"text-gray-300",children:[n.jsx("span",{className:"text-gray-400",children:"Activity:"})," ",G.activityLabel||G.activitySymbol]}),G.activities&&G.activities.length>0&&n.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700",children:[n.jsx("div",{className:"text-gray-400 text-xs font-semibold mb-1",children:"Activity Plan:"}),n.jsx("div",{className:"space-y-0.5 max-h-32 overflow-y-auto",children:G.activities.map((h,ee)=>n.jsxs("div",{className:"text-xs text-gray-300 flex justify-between gap-2",children:[n.jsxs("span",{className:"truncate",children:[ee+1,". ",C(h.type)]}),n.jsx("span",{className:"text-gray-500 flex-shrink-0",children:Q(h.duration)})]},h.id))})]}),G.description&&n.jsxs("div",{className:"text-gray-300 text-xs mt-2 pt-2 border-t border-gray-700",children:[n.jsx("div",{className:"text-gray-400 font-semibold mb-1",children:"Description:"}),n.jsx("div",{className:"whitespace-pre-wrap",children:G.description})]})]})})})()]}):n.jsx("div",{className:"w-full h-full flex items-center justify-center text-center text-gray-400 bg-gray-900/50 rounded-lg",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold",children:"No Data Loaded"}),n.jsx("p",{className:"mt-2",children:"Use the Layers panel to load a basemap or data file."})]})})},Sl={top:10,right:30,bottom:20,left:50},ty=()=>{const{primaryDataLayer:r,timeSeriesData:u,timeRange:f,currentDateIndex:o,fullTimeDomain:m,timeZoomDomain:v,onZoomToSelection:k,onResetZoom:T,activeLayer:S,nightfallPlotYAxisRange:x}=Na(),b=!!r,j=(u==null?void 0:u.range)??null,M=(S==null?void 0:S.type)==="analysis"&&S.analysisType==="nightfall"?"days":void 0,z=(S==null?void 0:S.type)==="analysis"&&S.analysisType==="nightfall"?x:void 0,Y=((S==null?void 0:S.type)==="analysis"||(S==null?void 0:S.type)==="data"||(S==null?void 0:S.type)==="dte_comms"||(S==null?void 0:S.type)==="lpf_comms")&&S.colormap==="Custom"?S.customColormap:void 0,F=y.useRef(null),K=y.useRef(null),[he,Ne]=y.useState({width:0,height:0});y.useEffect(()=>{const ne=K.current;if(!ne)return;const U=new ResizeObserver(be=>{if(be[0]){const{width:we,height:Oe}=be[0].contentRect;Ne({width:we,height:Oe})}});return U.observe(ne),()=>U.disconnect()},[]);const ue=he.width-Sl.left-Sl.right,re=he.height-Sl.top-Sl.bottom,je=y.useMemo(()=>{if(!(u!=null&&u.data))return[];const ne=M==="days";return u.data.map((U,be)=>{const we=Bt(be),Oe=ne?U/24:U;return{date:we,value:Oe}})},[u,M]);y.useEffect(()=>{if(!b||!u||!j||!v||ue<=0||re<=0){d3.select(F.current).selectAll("*").remove();return}const ne=d3.select(F.current);ne.selectAll("*").remove();const U=ne.append("g").attr("transform",`translate(${Sl.left},${Sl.top})`),be=M==="days";let we;z?we=[z.min,z.max]:we=be?[j.min/24,j.max/24]:[j.min,j.max];const Oe=d3.scaleUtc().domain(v).range([0,ue]),qe=d3.scaleLinear().domain(we).range([re,0]).nice();if(U.append("clipPath").attr("id","clip").append("rect").attr("width",ue).attr("height",re),f){const se=Bt(f.start),Ee=Bt(f.end);U.append("rect").attr("x",Oe(se)).attr("y",0).attr("width",Oe(Ee)-Oe(se)).attr("height",re).attr("fill","rgba(79, 209, 197, 0.2)")}if(o!==null){const se=Bt(o);U.append("line").attr("x1",Oe(se)).attr("y1",0).attr("x2",Oe(se)).attr("y2",re).attr("stroke","#EF4444").attr("stroke-width",2)}if(Y){const se=[];for(let Ee=0;Ee<Y.length;Ee++){const ye=Y[Ee],g=Y[Ee+1],D=rt=>be?rt/24:rt,ae=D(ye.value),xe=g?D(g.value):we[1],ce=Math.min(we[1],xe),ze=Math.max(we[0],ae),Ve=qe(ce),gt=qe(ze)-Ve;gt>0&&se.push({y:Ve,height:gt,color:ye.color})}U.append("g").attr("class","threshold-bands").attr("clip-path","url(#clip)").selectAll("rect").data(se).enter().append("rect").attr("x",0).attr("width",ue).attr("y",Ee=>Ee.y).attr("height",Ee=>Ee.height).attr("fill",Ee=>Ee.color).attr("opacity",.2)}const Ge=d3.line().x(se=>Oe(se.date)).y(se=>qe(se.value));U.append("path").datum(je).attr("clip-path","url(#clip)").attr("fill","none").attr("stroke","#4FD1C5").attr("stroke-width",1.5).attr("d",Ge);const E=d3.axisBottom(Oe).ticks(ue/80).tickSizeOuter(0),le=d3.axisLeft(qe).ticks(re/30).tickSize(-ue).tickFormat(se=>be?`${se.valueOf().toFixed(1)} days`:se.valueOf().toString());U.append("g").attr("transform",`translate(0,${re})`).call(E).call(se=>se.select(".domain").remove()).call(se=>se.selectAll(".tick text").attr("fill","#90CDF4").style("font-size","10px")),U.append("g").call(le).call(se=>se.select(".domain").remove()).call(se=>se.selectAll(".tick line").attr("stroke-opacity",.1).attr("stroke-dasharray","2,2")).call(se=>se.selectAll(".tick text").attr("x",-4).attr("fill","#90CDF4").style("font-size","10px"))},[b,u,f,o,j,ue,re,je,v,M,z,Y]);const L=y.useMemo(()=>v&&m&&v[0].getTime()===m[0].getTime()&&v[1].getTime()===m[1].getTime(),[v,m]),B=y.useMemo(()=>{if(!f||!m)return null;if(f.start===f.end){const ne=Bt(f.start),U=720*60*1e3;return[new Date(Math.max(m[0].getTime(),ne.getTime()-U)),new Date(Math.min(m[1].getTime(),ne.getTime()+U))]}else return[Bt(f.start),Bt(f.end)]},[f,m]),_=y.useMemo(()=>v&&B&&v[0].getTime()===B[0].getTime()&&v[1].getTime()===B[1].getTime(),[v,B]);return n.jsxs("section",{className:"bg-gray-800/70 border-t border-gray-700 h-32 flex-shrink-0 relative group",children:[b&&n.jsxs("div",{className:"absolute top-2 right-4 z-10 flex gap-2",children:[n.jsx("button",{onClick:k,disabled:_,className:"text-xs bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed text-cyan-300 px-2 py-1 rounded-md transition-colors shadow-md",title:"Fit selected time range to view",children:"Zoom to Selection"}),n.jsx("button",{onClick:T,disabled:L,className:"text-xs bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed text-cyan-300 px-2 py-1 rounded-md transition-colors shadow-md",title:"Reset zoom to full time range",children:"Reset Zoom"})]}),n.jsx("div",{ref:K,className:"w-full h-full",children:b&&u?n.jsx("svg",{ref:F,width:he.width,height:he.height}):n.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-sm",children:b?"Hover over the map to see a time series plot":"Load data to view plots"})})]})},ay=()=>{const{primaryDataLayer:r,timeRange:u,currentDateIndex:f,setCurrentDateIndex:o,handleManualTimeRangeChange:m,timeZoomDomain:v,events:k}=Na(),T=!!r,S=r?r.dimensions.time-1:0,x=y.useRef(null),b=y.useRef(null),j=y.useRef(null),[M,z]=y.useState(0),[Y,F]=y.useState(null);y.useEffect(()=>{const L=b.current;if(!L)return;const B=new ResizeObserver(_=>{_[0]&&z(_[0].contentRect.width)});return B.observe(L),()=>B.disconnect()},[]);const K=y.useMemo(()=>M===0||!v?d3.scaleUtc():d3.scaleUtc().domain(v).range([Sl.left,M-Sl.right]),[v,M]),he=y.useMemo(()=>{if(!T||M<100||!v)return[];const[L,B]=v,_=(B.getTime()-L.getTime())/(1e3*60*60);let ne,U;return _<=48?(ne=K.ticks(d3.utcHour.every(3)),U=d3.utcFormat("%H:%M")):_<=720?(ne=K.ticks(d3.utcDay.every(1)),U=d3.utcFormat("%d")):(ne=K.ticks(d3.utcMonth.every(1)),U=d3.utcFormat("%b")),ne.map(be=>({date:be,label:U(be),isMajor:be.getUTCHours()===0&&be.getUTCMinutes()===0}))},[M,v,T,K]),Ne=y.useCallback((L,B=!1)=>{if(!T||!u||f===null)return;const _=x.current;if(!_)return;const ne=_.getBoundingClientRect(),U=L.clientX-ne.left,be=K.invert(U),we=Math.max(0,Math.min(S,Lx(be)));if(B){const Oe=K(Bt(u.start)),qe=K(Bt(u.end)),Ge=K(Bt(f)),E=Math.abs(U-Oe),le=Math.abs(U-qe),se=Math.abs(U-Ge),Ee=20;if(se<Ee&&se<=E&&se<=le)F("current");else if(E<le&&E<Ee)F("start");else if(le<Ee)F("end");else{const ye=Math.min(E,le,se);F(ye===se?"current":ye===E?"start":"end")}}else Y&&(j.current!==null&&cancelAnimationFrame(j.current),j.current=requestAnimationFrame(()=>{Y==="start"?m({...u,start:Math.min(we,u.end)}):Y==="end"?m({...u,end:Math.max(we,u.start)}):Y==="current"&&o(we),j.current=null}))},[K,m,o,S,T,u,f,Y]);y.useEffect(()=>{const L=()=>{F(null),j.current!==null&&(cancelAnimationFrame(j.current),j.current=null)},B=_=>{Y&&Ne(_,!1)};return Y&&(window.addEventListener("mousemove",B),window.addEventListener("mouseup",L)),()=>{window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",L),j.current!==null&&(cancelAnimationFrame(j.current),j.current=null)}},[Y,Ne]),y.useEffect(()=>{const L=B=>{if(!(!T||!u||f===null)){if(B.key==="ArrowLeft"){B.preventDefault();const _=Math.max(0,f-1);_!==f&&o(_)}else if(B.key==="ArrowRight"){B.preventDefault();const _=Math.min(S,f+1);_!==f&&o(_)}}};return window.addEventListener("keydown",L),()=>{window.removeEventListener("keydown",L)}},[T,u,f,S,o]);const ue=u?K(Bt(u.start)):0,re=u?K(Bt(u.end)):0,je=f!==null?K(Bt(f)):0;return n.jsx("section",{className:"bg-gray-800/70 backdrop-blur-sm border-t border-gray-700 w-full flex-shrink-0 z-40 h-[85px]",children:n.jsx("div",{ref:b,className:"w-full h-full relative",children:n.jsxs("svg",{ref:x,width:M,height:85,className:`absolute inset-0 ${T?"cursor-ew-resize":"opacity-50"}`,onMouseDown:L=>Ne(L,!0),children:[n.jsx("line",{x1:Sl.left,y1:55,x2:M-Sl.right,y2:55,stroke:"#4A5568",strokeWidth:"2"}),T&&he.map(({date:L,label:B,isMajor:_})=>{const ne=K(L);return n.jsxs("g",{children:[n.jsx("line",{x1:ne,y1:_?45:50,x2:ne,y2:65,stroke:"#A0AEC0",strokeWidth:"1"}),B&&n.jsx("text",{x:ne,y:42,fill:"#90CDF4",fontSize:"10",textAnchor:"middle",children:B})]},L.toISOString())}),T&&k.filter(L=>L.visible).map(L=>{const B=Bt(L.dateIndex),_=K(B),ne=L.name.substring(0,12),U=L.name.substring(12,24);return n.jsxs("g",{children:[n.jsx("line",{x1:_,y1:30,x2:_,y2:75,stroke:L.color,strokeWidth:"2",strokeDasharray:"4,2"}),n.jsx("circle",{cx:_,cy:55,r:"4",fill:L.color,stroke:"#1A202C",strokeWidth:"1.5"}),n.jsx("text",{x:_,y:12,fill:L.color,fontSize:"10",fontWeight:"600",textAnchor:"middle",className:"pointer-events-none",children:ne}),U&&n.jsx("text",{x:_,y:24,fill:L.color,fontSize:"10",fontWeight:"600",textAnchor:"middle",className:"pointer-events-none",children:U})]},L.id)}),T&&u&&M>0&&n.jsxs("g",{children:[n.jsx("rect",{x:ue,y:"51",width:re-ue,height:"8",fill:"rgba(79, 209, 197, 0.5)"}),n.jsx("line",{x1:ue,y1:35,x2:ue,y2:75,stroke:"#4FD1C5",strokeWidth:"2"}),n.jsx("circle",{cx:ue,cy:55,r:"6",fill:"#4FD1C5",stroke:"#1A202C",strokeWidth:"2"}),n.jsx("line",{x1:re,y1:35,x2:re,y2:75,stroke:"#4FD1C5",strokeWidth:"2"}),n.jsx("circle",{cx:re,cy:55,r:"6",fill:"#4FD1C5",stroke:"#1A202C",strokeWidth:"2"})]}),T&&f!==null&&M>0&&n.jsxs("g",{children:[n.jsx("line",{x1:je,y1:35,x2:je,y2:75,stroke:"#EF4444",strokeWidth:"2"}),n.jsx("circle",{cx:je,cy:55,r:"6",fill:"#EF4444",stroke:"#1A202C",strokeWidth:"2"})]})]})})})},ly=({requiredFiles:r,onCancel:u,onConfirm:f})=>{const[o,m]=y.useState(null);return n.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center",children:n.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg text-gray-200 border border-gray-700",children:[n.jsx("h2",{className:"text-xl font-bold text-cyan-300 mb-4",children:"Restore Session"}),n.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"To continue, please provide the following data file(s) from your original session:"}),n.jsx("ul",{className:"list-disc list-inside bg-gray-900/50 p-3 rounded-md mb-4 text-sm font-mono",children:r.map(v=>n.jsx("li",{children:v},v))}),n.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select all required files below."}),n.jsx("div",{children:n.jsx("input",{type:"file",multiple:!0,accept:".npy,.png,.vrt",onChange:v=>m(v.target.files),className:"w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-cyan-600 file:text-white hover:file:bg-cyan-500"})}),n.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[n.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-md text-sm font-semibold",children:"Cancel"}),n.jsx("button",{onClick:()=>o&&f(o),disabled:!o||o.length===0,className:"px-4 py-2 bg-teal-600 hover:bg-teal-500 disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed rounded-md text-sm font-semibold",children:"Load Session"})]})]})})},ny=({isOpen:r,onClose:u})=>r?n.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700 flex-shrink-0",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-cyan-300",children:"Lunagis User Manual"}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Temporal Data Visualization Platform"})]}),n.jsx("button",{onClick:u,className:"text-gray-400 hover:text-white transition-colors p-1 hover:bg-gray-700 rounded","aria-label":"Close",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"p-6 overflow-y-auto flex-1 text-gray-300",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("section",{children:[n.jsxs("h3",{className:"text-xl font-semibold text-cyan-300 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Introduction"]}),n.jsx("p",{className:"text-sm leading-relaxed text-gray-400",children:"Lunagis is a powerful temporal data visualization platform designed for analyzing and exploring geospatial and time-series data. It provides an intuitive interface for loading, visualizing, and analyzing data across time dimensions with support for multiple data layers, custom artifacts, events, and cell selection tools."})]}),n.jsxs("section",{children:[n.jsxs("h3",{className:"text-xl font-semibold text-cyan-300 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Getting Started"]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm",children:"Quick Start Guide"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-400",children:[n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-300",children:"Load Data:"}),' Click the "Layers" tool (or press ',n.jsx("kbd",{className:"bg-gray-700 px-2 py-0.5 rounded text-xs",children:"1"}),") and add a data layer using .npy files"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-300",children:"Navigate Time:"})," Use the time slider at the bottom to move through different time steps"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-300",children:"Adjust View:"})," Use mouse wheel to zoom, click and drag to pan the map"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-300",children:"Configure Display:"}),' Click "Config" (or press ',n.jsx("kbd",{className:"bg-gray-700 px-2 py-0.5 rounded text-xs",children:"5"}),") to adjust visualization settings"]})]})]})})]}),n.jsxs("section",{children:[n.jsxs("h3",{className:"text-xl font-semibold text-cyan-300 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),"Main Tools"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsxs("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm flex items-center",children:[n.jsx("kbd",{className:"bg-gray-700 px-2 py-0.5 rounded text-xs mr-2",children:"1"})," Layers"]}),n.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Manage data visualization layers including data layers, analysis layers, and image overlays."}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Add/remove data layers (.npy files)"}),n.jsx("li",{children:"Create analysis layers with boolean expressions"}),n.jsx("li",{children:"Import image overlays (.png, .jpg) and base maps (.vrt)"}),n.jsx("li",{children:"Adjust opacity and visibility"}),n.jsx("li",{children:"Configure color scales and value ranges"})]})]}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm",children:"Artifacts"}),n.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Create and manage visual annotations on the map canvas."}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Draw circles for point annotations"}),n.jsx("li",{children:"Create rectangles for area selection"}),n.jsx("li",{children:"Draw custom paths and polylines"}),n.jsx("li",{children:"Customize colors and labels"}),n.jsx("li",{children:"Delete or modify artifacts"})]})]}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm",children:"Events"}),n.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Mark and track important temporal events on the timeline."}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Add events at specific time points"}),n.jsx("li",{children:"Assign custom names and colors"}),n.jsx("li",{children:"View events on timeline and plots"}),n.jsx("li",{children:"Navigate to event timestamps"}),n.jsx("li",{children:"Events saved with session data"})]})]}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsxs("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm flex items-center",children:[n.jsx("kbd",{className:"bg-gray-700 px-2 py-0.5 rounded text-xs mr-2",children:"4"})," Measure"]}),n.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Cell selection tools for data inspection."}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Click cells to select/deselect"}),n.jsx("li",{children:"Multi-cell selection mode"}),n.jsx("li",{children:"Customize selection color"}),n.jsx("li",{children:"Clear all selections"}),n.jsx("li",{children:"View selected cell data in time series plot"})]})]}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsxs("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm flex items-center",children:[n.jsx("kbd",{className:"bg-gray-700 px-2 py-0.5 rounded text-xs mr-2",children:"5"})," Config"]}),n.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Session management and display configuration options."}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Save/load session state to JSON"}),n.jsx("li",{children:"Configure playback speed (1-30 FPS)"}),n.jsx("li",{children:"Adjust display preferences"}),n.jsx("li",{children:"Manage project settings"}),n.jsx("li",{children:"Session includes layers, artifacts, and events"})]})]})]})]}),n.jsxs("section",{children:[n.jsxs("h3",{className:"text-xl font-semibold text-cyan-300 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Keyboard Shortcuts"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm",children:"Tool Selection"}),n.jsxs("ul",{className:"space-y-1.5 text-sm",children:[n.jsxs("li",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Layers Panel"}),n.jsx("kbd",{className:"bg-gray-700 px-2 py-1 rounded text-xs font-mono",children:"1"})]}),n.jsxs("li",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Pan Tool"}),n.jsx("kbd",{className:"bg-gray-700 px-2 py-1 rounded text-xs font-mono",children:"2"})]}),n.jsxs("li",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Zoom Tool"}),n.jsx("kbd",{className:"bg-gray-700 px-2 py-1 rounded text-xs font-mono",children:"3"})]}),n.jsxs("li",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Cell Select"}),n.jsx("kbd",{className:"bg-gray-700 px-2 py-1 rounded text-xs font-mono",children:"4"})]}),n.jsxs("li",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Multi-Cell Select"}),n.jsx("kbd",{className:"bg-gray-700 px-2 py-1 rounded text-xs font-mono",children:"5"})]})]})]}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm",children:"Time Navigation"}),n.jsxs("ul",{className:"space-y-1.5 text-sm",children:[n.jsxs("li",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Play/Pause"}),n.jsx("kbd",{className:"bg-gray-700 px-2 py-1 rounded text-xs font-mono",children:"Space"})]}),n.jsxs("li",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Next Time Step"}),n.jsx("kbd",{className:"bg-gray-700 px-2 py-1 rounded text-xs font-mono",children:""})]}),n.jsxs("li",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Previous Time Step"}),n.jsx("kbd",{className:"bg-gray-700 px-2 py-1 rounded text-xs font-mono",children:""})]})]})]})]})]}),n.jsxs("section",{children:[n.jsxs("h3",{className:"text-xl font-semibold text-cyan-300 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),"Working with Data Layers"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm",children:"Loading Data"}),n.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Lunagis supports NumPy binary format (.npy) files for data layers. Data should be structured as 3D arrays with dimensions [time, height, width]."}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:'Click "Add Layer" in the Layers panel'}),n.jsx("li",{children:"Select your .npy file from the file browser"}),n.jsx("li",{children:"Configure layer name and visualization settings"}),n.jsx("li",{children:"Layer will appear in the layer list with visibility toggle"})]})]}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm",children:"Analysis Layers"}),n.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Create derived layers using boolean and comparison expressions on existing data layers."}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Comparison operators: >, >=, <, <=, =="}),n.jsx("li",{children:"Logical operators: AND, OR, NOT"}),n.jsx("li",{children:"Reference layers by name in expressions"}),n.jsx("li",{children:"Results shown as true/false (1/0) values"}),n.jsx("li",{children:'Example: "layer1 > 50 AND layer2 < 100"'})]})]}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm",children:"Color Scale Configuration"}),n.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Customize how data values are mapped to colors for optimal visualization."}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Choose from multiple color map presets (Viridis, Plasma, Inferno, Magma, Cividis, Turbo, Grayscale)"}),n.jsx("li",{children:"Set custom min/max value ranges"}),n.jsx("li",{children:"Create custom color scales with threshold mode"}),n.jsx("li",{children:"Invert color maps"}),n.jsx("li",{children:"Adjust opacity for layer blending"})]})]}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm",children:"Image Overlays"}),n.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Import georeferenced images and standalone image overlays."}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Image layers: .png, .jpg files as standalone overlays"}),n.jsx("li",{children:"Base map layers: .vrt files with .png for georeferenced images"}),n.jsx("li",{children:"Adjust opacity and layer order"}),n.jsx("li",{children:"Toggle visibility independently"})]})]})]})]}),n.jsxs("section",{children:[n.jsxs("h3",{className:"text-xl font-semibold text-cyan-300 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Advanced Analysis Features"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-xs text-gray-400",children:"Lunagis includes specialized analysis tools for binary day/night data layers. These tools help analyze daylight patterns and forecast nightfall periods."}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm",children:"Nightfall Forecast"}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Predicts the duration of upcoming nightfall periods across the entire time series. Available as a button on any data layer with binary day/night values (1=day, 0=night)."}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-cyan-400 text-xs mb-1",children:"How It Works"}),n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"The algorithm uses a two-pass approach to detect and forecast nightfall periods:"}),n.jsxs("ol",{className:"text-xs text-gray-500 space-y-1 list-decimal list-inside pl-2",children:[n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-400",children:"Pass 1:"})," Scans the entire time series to identify all night periods (continuous sequences where value = 0)"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-400",children:"Pass 2:"})," For each timestep, assigns the duration of the relevant night period:",n.jsxs("ul",{className:"list-disc list-inside pl-4 mt-1 space-y-0.5",children:[n.jsxs("li",{children:[n.jsx("span",{className:"text-cyan-400",children:"During daytime"})," (value=1): Assigns ",n.jsx("strong",{children:"positive"})," duration (in hours) until the next nightfall begins"]}),n.jsxs("li",{children:[n.jsx("span",{className:"text-purple-400",children:"During nighttime"})," (value=0): Assigns ",n.jsx("strong",{children:"negative"})," duration (in hours) representing time elapsed into current nightfall"]})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-cyan-400 text-xs mb-1",children:"Output Values"}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside pl-2",children:[n.jsxs("li",{children:[n.jsx("strong",{className:"text-green-400",children:"Positive values:"})," Hours until next nightfall (during day periods)"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-red-400",children:"Negative values:"})," Hours into current nightfall (during night periods)"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-400",children:"Zero:"})," No more night periods ahead in the time series"]})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-cyan-400 text-xs mb-1",children:"Visualization"}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside pl-2",children:[n.jsx("li",{children:"Creates a new time-varying analysis layer (3D: time  height  width)"}),n.jsx("li",{children:"Default colormap uses custom color stops optimized for 14 day ranges"}),n.jsx("li",{children:"Cyan colors indicate nighttime periods, yellow shows transition points"}),n.jsx("li",{children:"Results are cached for performance"})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-cyan-400 text-xs mb-1",children:"Use Cases"}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside pl-2",children:[n.jsx("li",{children:"Planning activities around daylight availability"}),n.jsx("li",{children:"Identifying locations with extended night periods"}),n.jsx("li",{children:"Analyzing polar day/night patterns"}),n.jsx("li",{children:"Forecasting darkness duration for energy or agricultural applications"})]})]})]})]}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-semibold text-cyan-400 mb-2 text-sm",children:"Daylight Fraction"}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Calculates the percentage of time each location experiences daylight over a selected time range. Available as a button on any data layer with binary day/night values (1=day, 0=night)."}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-cyan-400 text-xs mb-1",children:"Calculation Formula"}),n.jsx("div",{className:"bg-gray-950/50 p-2 rounded border border-gray-800 font-mono text-xs text-cyan-300 my-2",children:"Daylight Fraction (%) = (dayHours / totalHours)  100"}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Where ",n.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"dayHours"})," is the count of timesteps with value=1 (daylight) and ",n.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"totalHours"})," is the total timesteps in the selected time range."]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-cyan-400 text-xs mb-1",children:"How It Works"}),n.jsxs("ol",{className:"text-xs text-gray-500 space-y-1 list-decimal list-inside pl-2",children:[n.jsx("li",{children:"For each pixel location (x, y), scan through all timesteps in the current time range"}),n.jsx("li",{children:"Count how many timesteps have value = 1 (daylight)"}),n.jsx("li",{children:"Divide by total timesteps and multiply by 100 to get percentage"}),n.jsx("li",{children:"Store result in a 2D output slice (no time dimension)"})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-cyan-400 text-xs mb-1",children:"Output Values"}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside pl-2",children:[n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-400",children:"Range:"})," 0% to 100%"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-400",children:"0%:"})," Location never experienced daylight during time range"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-400",children:"100%:"})," Location had continuous daylight during time range"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-400",children:"50%:"})," Equal amounts of day and night"]})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-cyan-400 text-xs mb-1",children:"Hover Details"}),n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"When hovering over a Daylight Fraction layer, detailed statistics are calculated in real-time:"}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside pl-2",children:[n.jsx("li",{children:"Overall daylight percentage"}),n.jsx("li",{children:"Total daylight and night hours"}),n.jsx("li",{children:"Number of day periods (continuous daylight sequences)"}),n.jsx("li",{children:"Longest and shortest day periods (in hours)"}),n.jsx("li",{children:"Number of night periods (continuous darkness sequences)"}),n.jsx("li",{children:"Longest and shortest night periods (in hours)"})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-cyan-400 text-xs mb-1",children:"Visualization"}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside pl-2",children:[n.jsx("li",{children:"Creates a static 2D analysis layer (height  width only)"}),n.jsx("li",{children:"Output is a single snapshot aggregating the selected time range"}),n.jsx("li",{children:"Automatically recalculates when you change the time range"}),n.jsx("li",{children:"Results are cached per time range for performance"})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-cyan-400 text-xs mb-1",children:"Use Cases"}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside pl-2",children:[n.jsx("li",{children:"Analyzing daylight availability for solar energy potential"}),n.jsx("li",{children:"Identifying optimal locations based on daylight requirements"}),n.jsx("li",{children:"Comparing seasonal variations in daylight distribution"}),n.jsx("li",{children:"Agricultural planning and crop selection based on light exposure"}),n.jsx("li",{children:"Urban planning and building placement optimization"})]})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-gray-900/80 to-gray-950/80 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-semibold text-cyan-400 mb-3 text-sm",children:"Quick Comparison"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-700",children:[n.jsx("th",{className:"text-left py-2 px-2 text-cyan-300",children:"Feature"}),n.jsx("th",{className:"text-left py-2 px-2 text-cyan-300",children:"Nightfall Forecast"}),n.jsx("th",{className:"text-left py-2 px-2 text-cyan-300",children:"Daylight Fraction"})]})}),n.jsxs("tbody",{className:"text-gray-400",children:[n.jsxs("tr",{className:"border-b border-gray-800",children:[n.jsx("td",{className:"py-2 px-2 font-semibold",children:"Output Type"}),n.jsx("td",{className:"py-2 px-2",children:"3D time-varying"}),n.jsx("td",{className:"py-2 px-2",children:"2D static slice"})]}),n.jsxs("tr",{className:"border-b border-gray-800",children:[n.jsx("td",{className:"py-2 px-2 font-semibold",children:"Values"}),n.jsx("td",{className:"py-2 px-2",children:"Hours ()"}),n.jsx("td",{className:"py-2 px-2",children:"Percentage (0-100%)"})]}),n.jsxs("tr",{className:"border-b border-gray-800",children:[n.jsx("td",{className:"py-2 px-2 font-semibold",children:"Purpose"}),n.jsx("td",{className:"py-2 px-2",children:"Predict future nightfall"}),n.jsx("td",{className:"py-2 px-2",children:"Analyze daylight availability"})]}),n.jsxs("tr",{className:"border-b border-gray-800",children:[n.jsx("td",{className:"py-2 px-2 font-semibold",children:"Time Range"}),n.jsx("td",{className:"py-2 px-2",children:"Full time series"}),n.jsx("td",{className:"py-2 px-2",children:"Current selection"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"py-2 px-2 font-semibold",children:"Updates"}),n.jsx("td",{className:"py-2 px-2",children:"Static after creation"}),n.jsx("td",{className:"py-2 px-2",children:"Auto-updates with time range"})]})]})]})})]}),n.jsx("div",{className:"bg-blue-900/20 p-3 rounded-lg border border-blue-700/50",children:n.jsxs("p",{className:"text-xs text-blue-200",children:[n.jsx("strong",{children:"Note:"})," Both analysis tools require source data layers with binary values where 1 represents daylight and 0 represents nightfall/darkness."]})})]})]}),n.jsxs("section",{children:[n.jsxs("h3",{className:"text-xl font-semibold text-cyan-300 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Time Navigation & Playback"]}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"The time slider at the bottom of the screen allows you to navigate through temporal data."}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1.5 list-disc list-inside",children:[n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-400",children:"Manual Navigation:"})," Click and drag the slider handle to move to any time step"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-400",children:"Playback Mode:"})," Press Space or click the play button to automatically advance through time"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-400",children:"Step Navigation:"})," Use arrow keys ( ) to move one step forward or backward"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-400",children:"Playback Speed:"})," Adjust speed in Config panel (1-30 FPS) for faster or slower playback"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-gray-400",children:"Auto-Loop:"})," Playback automatically loops back to the beginning when reaching the end"]})]})]})]}),n.jsxs("section",{children:[n.jsxs("h3",{className:"text-xl font-semibold text-cyan-300 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Session Management"]}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Save your entire workspace configuration including layers, artifacts, events, and settings to resume work later."}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-cyan-400 text-xs mb-1",children:"Saving Sessions"}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside pl-2",children:[n.jsx("li",{children:'Click "Save Session" in the Config panel'}),n.jsx("li",{children:"Downloads a .json file with all session configuration"}),n.jsx("li",{children:"Includes layer metadata, artifacts, events, and display settings"}),n.jsx("li",{children:"Note: Data files (.npy) must be saved separately and re-imported"})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-cyan-400 text-xs mb-1",children:"Loading Sessions"}),n.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 list-disc list-inside pl-2",children:[n.jsx("li",{children:'Click "Load Session" in the Config panel'}),n.jsx("li",{children:"Select the .json session file"}),n.jsx("li",{children:"Provide referenced data files (.npy) when prompted"}),n.jsx("li",{children:"All settings, artifacts, and events will be restored"})]})]})]})]})]}),n.jsxs("section",{children:[n.jsxs("h3",{className:"text-xl font-semibold text-cyan-300 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Best Practices"]}),n.jsx("div",{className:"bg-gradient-to-br from-cyan-900/20 to-blue-900/20 p-4 rounded-lg border border-cyan-700/50",children:n.jsxs("ul",{className:"text-xs text-gray-300 space-y-2",children:[n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-cyan-400 mr-2",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Performance:"})," Large datasets may take time to load. Consider downsampling very large files for better performance."]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-cyan-400 mr-2",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Layer Order:"})," Layers are rendered in order. Adjust opacity to see multiple layers simultaneously."]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-cyan-400 mr-2",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Color Scales:"})," Experiment with different color maps to highlight features in your data."]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-cyan-400 mr-2",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Events:"})," Use events to mark important temporal milestones for easy navigation and reference."]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-cyan-400 mr-2",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Artifacts:"})," Create artifacts to highlight areas of interest or mark regions for analysis."]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-cyan-400 mr-2",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Save Often:"})," Save your session regularly to preserve your work. Remember to keep your data files organized."]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-cyan-400 mr-2",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Cell Selection:"})," Use the Measure tool to select cells and view their values over time in the time series plot."]})]})]})})]}),n.jsxs("section",{children:[n.jsxs("h3",{className:"text-xl font-semibold text-cyan-300 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})}),"Support & Resources"]}),n.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-700",children:[n.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"For additional help, documentation, or to report issues, please refer to the project repository and documentation."}),n.jsx("p",{className:"text-xs text-gray-500",children:"Version: 1.0.0 | Built with React, TypeScript, and Vite"})]})]})]})}),n.jsx("div",{className:"p-6 border-t border-gray-700 flex justify-end gap-4 flex-shrink-0",children:n.jsx("button",{onClick:u,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-md text-sm font-semibold transition-colors",children:"Close"})})]})}):null,fl=({label:r,value:u})=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-gray-400 text-xs",children:[r,":"]}),n.jsx("span",{className:"font-mono text-cyan-300 text-xs",children:u})]}),sy=()=>{const{hoveredCoords:r,timeRange:u,currentDateIndex:f,primaryDataLayer:o,timeSeriesData:m,artifactDisplayOptions:v,setArtifactDisplayOptions:k}=Na();if(!o)return null;const T=m&&f!==null&&f<m.data.length?m.data[f]:null,S=()=>{k(x=>({...x,showActivitySymbols:!x.showActivitySymbols}))};return n.jsxs("section",{className:"bg-gray-800/70 border-y border-gray-700 w-full flex-shrink-0 z-40 px-4 py-1 flex items-center justify-between flex-wrap gap-x-6 gap-y-1",children:[n.jsxs("div",{className:"flex items-center gap-x-4",children:[n.jsx(fl,{label:"Lat",value:r?r.lat.toFixed(4):"---"}),n.jsx(fl,{label:"Lon",value:r?r.lon.toFixed(4):"---"}),T!==null&&n.jsx(fl,{label:"Value",value:T.toFixed(2)})]}),u?n.jsxs("div",{className:"flex items-center gap-x-4",children:[n.jsx(fl,{label:"Current",value:f!==null?Vn(f):"---"}),n.jsx(fl,{label:"Start",value:Vn(u.start)}),n.jsx(fl,{label:"End",value:Vn(u.end)}),n.jsx(fl,{label:"Duration",value:`${u.end-u.start+1} hrs`})]}):n.jsxs("div",{className:"flex items-center gap-x-4",children:[n.jsx(fl,{label:"Current",value:"---"}),n.jsx(fl,{label:"Start",value:"---"}),n.jsx(fl,{label:"End",value:"---"}),n.jsx(fl,{label:"Duration",value:"---"})]}),n.jsx("button",{onClick:S,className:`px-3 py-1 rounded text-xs font-medium transition-colors ${v.showActivitySymbols?"bg-cyan-600 hover:bg-cyan-500 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,title:v.showActivitySymbols?"Hide activity symbols":"Show activity symbols",children:v.showActivitySymbols?" Activities":" Activities"})]})};class fi extends y.Component{constructor(u){super(u),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.handleReload=()=>{window.location.reload()},this.handleClearStorage=()=>{confirm("This will clear all saved data and reload the page. Continue?")&&(localStorage.clear(),sessionStorage.clear(),window.location.reload())},this.state={hasError:!1,error:null,errorInfo:null,copied:!1}}static getDerivedStateFromError(u){return{hasError:!0,error:u}}componentDidCatch(u,f){console.error("Error Boundary caught an error:",u,f),this.setState({error:u,errorInfo:f}),this.props.onError&&this.props.onError(u,f)}render(){var u;return this.state.hasError?this.props.fallback?this.props.fallback:n.jsx("div",{className:"h-screen w-screen bg-gray-900 text-gray-200 flex items-center justify-center p-8",children:n.jsxs("div",{className:"max-w-2xl w-full bg-gray-800 rounded-lg shadow-2xl p-8 border border-red-500/30",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("svg",{className:"w-12 h-12 text-red-500 mr-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),n.jsx("h1",{className:"text-3xl font-bold text-red-500",children:"Something Went Wrong"})]}),n.jsx("p",{className:"text-gray-300 mb-6 text-lg",children:"The application encountered an unexpected error. Don't worry, your work may still be recoverable."}),n.jsxs("details",{className:"mb-6 bg-gray-900/50 rounded p-4 border border-gray-700",children:[n.jsx("summary",{className:"cursor-pointer text-gray-400 hover:text-gray-200 font-medium mb-2",children:"View Technical Details"}),n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-red-400 mb-1",children:"Error:"}),n.jsx("pre",{className:"text-xs bg-black/30 p-3 rounded overflow-x-auto text-red-300",children:(u=this.state.error)==null?void 0:u.toString()})]}),this.state.errorInfo&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-yellow-400 mb-1",children:"Component Stack:"}),n.jsx("pre",{className:"text-xs bg-black/30 p-3 rounded overflow-x-auto text-yellow-300",children:this.state.errorInfo.componentStack})]})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsx("button",{onClick:this.handleReset,className:"px-6 py-3 bg-cyan-600 hover:bg-cyan-500 text-white rounded font-medium transition-colors",children:"Try Again"}),n.jsx("button",{onClick:this.handleReload,className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded font-medium transition-colors",children:"Reload Page"}),n.jsx("button",{onClick:this.handleClearStorage,className:"px-6 py-3 bg-red-600 hover:bg-red-500 text-white rounded font-medium transition-colors",children:"Clear Data & Reset"}),n.jsx("button",{onClick:()=>{var o,m;const f=`Error: ${(o=this.state.error)==null?void 0:o.toString()}

Stack: ${(m=this.state.errorInfo)==null?void 0:m.componentStack}`;navigator.clipboard.writeText(f),this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),2e3)},className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded font-medium transition-colors",children:this.state.copied?" Copied!":"Copy Error Details"})]}),n.jsx("div",{className:"mt-6 p-4 bg-blue-900/20 border border-blue-500/30 rounded",children:n.jsxs("p",{className:"text-sm text-blue-300",children:[n.jsx("strong",{children:"Tip:"}),' If this error persists, try clearing your browser cache or using "Clear Data & Reset" above.']})})]})}):this.props.children}}const iy=({message:r,progress:u,onCancel:f,show:o})=>{if(!o)return null;const m=u===void 0;return n.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",children:n.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl p-8 max-w-md w-full mx-4 border border-gray-700",children:[m&&n.jsx("div",{className:"flex justify-center mb-6",children:n.jsxs("svg",{className:"animate-spin h-12 w-12 text-cyan-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),n.jsx("p",{className:"text-lg text-gray-200 text-center mb-4",children:r}),!m&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 mb-2 overflow-hidden",children:n.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-blue-500 h-full transition-all duration-300 ease-out rounded-full",style:{width:`${Math.min(100,Math.max(0,u))}%`}})}),n.jsxs("p",{className:"text-sm text-gray-400 text-center",children:[Math.round(u),"%"]})]}),f&&n.jsx("button",{onClick:f,className:"mt-6 w-full px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded transition-colors",children:"Cancel"})]})})};function cy(r,u=!0){const f=y.useCallback(o=>{if(!u)return;const m=o.target;if(!(m.tagName==="INPUT"||m.tagName==="TEXTAREA"||m.contentEditable==="true"))for(const v of r){const k=o.key.toLowerCase()===v.key.toLowerCase(),T=v.ctrl===void 0||o.ctrlKey===v.ctrl,S=v.shift===void 0||o.shiftKey===v.shift,x=v.alt===void 0||o.altKey===v.alt;if(k&&T&&S&&x){o.preventDefault(),v.action();break}}},[r,u]);y.useEffect(()=>{if(u)return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[f,u])}const ry=()=>{const{importRequest:r,handleRestoreSession:u,setImportRequest:f,activeTool:o,onToolSelect:m,primaryDataLayer:v,baseMapLayer:k,isLoading:T,onTogglePlay:S,handleManualTimeRangeChange:x,timeRange:b,onImportConfig:j,onExportConfig:M,canUndo:z,canRedo:Y,onUndo:F,onRedo:K}=Na(),[he,Ne]=y.useState(!1),ue=js.useMemo(()=>{if(!T)return;const re=T.match(/(\d+)%/);return re?parseInt(re[1],10):void 0},[T]);return cy([{key:" ",description:"Play/Pause time animation",action:()=>{v&&b&&S()}},{key:"ArrowLeft",description:"Previous time step",action:()=>{b&&b.start>0&&x({start:b.start-1,end:b.start-1})}},{key:"ArrowRight",description:"Next time step",action:()=>{b&&v&&b.start<v.dimensions.time-1&&x({start:b.start+1,end:b.start+1})}},{key:"1",description:"Switch to Layers tool",action:()=>m("layers")},{key:"2",description:"Switch to Pan tool",action:()=>m("pan")},{key:"3",description:"Switch to Zoom tool",action:()=>m("zoom")},{key:"4",description:"Switch to Cell Select tool",action:()=>m("cellSelect")},{key:"5",description:"Switch to Multi-Cell Select tool",action:()=>m("multiCellSelect")}],!T),n.jsxs("div",{className:"h-screen bg-gray-900 text-gray-200 flex flex-row font-sans overflow-hidden",children:[r&&n.jsx(ly,{requiredFiles:r.requiredFiles,onCancel:()=>f(null),onConfirm:re=>u(r.config,re)}),n.jsx(ny,{isOpen:he,onClose:()=>Ne(!1)}),n.jsx(iy,{show:!!T,message:T||"",progress:ue}),n.jsx(zx,{activeTool:o,onToolSelect:m,onUserManualClick:()=>Ne(!0),onImportConfig:j,onExportConfig:M,canUndo:z,canRedo:Y,onUndo:F,onRedo:K,isDataLoaded:!!v||!!k}),n.jsx(mg,{}),n.jsxs("main",{className:"flex-grow flex flex-col min-w-0",children:[n.jsx("section",{className:"flex-grow flex items-center justify-center bg-black/20 p-4 sm:p-6 lg:p-8 relative",children:n.jsx(fi,{fallback:n.jsxs("div",{className:"text-center p-8",children:[n.jsx("p",{className:"text-red-500 text-xl mb-4",children:"Canvas Error"}),n.jsx("p",{className:"text-gray-400",children:"The map canvas encountered an error. Try reloading the page."})]}),children:n.jsx(ey,{})})}),v&&n.jsxs(n.Fragment,{children:[n.jsx(fi,{fallback:n.jsx("div",{className:"h-8 bg-gray-800"}),children:n.jsx(sy,{})}),n.jsx(fi,{fallback:n.jsx("div",{className:"h-48 bg-gray-800"}),children:n.jsx(ty,{})}),n.jsx(fi,{fallback:n.jsx("div",{className:"h-20 bg-gray-800"}),children:n.jsx(ay,{})})]})]})]})},ch=document.getElementById("root");if(!ch)throw new Error("Could not find root element to mount to");const oy=vx.createRoot(ch);oy.render(n.jsx(js.StrictMode,{children:n.jsx(fi,{children:n.jsx(qx,{children:n.jsx(Zx,{children:n.jsx(ry,{})})})})}));
